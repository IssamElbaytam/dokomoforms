{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","dokomoforms/static/src/js/Application.js","dokomoforms/static/src/js/api/FacilityAPI.js","dokomoforms/static/src/js/api/PhotoAPI.js","dokomoforms/static/src/js/components/Facility.js","dokomoforms/static/src/js/components/Footer.js","dokomoforms/static/src/js/components/Header.js","dokomoforms/static/src/js/components/Location.js","dokomoforms/static/src/js/components/MultipleChoice.js","dokomoforms/static/src/js/components/Note.js","dokomoforms/static/src/js/components/Photo.js","dokomoforms/static/src/js/components/Question.js","dokomoforms/static/src/js/components/Splash.js","dokomoforms/static/src/js/components/Submit.js","dokomoforms/static/src/js/components/baseComponents/BigButton.js","dokomoforms/static/src/js/components/baseComponents/Card.js","dokomoforms/static/src/js/components/baseComponents/DontKnow.js","dokomoforms/static/src/js/components/baseComponents/FacilityRadios.js","dokomoforms/static/src/js/components/baseComponents/LittleButton.js","dokomoforms/static/src/js/components/baseComponents/Menu.js","dokomoforms/static/src/js/components/baseComponents/Message.js","dokomoforms/static/src/js/components/baseComponents/PhotoField.js","dokomoforms/static/src/js/components/baseComponents/ResponseField.js","dokomoforms/static/src/js/components/baseComponents/Select.js","dokomoforms/static/src/js/components/baseComponents/Title.js","dokomoforms/static/src/js/conf/config.js","dokomoforms/static/src/js/main.js","node_modules/browserify/node_modules/events/events.js","node_modules/browserify/node_modules/inherits/inherits_browser.js","node_modules/browserify/node_modules/process/browser.js","node_modules/browserify/node_modules/util/support/isBufferBrowser.js","node_modules/browserify/node_modules/util/util.js","node_modules/lz-string/libs/lz-string.js","node_modules/mpromise/lib/promise.js","node_modules/node-uuid/uuid.js","node_modules/pouchdb-upsert/index.js","node_modules/pouchdb-upsert/node_modules/lie/lib/INTERNAL.js","node_modules/pouchdb-upsert/node_modules/lie/lib/all.js","node_modules/pouchdb-upsert/node_modules/lie/lib/handlers.js","node_modules/pouchdb-upsert/node_modules/lie/lib/index.js","node_modules/pouchdb-upsert/node_modules/lie/lib/promise.js","node_modules/pouchdb-upsert/node_modules/lie/lib/queueItem.js","node_modules/pouchdb-upsert/node_modules/lie/lib/race.js","node_modules/pouchdb-upsert/node_modules/lie/lib/reject.js","node_modules/pouchdb-upsert/node_modules/lie/lib/resolve.js","node_modules/pouchdb-upsert/node_modules/lie/lib/resolveThenable.js","node_modules/pouchdb-upsert/node_modules/lie/lib/states.js","node_modules/pouchdb-upsert/node_modules/lie/lib/tryCatch.js","node_modules/pouchdb-upsert/node_modules/lie/lib/unwrap.js","node_modules/pouchdb-upsert/node_modules/lie/node_modules/immediate/lib/index.js","node_modules/pouchdb/dist/pouchdb.min.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvGA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// vendor\nvar React = require('react'),\n    $ = require('jquery'),\n    PouchDB  = require('pouchdb/dist/pouchdb.min');\n\n// pouch plugin\nPouchDB.plugin(require('pouchdb-upsert'));\n\n// components\nvar Title = require('./components/baseComponents/Title'),\n    Header = require('./components/Header'),\n    Footer = require('./components/Footer'),\n    Question = require('./components/Question'),\n    Note = require('./components/Note'),\n    MultipleChoice = require('./components/MultipleChoice'),\n    Photo = require('./components/Photo'),\n    Location = require('./components/Location'),\n    Facility = require('./components/Facility'),\n    Submit = require('./components/Submit'),\n    Splash = require('./components/Splash'),\n\n    // api services\n    PhotoAPI = require('./api/PhotoAPI'),\n    FacilityTree = require('./api/FacilityAPI');\n\n/*\n * Create Single Page App with three main components\n * Header, Content, Footer\n */\nvar Application = React.createClass({\n    getInitialState: function() {\n        // Set up db for photos and facility tree\n        var trees = {};\n        var surveyDB = new PouchDB(this.props.survey.id, {\n            'auto_compaction': true\n        });\n        window.surveyDB = surveyDB;\n\n        // Build initial linked list\n        var questions = this.props.survey.nodes;\n        var first_question = null;\n        questions.forEach(function(node, idx) {\n            var question = node;\n            question.prev = null;\n            question.next = null;\n            if (idx > 0) {\n                question.prev = questions[idx - 1];\n            }\n\n            if (idx < questions.length - 1) {\n                question.next = questions[idx + 1];\n            }\n\n            if (idx === 0) {\n                first_question = question;\n            }\n\n        });\n\n        // Recursively construct trees\n        this.buildTrees(questions, trees);\n\n        return {\n            showDontKnow: false,\n            showDontKnowBox: false,\n            head: first_question,\n            question: null,\n            headStack: [], //XXX Stack of linked list heads\n            states : {\n                SPLASH : 1,\n                QUESTION : 2,\n                SUBMIT : 3\n            },\n            state: 1,\n            trees: trees,\n            db: surveyDB\n        };\n    },\n\n    /*\n     * Create Facility Tree object at node id for every facility tree question\n     * Recurse into subnodes if found\n     *\n     * @questions: all nodes at current sub level\n     * @trees: dictionary of question ids and facility trees\n     *\n     * NOTE: facility trees update exact same location in pouchdb (based on bounds of coordinates)\n     * i.e: Multiple trees with same bounds do not increase memory usage (network usage does increase though)\n     */\n    buildTrees: function(questions, trees) {\n        var self = this;\n        questions = questions || [];\n\n        questions.forEach(function(node, idx) {\n            if (node.type_constraint === 'facility') {\n                trees[node.id] = new FacilityTree(\n                        parseFloat(node.logic.nlat),\n                        parseFloat(node.logic.wlng),\n                        parseFloat(node.logic.slat),\n                        parseFloat(node.logic.elng),\n                        surveyDB,\n                        node.id\n                        );\n            }\n\n            if (node.sub_surveys) {\n                node.sub_surveys.forEach(function(subs) {\n                    self.buildTrees(subs.nodes, trees);\n                });\n            }\n        });\n    },\n\n    /*\n     * Load next question, updates state of the Application\n     * if next question is not found move to either SPLASH/SUBMIT\n     *\n     * Deals with branching, required and setting up dontknow footer state\n     * Uses refs! (Could be removed)\n     */\n    onNextButton: function() {\n        var self = this;\n        var surveyID = this.props.survey.id;\n        var currentState = this.state.state;\n        var currentQuestion = this.state.question;\n\n        // Set up next state\n        var nextQuestion = null;\n        var showDontKnow = false;\n        var showDontKnowBox = false;\n        var state = this.state.states.SPLASH;\n        var head = this.state.head;\n        var headStack = this.state.headStack;\n\n        console.log('Current Question', currentQuestion);\n\n        switch(currentState) {\n            // On Submit page and next was pressed\n            case this.state.states.SUBMIT:\n                nextQuestion = null;\n                showDontKnow = false;\n                showDontKnowBox = false;\n                state = this.state.states.SPLASH\n                //XXX Fire Modal for submitting here\n                this.onSave();\n\n                // Reset Survey Linked List\n                head = this.state.headStack[0] || head;\n                while(head.prev) {\n                    head = head.prev;\n                };\n                headStack = [];\n                break;\n\n            // On Splash page and next was pressed\n            case this.state.states.SPLASH:\n                nextQuestion = this.state.head;\n                showDontKnow = nextQuestion.allow_dont_know || false;\n                showDontKnowBox = false;\n                state = this.state.states.QUESTION\n\n                var questionID = nextQuestion.id;\n                if (showDontKnow) {\n                    var response = this.refs.footer.getAnswer(questionID);\n                    console.log('Footer response:', response);\n                    showDontKnowBox = Boolean(response);\n                }\n\n                break;\n\n            case this.state.states.QUESTION:\n                // Look into active answers, check if any filled out if question is REQUIRED\n                var required = currentQuestion.required || false;\n                if (required) {\n                    var questionID = currentQuestion.id;\n                    var survey = JSON.parse(localStorage[surveyID] || '{}');\n                    var answers = (survey[questionID] || []).filter(function(response) {\n                        return (response && response.response !== null);\n                    });\n\n                    if (!answers.length) {\n                        alert('Valid response is required.');\n                        return;\n                    }\n                }\n\n                // Get answer\n                var questionID = currentQuestion.id;\n                var survey = JSON.parse(localStorage[surveyID] || '{}');\n                var answers = (survey[questionID] || []).filter(function(response) {\n                    return (response && response.response !== null);\n                });\n\n                // XXX Confirm response type is answer (instead of dont-know/other)\n                var answer = answers.length && answers[0].response || null;\n                var sub_surveys = currentQuestion.sub_surveys;\n\n                // If has subsurveys then it can branch\n                if (sub_surveys) {\n                    console.log('Subsurveys:', currentQuestion.id, sub_surveys);\n                    console.log('Answer:', answer);\n\n                    // Check which subsurvey this answer buckets into\n                    var BREAK = false;\n                    sub_surveys.forEach(function(sub) {\n                        if (BREAK) {return;}\n                        console.log('Bucket:', sub.buckets, 'Type:', currentQuestion.type_constraint);\n\n                        // Append all subsurveys to clone of current question, update head, update headStack if in bucket\n                        var inBee = self.inBucket(sub.buckets, currentQuestion.type_constraint, answer);\n                        if (inBee) {\n                            // Clone current element\n                            var clone = self.cloneNode(currentQuestion);\n                            var temp = clone.next;\n\n                            // link sub nodes\n                            // TODO: Deal with repeatable flag here!\n                            // XXX: When adding repeat questions make sure to augment the question.id in a repeatable and unique way\n                            // XXX: QuestionIDs are used to distinguish/remember questions everywhere, do not reuse IDs!\n                            for (var i = 0; i < sub.nodes.length; i++) {\n                                if (i == 0) {\n                                    clone.next = sub.nodes[i];\n                                    sub.nodes[i].prev = clone;\n                                } else {\n                                    sub.nodes[i].prev = sub.nodes[i - 1];;\n                                }\n\n                                if (i === sub.nodes.length - 1) {\n                                    sub.nodes[i].next = temp;\n                                    if (temp)\n                                        temp.prev = sub.nodes[i];\n                                } else {\n                                    sub.nodes[i].next = sub.nodes[i + 1];\n                                }\n                            }\n\n                            // Always add branchable questions previous state into headStack\n                            // This is how we can revert alterations to a branched question\n                            headStack.push(currentQuestion);\n\n                            // Find the head\n                            var newHead = clone;\n                            while(newHead.prev) {\n                                newHead = newHead.prev;\n                            }\n                            head = newHead;\n\n                            // Set current question to CLONE always\n                            currentQuestion = clone;\n\n                            BREAK = true;// break\n                        }\n\n                    });\n\n                }\n\n                nextQuestion = currentQuestion.next;\n                state = this.state.states.QUESTION\n\n                // Set the state to SUBMIT when reach the end of questions\n                if (nextQuestion === null) {\n                    nextQuestion = currentQuestion; //Keep track of tail\n                    showDontKnow = false;\n                    showDontKnowBox = false;\n                    state = this.state.states.SUBMIT;\n                    break;\n                }\n\n                // Moving into a valid question\n                showDontKnow = nextQuestion.allow_dont_know || false;\n                showDontKnowBox = false;\n                var questionID = nextQuestion.id;\n\n                if (showDontKnow) {\n                    var response = this.refs.footer.getAnswer(questionID);\n                    console.log('Footer response:', response);\n                    showDontKnowBox = Boolean(response);\n                }\n\n                break;\n\n        }\n\n        this.setState({\n            question: nextQuestion,\n            showDontKnow: showDontKnow,\n            showDontKnowBox: showDontKnowBox,\n            head: head,\n            headStack: headStack,\n            state: state\n        })\n\n        return;\n\n    },\n\n    /*\n     * Load prev question, updates state of the Application\n     * if prev question is not found to SPLASH\n     */\n    onPrevButton: function() {\n        var self = this;\n        var surveyID = this.props.survey.id;\n        var currentState = this.state.state;\n        var currentQuestion = this.state.question;\n\n        // Set up next state\n        var nextQuestion = null;\n        var showDontKnow = false;\n        var showDontKnowBox = false;\n        var state = this.state.states.SPLASH;\n        var head = this.state.head;\n        var headStack = this.state.headStack;\n\n        switch(currentState) {\n            // On Submit page and prev was pressed\n            case this.state.states.SUBMIT:\n                nextQuestion = currentQuestion; // Tail was saved in current question\n\n                // Branching ONLY happens when moving BACK into branchable question\n                // Rare but can happen on question that either leads to submit or more questions\n                var sub_surveys = nextQuestion.sub_surveys;\n                if (sub_surveys && headStack.length) {\n                    // If he's in the branched stack, pop em off\n                    if (headStack[headStack.length - 1].id === nextQuestion.id) {\n                        console.log('RESETING', nextQuestion.id, headStack.length);\n                        // Reset the nextQuestion to previously unbranched state\n                        nextQuestion = headStack.pop();\n                        console.log('RESET', nextQuestion.id, headStack.length);\n                        // Find the head\n                        var newHead = nextQuestion;\n                        while(newHead.prev) {\n                            newHead = newHead.prev;\n                        }\n                        head = newHead;\n                    }\n                }\n\n\n                showDontKnow = currentQuestion.allow_dont_know || false;\n                showDontKnowBox = false;\n                state = this.state.states.QUESTION\n\n                var questionID = currentQuestion.id;\n                if (showDontKnow) {\n                    var response = this.refs.footer.getAnswer(questionID);\n                    console.log('Footer response:', response);\n                    showDontKnowBox = Boolean(response);\n                }\n                break;\n\n            // On Splash page and prev was pressed (IMPOSSIBLE)\n            case this.state.states.SPLASH:\n                nextQuestion = null;\n                showDontKnowBox = false;\n                showDontKnow = false;\n                state = this.state.states.SPLASH\n                break;\n\n            case this.state.states.QUESTION:\n                nextQuestion = currentQuestion.prev;\n                state = this.state.states.QUESTION\n\n                // Set the state to SUBMIT when reach the end of questions\n                if (nextQuestion === null) {\n                    nextQuestion = currentQuestion;\n                    showDontKnow = false;\n                    showDontKnowBox = false;\n                    state = this.state.states.SPLASH;\n                    break;\n                }\n\n                // Branching ONLY happens when moving BACK into branchable question\n                // ALWAYS undo branched state to maintain survey consitency\n                var sub_surveys = nextQuestion.sub_surveys;\n                if (sub_surveys && headStack.length) {\n                    // If he's in the branched stack, pop em off\n                    if (headStack[headStack.length - 1].id === nextQuestion.id) {\n                        console.log('RESETING', nextQuestion.id, headStack.length);\n                        // Reset the nextQuestion to previously unbranched state\n                        nextQuestion = headStack.pop();\n                        console.log('RESET', nextQuestion.id, headStack.length);\n                        // Find the head\n                        var newHead = nextQuestion;\n                        while(newHead.prev) {\n                            newHead = newHead.prev;\n                        }\n                        head = newHead;\n                    }\n                }\n\n\n                // Moving into a valid question\n                showDontKnow = nextQuestion.allow_dont_know || false;\n                showDontKnowBox = false;\n                var questionID = nextQuestion.id;\n\n                if (showDontKnow) {\n                    var response = this.refs.footer.getAnswer(questionID);\n                    console.log('Footer response:', response);\n                    showDontKnowBox = Boolean(response);\n                }\n\n                break;\n\n        }\n\n        this.setState({\n            question: nextQuestion,\n            showDontKnow: showDontKnow,\n            showDontKnowBox: showDontKnowBox,\n            head: head,\n            headStack: headStack,\n            state: state\n        })\n\n        return;\n\n    },\n\n    /*\n     * Check if response is in bucket\n     *\n     * @buckets: Array of buckets (can be ranges in [num,num) form or 'qid' for mc\n     * @type: type of bucket\n     * @resposne: answer to check if in bucket\n     */\n    inBucket: function(buckets, type, response) {\n        if (response === null)\n            return false;\n\n        switch(type) {\n            case 'integer':\n            case 'decimal':\n                var inBee = 1; // Innocent untill proven guilty\n                // Split bucket into four sections, confirm that value in range, otherwise set inBee to false\n                var BREAK = false;\n                buckets.forEach(function(bucket) {\n                    if (BREAK) {return;}\n                    inBee = 1;\n                    var left = bucket.split(',')[0];\n                    var right = bucket.split(',')[1];\n                    if (left[0] === '[') {\n                        var leftLim = parseFloat(left.split('[')[1]);\n                        console.log('Inclusive Left', leftLim);\n                        if (!isNaN(leftLim)) // Infinity doesnt need to be checked\n                            inBee &= (response >= leftLim);\n                    } else if (left[0] === '(') {\n                        var leftLim = parseFloat(left.split('(')[1]);\n                        console.log('Exclusive Left', leftLim);\n                        if (!isNaN(leftLim)) // Infinity doesnt need to be checked\n                            inBee &= (response > leftLim)\n                    } else {\n                        inBee = 0;\n                    }\n\n                    if (right[right.length - 1] === ']') {\n                        var rightLim = parseFloat(right.split(']')[0]);\n                        console.log('Inclusive Right', rightLim);\n                        if (!isNaN(rightLim)) // Infinity doesnt need to be checked\n                            inBee &= (response <= rightLim)\n                    } else if (right[right.length - 1] === ')') {\n                        var rightLim = parseFloat(right.split(')')[0]);\n                        console.log('Exclusive Right', rightLim);\n                        if (!isNaN(rightLim)) // Infinity doesnt need to be checked\n                            inBee &= (response < rightLim)\n                    } else {\n                        inBee = 0; // unknown\n                    }\n\n                    console.log('Bucket:', bucket, response, inBee);\n                    if (inBee) {\n                        BREAK = true; //break\n                    }\n\n                });\n\n                return inBee;\n\n\t    case 'timestamp': // TODO: We need moment.js for this to work properly\n            case 'date':\n                var inBee = 1; // Innocent untill proven guilty\n                response = new Date(response); // Convert to date object for comparisons\n                var BREAK = false;\n                buckets.forEach(function(bucket) {\n                    inBee = 1;\n                    if (BREAK) {return;}\n                    var left = bucket.split(',')[0];\n                    var right = bucket.split(',')[1];\n                    if (left[0] === '[') {\n                        console.log('Inclusive Left');\n                        var leftLim = new Date(left.split('[')[1].replace(/\\s/, 'T'));\n                        if (!isNaN(leftLim)) // Infinity doesnt need to be checked\n                            inBee &= (response >= leftLim);\n                    } else if (left[0] === '(') {\n                        console.log('Exclusive Left');\n                        var leftLim = new Date(left.split('(')[1].replace(/\\s/, 'T'));\n                        if (!isNaN(leftLim)) // Infinity doesnt need to be checked\n                            inBee &= (response > leftLim)\n                    } else {\n                        inBee = 0;\n                    }\n\n                    if (right[right.length - 1] === ']') {\n                        console.log('Inclusive Right');\n                        var rightLim = new Date(right.split(']')[0].replace(/\\s/, 'T'));\n                        if (!isNaN(rightLim)) // Infinity doesnt need to be checked\n                            inBee &= (response <= rightLim)\n                    } else if (right[right.length - 1] === ')') {\n                        console.log('Exclusive Right');\n                        var rightLim = new Date(right.split(')')[0].replace(/\\s/, 'T'));\n                        if (!isNaN(rightLim)) // Infinity doesnt need to be checked\n                            inBee &= (response < rightLim)\n                    } else {\n                        inBee = 0; // unknown\n                    }\n\n                    console.log('Bucket:', bucket, response, inBee);\n                    if (inBee) {\n                        BREAK = true; //break\n                    }\n\n                    return true;\n                });\n\n                return inBee;\n            case 'multiple_choice':\n                var inBee = 0;\n                buckets.forEach(function(bucket) {\n                    inBee |= (bucket === response);\n                    console.log('Bucket:', bucket, response, inBee);\n                });\n                return inBee;\n            default:\n                return false;\n\n        }\n    },\n\n    /*\n     * Clone linked list node, arrays don't need to be cloned, only next/prev ptrs\n     * @node: Current node to clone\n     * @ids: Dictionay reference of currently cloned nodes, prevents recursion going on forever\n     */\n    cloneNode: function(node, ids) {\n        var self = this;\n        var clone = {\n            next: null,\n            prev: null\n        };\n\n        ids = ids || {};\n\n        Object.keys(node).forEach(function(key) {\n            if (key != 'next' && key != 'prev') {\n                clone[key] = node[key]\n            }\n        });\n\n       // Mutable so next/prev pointers will be visible to all nodes that reference this dictionary\n       ids[node.id] = clone;\n\n       if (node.next) {\n           var next = ids[node.next.id];\n           clone.next = next || self.cloneNode(node.next, ids);\n       }\n\n       if (node.prev) {\n           var prev = ids[node.prev.id];\n           clone.prev = prev || self.cloneNode(node.prev, ids);\n       }\n\n        return clone;\n    },\n\n    /*\n     * Save active survey into unsynced array\n     */\n    onSave: function() {\n        var survey = JSON.parse(localStorage[this.props.survey.id] || '{}');\n        // Get all unsynced surveys\n        var unsynced_surveys = JSON.parse(localStorage['unsynced'] || '{}');\n        // Get array of unsynced submissions to this survey\n        var unsynced_submissions = unsynced_surveys[this.props.survey.id] || [];\n        // Get array of unsynced photo id's\n        var unsynced_photos = JSON.parse(localStorage['unsynced_photos'] || '[]');\n        // Get array of unsynced facilities\n        var unsynced_facilities = JSON.parse(localStorage['unsynced_facilities'] || '[]');\n\n        // Build new submission\n        var answers = [];\n        var self = this;\n\n        // Copy active questions into simple list;\n        var questions = [];\n        var head = this.state.head;\n        while(head) {\n            questions.push(head);\n            head = head.next;\n        }\n\n        questions.forEach(function(question) {\n            var responses = survey[question.id] || [];\n            responses.forEach(function(response) {\n                // Ignore empty responses\n                if (!response || response.response === null) {\n                    return true; // continue;\n                }\n\n                // Photos need to synced independantly from survey\n                if (question.type_constraint === 'photo') {\n                   unsynced_photos.push({\n                       'surveyID': self.props.survey.id,\n                       'photoID': response.response,\n                       'questionID': question.id\n                   });\n                }\n\n                // New facilities need to be stored seperatly from survey\n                if (question.type_constraint === 'facility') {\n                    if (response.metadata && response.metadata.is_new) {\n                        console.log('Facility:', response);\n                        self.state.trees[question.id]\n                            .addFacility(response.response.lat, response.response.lng, response.response);\n\n                        unsynced_facilities.push({\n                            'surveyID': self.props.survey.id,\n                            'facilityData': response.response,\n                            'questionID': question.id\n                        });\n                    }\n                }\n\n                answers.push({\n                    survey_node_id: question.id,\n                    response: response,\n                    type_constraint: question.type_constraint\n                });\n            });\n\n        });\n\n        // Don't record it if there are no answers, will mess up splash\n        if (answers.length === 0) {\n            return;\n        }\n\n        var submission = {\n            submitter_name: localStorage['submitter_name'] || 'anon',\n            submitter_email: localStorage['submitter_email'] || 'anon@anon.org',\n            submission_type: 'unauthenticated', //XXX\n            survey_id: this.props.survey.id,\n            answers: answers,\n            save_time: new Date().toISOString(),\n            submission_time: '' // For comparisions during submit ajax callback\n        }\n\n        console.log('Submission', submission);\n\n        // Record new submission into array\n        unsynced_submissions.push(submission);\n        unsynced_surveys[this.props.survey.id] = unsynced_submissions;\n        localStorage['unsynced'] = JSON.stringify(unsynced_surveys);\n\n        // Store photos\n        localStorage['unsynced_photos'] = JSON.stringify(unsynced_photos);\n\n        // Store facilities\n        localStorage['unsynced_facilities'] = JSON.stringify(unsynced_facilities);\n\n        // Wipe active survey\n        localStorage[this.props.survey.id] = JSON.stringify({});\n\n        // Wipe location info\n        localStorage['location'] = JSON.stringify({});\n\n    },\n\n    /*\n     * Loop through unsynced submissions for active survey and POST\n     * Only modifies localStorage on success\n     */\n    onSubmit: function() {\n        function getCookie(name) {\n            var r = document.cookie.match('\\\\b' + name + '=([^;]*)\\\\b');\n            return r ? r[1] : undefined;\n        }\n\n        var self = this;\n\n        // Get all unsynced surveys\n        var unsynced_surveys = JSON.parse(localStorage['unsynced'] || '{}');\n        // Get array of unsynced submissions to this survey\n        var unsynced_submissions = unsynced_surveys[this.props.survey.id] || [];\n        // Get all unsynced photos.\n        var unsynced_photos = JSON.parse(localStorage['unsynced_photos'] || '[]');\n        // Get all unsynced facilities\n        var unsynced_facilities = JSON.parse(localStorage['unsynced_facilities'] || '[]');\n\n        // Post surveys to Dokomoforms\n        unsynced_submissions.forEach(function(survey) {\n            // Update submit time\n            survey.submission_time = new Date().toISOString();\n            $.ajax({\n                url: '/api/v0/surveys/'+survey.survey_id+'/submit',\n                type: 'POST',\n                contentType: 'application/json',\n                processData: false,\n                data: JSON.stringify(survey),\n                headers: {\n                    'X-XSRFToken': getCookie('_xsrf')\n                },\n                dataType: 'json',\n                success: function(survey, anything, hey) {\n                    console.log('success', anything, hey);\n                    // Get all unsynced surveys\n                    var unsynced_surveys = JSON.parse(localStorage['unsynced'] || '{}');\n                    // Get array of unsynced submissions to this survey\n                    var unsynced_submissions = unsynced_surveys[survey.survey_id] || [];\n\n                    // Find unsynced_submission\n                    var idx = -1;\n                    unsynced_submissions.forEach(function(usurvey, i) {\n                        if (Date(usurvey.save_time) === Date(survey.save_time)) {\n                            idx = i;\n                        }\n                    });\n\n                    // Not sure what happened, do not update localStorage\n                    if (idx === -1)\n                        return;\n\n                    unsynced_submissions.splice(idx, 1);\n\n                    unsynced_surveys[survey.survey_id] = unsynced_submissions;\n                    localStorage['unsynced'] = JSON.stringify(unsynced_surveys);\n\n                    // Update splash page if still on it\n                    if (self.state.state === self.state.states.SPLASH)\n                        self.refs.splash.update();\n                },\n\n                error: function(err) {\n                    console.log('Failed to post survey', err, survey);\n                }\n            });\n\n            console.log('synced submission:', survey);\n            console.log('survey', '/api/v0/surveys/'+survey.survey_id+'/submit');\n        });\n\n        // Post photos to dokomoforms\n        unsynced_photos.forEach(function(photo, idx) {\n            if (photo.surveyID === self.props.survey.id) {\n                PhotoAPI.getBase64(self.state.db, photo.photoID, function(err, base64){\n                    $.ajax({\n                        url: '/api/v0/photos',\n                        type: 'POST',\n                        contentType: 'application/json',\n                        processData: false,\n                        data: JSON.stringify({\n                            'id' : photo.photoID,\n                            'mime_type': 'image/png',\n                            'image': base64\n                        }),\n                        headers: {\n                            'X-XSRFToken': getCookie('_xsrf')\n                        },\n                        dataType: 'json',\n                        success: function(photo) {\n                            console.log('Photo success:', photo);\n                            var unsynced_photos = JSON.parse(localStorage['unsynced_photos'] || '[]');\n                            // Find photo\n                            var idx = -1;\n                            unsynced_photos.forEach(function(uphoto, i) {\n                                if (uphoto.photoID === photo.id) {\n                                    idx = i;\n                                    PhotoAPI.removePhoto(self.state.db, uphoto.photoID, function(err, result) {\n                                        if (err) {\n                                            console.log('Couldnt remove from db:', err);\n                                            return;\n                                        }\n                                        console.log('Removed:', result);\n                                    });\n                                }\n                            });\n\n                            // What??\n                            if (idx === -1)\n                                return;\n\n                            console.log(idx, unsynced_photos.length);\n                            unsynced_photos.splice(idx, 1);\n\n                            localStorage['unsynced_photos'] = JSON.stringify(unsynced_photos);\n                        },\n\n                        error: function(err) {\n                            console.log('Failed to post photo:', err, photo);\n                        }\n                    });\n                });\n            }\n        });\n\n        // Post facilities to Revisit\n        unsynced_facilities.forEach(function(facility, idx) {\n            if (facility.surveyID === self.props.survey.id) {\n                self.state.trees[facility.questionID].postFacility(facility.facilityData,\n                    // Success\n                    function(revisitFacility) {\n                        console.log('Successfully posted facility', revisitFacility, facility);\n                        var unsynced_facilities = JSON.parse(localStorage['unsynced_facilities'] || '[]');\n\n                        // Find facility\n                        var idx = -1;\n                        console.log(idx, unsynced_facilities.length);\n                        unsynced_facilities.forEach(function(ufacility, i) {\n                            var ufacilityID = ufacility.facilityData.facility_id;\n                            var facilityID = facility.facilityData.facility_id;\n                            if (ufacilityID === facilityID) {\n                                idx = i;\n                            }\n                        });\n\n                        // What??\n                        if (idx === -1)\n                            return;\n\n                        console.log(idx, unsynced_facilities.length);\n                        unsynced_facilities.splice(idx, 1);\n\n                        localStorage['unsynced_facilities'] = JSON.stringify(unsynced_facilities);\n                    },\n\n                    // Error\n                    function(revisitFacility) {\n                        console.log('Failed to post facility', err, facility);\n                    }\n                );\n            }\n        });\n    },\n\n\n    /*\n     * Respond to don't know checkbox event, this is listend to by Application\n     * due to app needing to resize for the increased height of the don't know\n     * region\n     */\n    onCheckButton: function() {\n        this.setState({\n            showDontKnowBox: this.state.showDontKnowBox ? false: true,\n            showDontKnow: this.state.showDontKnow,\n        });\n\n        // Force questions to update\n        if (this.state.state = this.state.states.QUESTION)\n            this.refs.question.update();\n\n    },\n\n    /*\n     * Load the appropiate question based on the nextQuestion state\n     * Loads splash or submit content if state is either SPLASH/SUBMIT\n     */\n    getContent: function() {\n        var question = this.state.question;\n        var state = this.state.state;\n        var survey = this.props.survey;\n\n        if (state === this.state.states.QUESTION) {\n            var questionID = question.id;\n            var questionType = question.type_constraint;\n            switch(questionType) {\n                case 'multiple_choice':\n                    return (\n                            <MultipleChoice\n                                ref='question'\n                                key={questionID}\n                                question={question}\n                                questionType={questionType}\n                                language={survey.default_language}\n                                surveyID={survey.id}\n                                disabled={this.state.showDontKnowBox}\n                           />\n                       )\n                case 'photo':\n                    return (\n                            <Photo\n                                ref='question'\n                                key={questionID}\n                                question={question}\n                                questionType={questionType}\n                                language={survey.default_language}\n                                surveyID={survey.id}\n                                disabled={this.state.showDontKnowBox}\n                                db={this.state.db}\n                           />\n                       )\n\n                case 'location':\n                    return (\n                            <Location\n                                ref='question'\n                                key={questionID}\n                                question={question}\n                                questionType={questionType}\n                                language={survey.default_language}\n                                surveyID={survey.id}\n                                disabled={this.state.showDontKnowBox}\n                           />\n                       )\n                case 'facility':\n                    return (\n                            <Facility\n                                ref='question'\n                                key={questionID}\n                                question={question}\n                                questionType={questionType}\n                                language={survey.default_language}\n                                surveyID={survey.id}\n                                disabled={this.state.showDontKnowBox}\n                                db={this.state.db}\n                                tree={this.state.trees[questionID]}\n                           />\n                       )\n                case 'note':\n                    return (\n                            <Note\n                                ref='question'\n                                key={questionID}\n                                question={question}\n                                questionType={questionType}\n                                language={survey.default_language}\n                                surveyID={survey.id}\n                                disabled={this.state.showDontKnowBox}\n                           />\n                       )\n                default:\n                    return (\n                            <Question\n                                ref='question'\n                                key={questionID}\n                                question={question}\n                                questionType={questionType}\n                                language={survey.default_language}\n                                surveyID={survey.id}\n                                disabled={this.state.showDontKnowBox}\n                           />\n                       )\n            }\n        } else if (state === this.state.states.SUBMIT) {\n            return (\n                    <Submit\n                        ref='submit'\n                        surveyID={survey.id}\n                        language={survey.default_language}\n                    />\n                   )\n        } else {\n            return (\n                    <Splash\n                        ref='splash'\n                        surveyID={survey.id}\n                        surveyTitle={survey.title}\n                        language={survey.default_language}\n                        buttonFunction={this.onSubmit}\n                    />\n                   )\n        }\n    },\n\n    /*\n     * Load the appropiate title based on the question and state\n     */\n    getTitle: function() {\n        var survey = this.props.survey;\n        var question = this.state.question;\n        var state = this.state.state;\n\n        if (state === this.state.states.QUESTION) {\n            return question.title[survey.default_language]\n        } else if (state === this.state.states.SUBMIT) {\n            return 'Ready to Save?'\n        } else {\n            return survey.title[survey.default_language]\n        }\n    },\n\n    /*\n     * Load the appropiate 'hint' based on the question and state\n     */\n    getMessage: function() {\n        var survey = this.props.survey;\n        var question = this.state.question;\n        var state = this.state.state;\n\n        if (state === this.state.states.QUESTION) {\n            return question.hint[survey.default_language]\n        } else if (state === this.state.states.SUBMIT) {\n            return 'If youre satisfied with the answers to all the questions, you can save the survey now.'\n        } else {\n            return 'version ' + survey.version + ' | last updated ' + survey.last_updated_time;\n        }\n    },\n\n    /*\n     * Load the appropiate text in the Footer's button based on state\n     */\n    getButtonText: function() {\n        var state = this.state.state;\n        if (state === this.state.states.QUESTION) {\n            return 'Next Question';\n        } else if (state === this.state.states.SUBMIT) {\n            return 'Save Survey'\n        } else {\n            return 'Begin a New Survey'\n        }\n    },\n\n    render: function() {\n        var contentClasses = 'content';\n        var state = this.state.state;\n        var question = this.state.question;\n        var questionID = question && question.id || -1;\n        var surveyID = this.props.survey.id;\n\n        // Get current length of survey and question number\n        var number = -1;\n        var length = 0;\n        var head = this.state.head;\n        while(head) {\n            if (head.id === questionID) {\n                number = length;\n            }\n\n            head = head.next;\n            length++;\n        }\n\n\n        // Alter the height of content based on DontKnow state\n        if (this.state.showDontKnow)\n            contentClasses += ' content-shrunk';\n\n        if (this.state.showDontKnowBox)\n            contentClasses += ' content-shrunk content-super-shrunk';\n\n        return (\n                <div id='wrapper'>\n                    <Header\n                        ref='header'\n                        buttonFunction={this.onPrevButton}\n                        number={number + 1}\n                        total={length + 1}\n                        db={this.state.db}\n                        surveyID={surveyID}\n                        splash={state === this.state.states.SPLASH}/>\n                    <div\n                        className={contentClasses}>\n                        <Title title={this.getTitle()} message={this.getMessage()} />\n                        {this.getContent()}\n                    </div>\n                    <Footer\n                        ref='footer'\n                        showDontKnow={this.state.showDontKnow}\n                        showDontKnowBox={this.state.showDontKnowBox}\n                        buttonFunction={this.onNextButton}\n                        checkBoxFunction={this.onCheckButton}\n                        buttonType={state === this.state.states.QUESTION\n                            ? 'btn-primary': 'btn-positive'}\n                        buttonText={this.getButtonText()}\n                        questionID={questionID}\n                        surveyID={surveyID}\n                     />\n\n                </div>\n               );\n    }\n});\n\nmodule.exports = Application;","//XXX set globally on init in application\n//var config.revisit_url = 'http://localhost:3000/api/v0/facilities.json';\n\nvar $ = require('jquery'),\n    LZString = require('lz-string'),\n    Promise = require('mpromise'),\n    config = require('../conf/config');\n\n/*\n * FacilityTree class, contains accessors for facilities\n *\n * @nlat: north latitude\n * @slat: south latitude\n * @elng: east longitude\n * @wlng: west longitude\n *\n *\n * All underscore methods are helper methods to do the recursion\n */\nvar FacilityTree = function(nlat, wlng, slat, elng, db, id) {\n    // Ajax request made below node definition\n    var self = this;\n    this.nlat = nlat;\n    this.wlng = wlng;\n    this.slat = slat;\n    this.elng = elng;\n    this.db = db;\n    this.id = id;\n\n    /*\n     * FacilityNode class, node of the tree, knows how to access pouchDB to read compressed facilities\n     *\n     * @obj: JSON representation of the node\n     */\n    var facilityNode = function(obj) {\n\n        // Bounding Box\n        this.en = obj.en;\n        this.ws = obj.ws;\n\n        this.center = obj.center;\n        this.sep = obj.sep;\n\n        // Stats\n        this.uncompressedSize = obj.uncompressedSize || 0;\n        this.compressedSize = obj.compressedSize || 0;\n        this.count = obj.count || 0;\n\n        // Data\n        this.isRoot = obj.isRoot;\n        this.isLeaf = obj.isLeaf;\n        this.children = {};\n        if (this.isLeaf && obj.data) {\n            this.setFacilities(obj.data);\n        }\n\n        // Children\n        if (obj.children) {\n            if (obj.children.wn)\n                this.children.wn = new facilityNode(obj.children.wn);\n            if (obj.children.en)\n                this.children.en = new facilityNode(obj.children.en);\n            if (obj.children.ws)\n                this.children.ws = new facilityNode(obj.children.ws);\n            if (obj.children.es)\n                this.children.es = new facilityNode(obj.children.es);\n        }\n\n    };\n\n\n    facilityNode.prototype.print = function(indent) {\n        indent = indent || '';\n        var shift = '--';\n\n        console.log(indent + ' Node: ' + this.center[1], this.center[0], this.count);\n        if (this.children.wn && this.children.wn.count) {\n            console.log(indent + shift + ' NW');\n            this.children.wn.print(indent + shift);\n        }\n\n        if (this.children.en && this.children.en.count) {\n            console.log(indent + shift + ' NE');\n            this.children.en.print(indent + shift);\n        }\n\n        if (this.children.ws && this.children.ws.count) {\n            console.log(indent + shift + ' SW');\n            this.children.ws.print(indent + shift);\n        }\n\n        if (this.children.es && this.children.es.count)  {\n            console.log(indent + shift + ' SE');\n            this.children.es.print(indent + shift);\n        }\n\n        console.log(indent + '__');\n    };\n\n    /*\n     * Set the facilities array into pouchDB\n     *\n     * facilities is a compressed LZString16 bit representation of facilities contained in an one entry array\n     */\n    facilityNode.prototype.setFacilities = function(facilities) {\n        var id = this.en[1]+''+this.ws[0]+''+this.ws[1]+''+this.en[0];\n        // Upsert deals with put 409 conflict bs\n        db.upsert(id, function(doc) {\n            doc.facilities = facilities;\n            return doc;\n        })\n            .then(function () {\n                console.log('Set:', id);\n            }).catch(function (err) {\n                console.log('Failed to Set:', err);\n            });\n    };\n\n    /*\n     * Get facilities for this node\n     *\n     * returns mpromise style promise that will contain an array of uncompressed facilities\n     */\n    facilityNode.prototype.getFacilities = function() {\n        var id = this.en[1]+''+this.ws[0]+''+this.ws[1]+''+this.en[0];\n        var p = new Promise;\n        db.get(id).then(function(facilitiesDoc) {\n            console.log('Get:', id);\n            var facilitiesLZ = facilitiesDoc.facilities[0]; // Why an array? WHO KNOWS\n            var facilities = JSON.parse(LZString.decompressFromUTF16(facilitiesLZ));\n            p.fulfill(facilities);\n        }).catch(function (err) {\n            console.log('Failed to Get:', err);\n            p.reject();\n        });\n\n        return p;\n    };\n\n    facilityNode.prototype.within = function(lat, lng) {\n        var self = this;\n        return ((lat < self.en[1] && lat >= self.ws[1])\n               && (lng > self.ws[0] && lng <= self.en[0]));\n    };\n\n    facilityNode.prototype.crossesBound = function(nlat, wlng, slat, elng) {\n        var self = this;\n\n        if ((nlat < self.ws[1]) || (slat > self.en[1]))\n            return false;\n\n        if ((wlng > self.en[0]) || (elng < self.ws[0]))\n           return false;\n\n        return true;\n    };\n\n    facilityNode.prototype.distance = function(lat, lng) {\n        var self = this;\n        var R = 6371000; // metres\n        var e = self.center[1] * Math.PI/180;\n        var f = lat * Math.PI/180;\n        var g = (lat - self.center[1]) * Math.PI/180;\n        var h = (lng - self.center[0]) * Math.PI/180;\n\n        var a = Math.sin(g/2) * Math.sin(g/2) +\n                Math.cos(e) * Math.cos(f) *\n                Math.sin(h/2) * Math.sin(h/2);\n\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n        return R * c;\n    };\n\n    // Revisit ajax req\n    $.ajax({\n        url: config.revisit_url,\n        data: {\n            within: self.nlat + ',' + self.wlng + ',' + self.slat + ',' + self.elng,\n            compressed: 'anything can be here',\n            //fields: 'name,uuid,coordinates,properties:sector',\n        },\n        success: function(data) {\n            console.log('Recieved Data traversing');\n            self.total = data.total;\n            self.root = new facilityNode(data.facilities);\n            self.storeTree();\n        },\n        error: function() {\n            console.log('Failed to retrieve data, building from local');\n            var facilities = self.loadTree();\n            if (facilities)\n                self.root = new facilityNode(facilities);\n\n        }\n    });\n\n    console.log(config.revisit_url, '?within=',\n            self.nlat + ',' + self.wlng + ',' + self.slat + ',' + self.elng,\n            '&compressed');\n\n};\n\n/* Store facility tree in localStorage without children */\nFacilityTree.prototype.storeTree = function() {\n    // Data is never stored in object, stringifiying root should be sufficient\n    var facilities = JSON.parse(localStorage['facilities'] || '{}');\n    facilities[this.id] = this.root;\n    localStorage['facilities'] = JSON.stringify(facilities);\n};\n\n/* Load facility tree from localStorage */\nFacilityTree.prototype.loadTree = function() {\n    var facilities = JSON.parse(localStorage['facilities'] || '{}');\n    return facilities[this.id];\n};\n\n\nFacilityTree.prototype._getNNode = function(lat, lng, node) {\n    var self = this,\n        cnode;\n\n    // Maybe I'm a leaf?\n    if (node.isLeaf) {\n        return node;\n    }\n\n    if (node.count > 0) {\n        // NW\n        if (node.children.wn && node.children.wn.within(lat, lng)) {\n            cnode = self._getNNode(lat, lng, node.children.wn);\n            if (cnode)\n                return cnode;\n        }\n\n        // NE\n        if (node.children.en && node.children.en.within(lat, lng)) {\n            cnode = self._getNNode(lat, lng, node.children.en);\n            if (cnode)\n                return cnode;\n        }\n\n        // SW\n        if (node.children.ws && node.children.ws.within(lat, lng)) {\n            cnode = self._getNNode(lat, lng, node.children.ws);\n            if (cnode)\n                return cnode;\n        }\n\n        // SE\n        if (node.children.es && node.children.es.within(lat, lng)) {\n            cnode = self._getNNode(lat, lng, node.children.es);\n            if (cnode)\n                return cnode;\n        }\n    }\n};\n\n/*\n * Get Nearest node to lat, lng\n */\nFacilityTree.prototype.getNNode = function(lat, lng) {\n    var self = this;\n\n    if (!self.root.within(lat, lng))\n        return null;\n\n    var node = self._getNNode(lat, lng, self.root);\n    console.log('node: ', node.center[1], node.center[0], 'distance from center', node.distance(lat,lng));\n\n    return node;\n};\n\nFacilityTree.prototype._getRNodes = function(nlat, wlng, slat, elng, node) {\n    var self = this;\n\n    // Maybe I'm a leaf?\n    if (node.isLeaf) {\n        return [node];\n    }\n\n    var nodes = [];\n    if (node.count > 0) {\n        // NW\n        if (node.children.wn && node.children.wn.crossesBound(nlat, wlng, slat, elng)) {\n            nodes = nodes.concat(self._getRNodes(nlat, wlng, slat, elng, node.children.wn));\n        }\n\n        // NE\n        if (node.children.en && node.children.en.crossesBound(nlat, wlng, slat, elng)) {\n            nodes = nodes.concat(self._getRNodes(nlat, wlng, slat, elng, node.children.en));\n        }\n\n        // SW\n        if (node.children.ws && node.children.ws.crossesBound(nlat, wlng, slat, elng)) {\n            nodes = nodes.concat(self._getRNodes(nlat, wlng, slat, elng, node.children.ws));\n        }\n\n        // SE\n        if (node.children.es && node.children.es.crossesBound(nlat, wlng, slat, elng)) {\n            nodes = nodes.concat(self._getRNodes(nlat, wlng, slat, elng, node.children.es));\n        }\n    }\n\n    return nodes;\n};\n\n/*\n * Get all nodes that cross the box defined by nlat, wlng, slat, elng\n */\nFacilityTree.prototype.getRNodesBox = function(nlat, wlng, slat, elng) {\n    var self = this;\n\n    if (!self.root.crossesBound(nlat, wlng, slat, elng))\n        return null;\n\n    var nodes = self._getRNodes(nlat, wlng, slat, elng, self.root);\n    return nodes;\n};\n\n/*\n * Get all nodes that cross the circle defined by lat, lng and radius r\n */\nFacilityTree.prototype.getRNodesRad = function(lat, lng, r) {\n    var self = this;\n\n    var R = 6378137;\n    var dlat = r/R;\n    var dlng = r/(R*Math.cos(Math.PI*lat/180));\n\n    var nlat = lat + dlat * 180/Math.PI;\n    var wlng = lng - dlng * 180/Math.PI;\n    var slat = lat - dlat * 180/Math.PI;\n    var elng = lng + dlng * 180/Math.PI;\n\n    if (!self.root.crossesBound(nlat, wlng, slat, elng))\n        return null;\n\n    var nodes = self._getRNodes(nlat, wlng, slat, elng, self.root);\n    return nodes;\n};\n\n/*\n * Returns a promise with n nearest sorted facilities\n * pouchDB forces the async virus to spread to all getFacilities function calls :(\n *\n * XXX: Basically the only function that matters\n */\nFacilityTree.prototype.getNNearestFacilities = function(lat, lng, r, n) {\n    var self = this;\n    var p = new Promise; // Sorted facilities promise\n\n    // Calculates meter distance between facilities and center of node\n    function dist(coordinates, clat, clng) {\n        var lat = coordinates[1];\n        var lng = coordinates[0];\n\n        var R = 6371000;\n        var e = clat * Math.PI/180;\n        var f = lat * Math.PI/180;\n        var g = (lat - clat) * Math.PI/180;\n        var h = (lng - clng) * Math.PI/180;\n\n        var a = Math.sin(g/2) * Math.sin(g/2) +\n               Math.cos(e) * Math.cos(f) *\n               Math.sin(h/2) * Math.sin(h/2);\n\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n        return R * c;\n    }\n\n    // Sort X Nodes Data\n    var nodes = self.getRNodesRad(lat, lng, r);\n    var nodeFacilities = []; // Each Pouch promise writes into here\n    var nodeFacilitiesPromise = new Promise; //Pouch db retrival and sorting promise\n\n    // Merge X Nodes Sorted Data AFTER promise resolves (read this second)\n    nodeFacilitiesPromise.onResolve(function() {\n        var facilities = [];\n        while(n > 0 && nodeFacilities.length > 0) {\n            nodeFacilities = nodeFacilities.filter(function(facilities) {\n                return facilities.length;\n            });\n\n            var tops = [];\n            nodeFacilities.forEach(function(facilities, idx) {\n                tops.push({'fac': facilities[0], 'idx': idx});\n            });\n\n            tops.sort(function (nodeA, nodeB) {\n                var lengthA = dist(nodeA.fac.coordinates, lat, lng);\n                var lengthB = dist(nodeB.fac.coordinates, lat, lng);\n                return (lengthA - lengthB);\n            });\n\n            //XXX: Should terminate early if this is the case instead\n            if (tops.length > 0)\n                facilities.push(nodeFacilities[tops[0].idx].shift());\n\n            n--;\n        }\n\n        // Append distance to each facility\n        facilities.forEach(function(facility) {\n            facility.distance = dist(facility.coordinates, lat, lng);\n        });\n\n        return p.fulfill(facilities);\n    });\n\n    // Sort each nodes facilities (read this first)\n    nodes.forEach(function(node, idx) {\n        node.getFacilities().onResolve(function(err, facilities) {\n            facilities.sort(function (facilityA, facilityB) {\n                var lengthA = dist(facilityA.coordinates, lat, lng);\n                var lengthB = dist(facilityB.coordinates, lat, lng);\n                return (lengthA - lengthB);\n            });\n\n            nodeFacilities.push(facilities);\n            console.log('Current facilities length', nodeFacilities.length, nodes.length);\n            if (nodeFacilities.length === nodes.length) {\n                nodeFacilitiesPromise.fulfill();\n            }\n        });\n    });\n\n\n    return p;\n};\n\nFacilityTree.prototype.print = function() {\n    this.root.print();\n};\n\n\nFacilityTree.prototype._getLeaves = function(node) {\n    var self = this;\n\n    // Check if this is a leaf\n    if (node.isLeaf)\n        return [node];\n\n    // Otherwise check all children\n    var nodes = [];\n    if (node.count > 0) {\n        // NW\n        if (node.children.wn)\n            nodes = nodes.concat(self._getLeaves(node.children.wn));\n\n        // NE\n        if (node.children.en)\n            nodes = nodes.concat(self._getLeaves(node.children.en));\n\n        // SW\n        if (node.children.ws)\n            nodes = nodes.concat(self._getLeaves(node.children.ws));\n\n        // SE\n        if (node.children.es)\n            nodes = nodes.concat(self._getLeaves(node.children.es));\n    }\n\n    return nodes;\n};\n\n/*\n * Return all leaf nodes of the facility\n * ie. any node with isLeaf flag set to true\n */\nFacilityTree.prototype.getLeaves = function() {\n    var self = this;\n    return self._getLeaves(self.root);\n};\n\n/*\n * Helper method to calculate compressed size\n * (Sums up values in all leaves)\n */\nFacilityTree.prototype.getCompressedSize = function() {\n    var self = this;\n    var leaves = self._getLeaves(self.root);\n    return leaves.reduce(function(sum, node) {\n        return node.compressedSize + sum;\n    }, 0);\n};\n\n/*\n * Helper method to calculate uncompressed size\n * (Sums up values in all leaves)\n */\nFacilityTree.prototype.getUncompressedSize = function() {\n    var self = this;\n    var leaves = self._getLeaves(self.root);\n    return leaves.reduce(function(sum, node) {\n        return node.uncompressedSize + sum;\n    }, 0);\n};\n\n/*\n * Helper method to calculate total facility count\n * (Sums up values in all leaves)\n */\nFacilityTree.prototype.getCount = function() {\n    var self = this;\n    var leaves = self._getLeaves(self.root);\n    return leaves.reduce(function(sum, node) {\n        return node.count + sum;\n    }, 0);\n};\n\n/*\n * Helper method for transforming facility data into Revisit format\n *\n * @facilityData: Facility data in dokomoforms submission form\n */\nFacilityTree.prototype.formatFacility = function(facilityData) {\n    var facility = {};\n    facility.uuid = facilityData.facility_id;\n    facility.name = facilityData.facility_name;\n    facility.properties = {sector: facilityData.facility_sector};\n    facility.coordinates = [facilityData.lng, facilityData.lat];\n    return facility;\n};\n\n/*\n * Adds a facility to local copy of facilityTree\n *\n * @lat, lng: location to add facility\n * @facilityData: Facility information to add into tree\n * @formatted: if facilityData is already in correct format (will be converted if not set)\n */\nFacilityTree.prototype.addFacility = function(lat, lng, facilityData, formatted) {\n    var self = this;\n    var leaf = self.getNNode(lat, lng);\n\n    formatted = Boolean(formatted) || false;\n    console.log('formatted?', formatted);\n    var facility = formatted ? facilityData : self.formattedFacility(facilityData);\n\n    console.log('Before', leaf.count, leaf.uncompressedSize, leaf.compressedSize);\n    leaf.getFacilities().onResolve(function(err, facilities) {\n        if (err) {\n            console.log('Failed to add facility', err);\n            return;\n        }\n\n        console.log('Got facilities:', facilities.length);\n        facilities.push(facility);\n        var facilitiesStr = JSON.stringify(facilities);\n        var facilitiesLZ = [LZString.compressToUTF16(facilitiesStr)]; // mongoose_quadtree does this in [] for a reason i do not remember\n        leaf.setFacilities(facilitiesLZ);\n\n        leaf.count++;\n        leaf.uncompressedSize = facilitiesStr.length || 0;\n        leaf.compressedSize = facilitiesLZ.length || 0;\n        console.log('After', leaf.count, leaf.uncompressedSize, leaf.compressedSize);\n\n    });\n};\n\n/*\n * Post facility to Revisit\n *\n * @facilityData: Facility information to send to revisit\n * @successCB: What to do on succesful post\n * @errorCB: What to do on unsuccesful post\n * @formatted: if facilityData is already in correct format (will be converted if not set)\n */\nFacilityTree.prototype.postFacility = function(facilityData, successCB, errorCB, formatted) {\n    var self = this;\n\n    formatted = Boolean(formatted) || false;\n    console.log('formatted?', formatted);\n    var facility = formatted ? facilityData : self.formattedFacility(facilityData);\n\n    $.ajax({\n        url: config.revisit_url,\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify(facility),\n        processData: false,\n        dataType: 'json',\n        success: successCB,\n\n        headers: {\n            'Authorization': 'Basic ' + btoa('dokomoforms' + ':' + 'password')\n             //XXX Obsecure basic auth in bundlejs somehow? Force https after?\n        },\n\n        error: errorCB,\n    });\n};\n\n/*\n * Compute lat lng distance from center {lat, lng}\n *\n * XXX function is copied in a few places with mild alterations, prob should be merged\n */\nFacilityTree.prototype.distance = function(lat, lng, center) {\n    var self = this;\n    var R = 6371000; // metres\n    var e = center.lat * Math.PI/180;\n    var f = lat * Math.PI/180;\n    var g = (lat - center.lat) * Math.PI/180;\n    var h = (lng - center.lng) * Math.PI/180;\n\n    var a = Math.sin(g/2) * Math.sin(g/2) +\n            Math.cos(e) * Math.cos(f) *\n            Math.sin(h/2) * Math.sin(h/2);\n\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n    return R * c;\n};\n\n//Nigeria\n//var nlat = 8;\n//var wlng = -8;\n//var slat = -22;\n//var elng = 40;\n\n// NYC\n//var nlat = 85;\n//var wlng = -72;\n//var slat = -85\n//var elng = -74;\n\n// World\n//var nlat = 85;\n//var wlng = -180;\n//var slat = -85;\n//var elng = 180;\n\n//window.tree = tree;\n//var tree = new FacilityTree(nlat, wlng, slat, elng);\n//var nyc = {lat: 40.80690, lng:-73.96536}\n//window.nyc = nyc;\n\n//tree.getCompressedSize() / 1048576\n//tree.getNNearestFacilities(7.353078, 5.118915, 500, 10)\n//tree.getNNearestFacilities(40.80690, -73.96536, 500, 10)\n//tree.getCompressedSize()/tree.getUncompressedSize()\n//tree.getRNodesRad(40.80690, -73.96536, 500)\n\nmodule.exports = FacilityTree;\n","module.exports = {\n    /*\n     * Get photo with uuid, id from pouchDB as data URI\n     */\n    getPhoto: function(db, id, callback) {\n        db.getAttachment(id, 'photo').then(function(photo) {\n            callback(null, URL.createObjectURL(photo));\n        }).catch(function(err) {\n            callback(err);\n        });\n    },\n\n    /*\n     * Get photo with uuid, id from pouchDB as base64 string\n     */\n    getBase64: function(db, id, callback) {\n        db.getAttachment(id, 'photo').then(function(photoBlob) {\n            var reader = new window.FileReader();\n            reader.readAsDataURL(photoBlob);\n            reader.onloadend = function() {\n                var photoURI = reader.result;\n                var photo64 = photoURI.substring(photoURI.indexOf(',')+1);\n                callback(null, photo64);\n            };\n        }).catch(function(err) {\n            callback(err);\n        });\n    },\n\n    /*\n     * Get photo with uuid, id from pouchDB as blob\n     */\n    getBlob: function(db, id, callback) {\n        db.getAttachment(id, 'photo').then(function(photo) {\n            callback(null, photo);\n        }).catch(function(err) {\n            callback(err);\n        });\n    },\n\n    /*\n     * Remove photo with uuid, id from pouchDB\n     */\n    removePhoto: function(db, photoID, callback) {\n        db.get(photoID).then(function (photoDoc) {\n            db.removeAttachment(photoID, 'photo', photoDoc._rev)\n                .then(function(result) {\n                    db.remove(photoID, result.rev);\n                    callback(null, result);\n                }).catch(function(err) {\n                    callback(err);\n                });\n        });\n    },\n\n    /*\n     * Add photo with given uuid and base64 URI to pouchDB\n     * TODO set up callback\n     */\n    addPhoto: function(db, photoID, photo, callback) {\n        var photo64 = photo.substring(photo.indexOf(',')+1);\n        console.log(photo);\n        console.log(photoID);\n        db.put({\n            '_id': photoID,\n            '_attachments': {\n                'photo': {\n                    'content_type': 'image/png',\n                    'data': photo64\n                }\n            }\n        });\n\n    }\n\n};\n\n","var React = require('react');\nvar Promise = require('mpromise');\n\nvar ResponseField = require('./baseComponents/ResponseField.js');\nvar LittleButton = require('./baseComponents/LittleButton.js');\n\nvar FacilityRadios = require('./baseComponents/FacilityRadios.js');\nvar Select = require('./baseComponents/Select.js');\n\n/*\n * Facilities question component\n *\n * props:\n *     @question: node object from survey\n *     @questionType: type constraint\n *     @language: current survey language\n *     @surveyID: current survey id\n *     @disabled: boolean for disabling all inputs\n *     @db: pouchdb database\n *     @tree: Facility Tree object\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        var answer = this.getAnswer();\n        var selectOff = answer && answer.metadata && answer.metadata.is_new;\n        return {\n            loc: null,\n            selectFacility: !selectOff,\n            facilities: [],\n            choices: [\n                {'value': 'water', 'text': 'Water'},\n                {'value': 'energy', 'text': 'Energy'},\n                {'value': 'education', 'text': 'Education'},\n                {'value': 'health', 'text': 'Health'}\n            ]\n        };\n    },\n\n    /*\n     * Deal with async call to getFacilities\n     */\n    componentWillMount: function() {\n        var loc = JSON.parse(localStorage['location'] || '{}');\n        var self = this;\n        self.getFacilities(loc).onResolve(function(err, facilities) {\n            self.setState({\n                loc: loc,\n                facilities: facilities\n            });\n        });\n    },\n    /*\n     * Hack to force react to update child components\n     * Gets called by parent element through 'refs' when state of something changed\n     * (usually localStorage)\n     */\n    update: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n        this.setState({\n            questionCount: length\n        });\n    },\n\n    /*\n     * Switch view to new Facility View\n     */\n    toggleAddFacility: function() {\n        this.setState({\n            selectFacility : this.state.selectFacility ? false : true\n        });\n    },\n\n    /*\n     * Record newly chosen facility into localStorage\n     *\n     * @option: The facility uuid chosen\n     * @data: I have no idea why i have this?\n     */\n    selectFacility: function(option, data) {\n        console.log(\"Selected facility\");\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        answers = [];\n\n        this.state.facilities.forEach(function(facility) {\n            if (facility.uuid === option) {\n                answers = [{\n                    'response': {\n                        'facility_id': facility.uuid,\n                        'facility_name': facility.name,\n                        'facility_sector': facility.properties.sector,\n                        'lat': facility.coordinates[1],\n                        'lng': facility.coordinates[0]\n                    },\n                    'response_type': 'answer'\n                }];\n                return false;\n            }\n            return true;\n        });\n\n        survey[this.props.question.id] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n    },\n\n    /*\n     * Query the tree for nearby facilities near given location when possible\n     *\n     * @loc: The location ({lat: NUM, lng: NUM}) to query around\n     */\n    getFacilities: function(loc) {\n        if (!loc || !loc.lat || !loc.lng || !this.props.tree || !this.props.tree.root) {\n            var p = new Promise;\n            p.fulfill([]);\n            return p;\n        }\n\n        console.log(\"Getting facilities ...\");\n        return this.props.tree.getNNearestFacilities(loc.lat, loc.lng, 1000, 10);\n    },\n\n    /*\n     * Get response from localStorage\n     */\n    getAnswer: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        console.log(\"Selected facility\", answers[0]);\n        if (answers[0]) return answers[0];\n    },\n\n    /*\n     * Generate objectID compatitable with Mongo for the Revisit API\n     *\n     * Returns an objectID string\n     */\n    createObjectID: function() {\n        return 'xxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[x]/g, function() {\n            var r = Math.random()*16|0;\n            return r.toString(16);\n        });\n    },\n\n    /*\n     * Deal with all new facility input fields, type is bound to function call\n     *\n     * @type: Type of input that was updated\n     * @value: newly supplied input\n     */\n    onInput: function(type, value) {\n        console.log(\"Dealing with input\", value, type);\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var self = this;\n        if (answers[0] && (!answers[0].metadata || !answers[0].metadata.is_new)) {\n            answers = [];\n        }\n\n        // Load up previous response, update values\n        var response = (answers[0] && answers[0].response) || {};\n        var uuid = response.facility_id || this.createObjectID();\n        response.facility_id = uuid;\n        // XXX This kind of assumes that current lat/lng is correct at the time of last field update\n        response.lat = this.state.loc.lat;\n        response.lng = this.state.loc.lng;\n\n        switch(type) {\n            case 'text':\n                response.facility_name = value;\n                break;\n            case 'select':\n                var v = value[0]; // Only one ever\n                console.log('Selected v', v);\n                response.facility_sector = v;\n                break;\n            case 'other':\n                console.log('Other v', value);\n                response.facility_sector = value;\n                break;\n        }\n\n        //XXX Failed validation messes up facility question\n        //TODO: Properly handle null values\n\n        answers = [{\n            'response': response,\n            'response_type': 'answer',\n            'metadata': {\n                'is_new': true\n            }\n        }];\n\n        console.log(\"Built response\", answers);\n\n        survey[this.props.question.id] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n    },\n\n\n    /*\n     * Retrieve location and record into state on success.\n     */\n    onLocate: function() {\n        var self = this;\n        navigator.geolocation.getCurrentPosition(\n            function success(position) {\n                var loc = {\n                    'lat': position.coords.latitude,\n                    'lng': position.coords.longitude,\n                }\n\n                // Record location for survey\n                localStorage['location'] = JSON.stringify(loc);\n\n                self.getFacilities(loc).onResolve(function(err, facilities) {\n                    self.setState({\n                        loc: loc,\n                        facilities: facilities\n                    });\n                });\n            },\n\n            function error() {\n                console.log(\"Location could not be grabbed\");\n            },\n\n            {\n                enableHighAccuracy: true,\n                timeout: 20000,\n                maximumAge: 0\n            }\n        );\n\n\n    },\n\n    render: function() {\n        // Retrieve respone for initValues\n        var answer = this.getAnswer();\n        var choiceOptions = this.state.choices.map(function(choice) { return choice.value });\n\n        var hasLocation = this.state.loc && this.state.loc.lat && this.state.loc.lng;\n        var isNew = answer && answer.metadata && answer.metadata.is_new;\n\n        // Update sector field to match initSelect expected value\n        var sector = answer && answer.response.facility_sector;\n        var isOther = choiceOptions.indexOf(sector) === -1;\n        sector = isOther ? sector && 'other' : sector;\n\n        return (\n                <span>\n                {this.state.selectFacility ?\n                    <span>\n                    <LittleButton buttonFunction={this.onLocate}\n                        icon={'icon-star'}\n                        text={'find my location and show nearby facilities'}\n                        disabled={this.props.disabled}\n                    />\n\n                    <FacilityRadios\n                        key={this.props.disabled}\n                        selectFunction={this.selectFacility}\n                        facilities={this.state.facilities}\n                        initValue={answer && !isNew && answer.response.facility_id}\n                        disabled={this.props.disabled}\n                    />\n\n                    { hasLocation  ?\n                        <LittleButton buttonFunction={this.toggleAddFacility}\n                            disabled={this.props.disabled}\n                            text={'add new facility'}\n                        />\n                        : null\n                    }\n                    </span>\n                :\n                    <span>\n                    <ResponseField\n                        onInput={this.onInput.bind(null, 'text')}\n                        initValue={isNew && answer.response.facility_name}\n                        type={'text'}\n                        disabled={this.props.disabled}\n                    />\n                    <ResponseField\n                        initValue={JSON.stringify(this.state.loc)}\n                        type={'location'}\n                        disabled={true}\n                    />\n                    <Select\n                        choices={this.state.choices}\n                        initValue={isNew && isOther ? answer.response.facility_sector : null}\n                        initSelect={isNew && [sector]}\n                        withOther={true}\n                        multiSelect={false}\n                        onInput={this.onInput.bind(null, 'other')}\n                        onSelect={this.onInput.bind(null, 'select')}\n                        disabled={this.props.disabled}\n                    />\n\n                    <LittleButton\n                        buttonFunction={this.toggleAddFacility}\n                            text={'cancel'}\n                            disabled={this.props.disabled}\n                     />\n\n                    </span>\n                }\n                </span>\n               )\n    }\n});\n","var React = require('react'); \nvar BigButton = require('./baseComponents/BigButton.js');\nvar DontKnow = require('./baseComponents/DontKnow.js');\nvar ResponseField = require('./baseComponents/ResponseField.js'); \n\n/*\n * Footer component\n * Render footer containing a button and possible DontKnow component\n *\n * props:\n *  @showDontKnow: Boolean to activate DontKnow component\n *  @checkBoxFunction: What do on DontKnow component click event\n *  @buttonText: Text to show on big button\n *  @buttonType: Type of big button to render\n *  @showDontKnowBox: Boolean to extend footer and show input field\n *  @questionID: id of active question (if any)\n *  @surveyID: id of active survey\n */\nmodule.exports = React.createClass({\n    getDontKnow: function() {\n        if (this.props.showDontKnow)\n            return (<DontKnow \n                        checkBoxFunction={this.onCheck} \n                        key={this.props.questionID}\n                        checked={this.props.showDontKnowBox}\n                    />)\n\n        return null;\n    },\n\n    /*\n     * Record new response into localStorage, response has been validated\n     * if this callback is fired \n     */\n    onInput: function(value, index) {\n\n        console.log(\"Hey\", index, value);\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n\n        answers = [{\n            'response': value, \n            'response_type': 'dont_know'\n        }];\n\n        survey[this.props.questionID] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n    },\n\n    /*\n     * Clear localStorage when dont know is checked\n     * Call checkBoxFunction if supplied\n     *\n     * @event: click event on checkbox\n     */ \n    onCheck: function(event) {\n        // Clear responses\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        survey[this.props.questionID] = [];\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n        if (this.props.checkBoxFunction) {\n            this.props.checkBoxFunction(event);\n        }\n    },\n\n    /*\n     * Get default value for an input at a given index from localStorage\n     */\n    getAnswer: function(questionID) {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[questionID] || [];\n        return answers[0] && answers[0].response_type === 'dont_know' && answers[0].response || null;\n    },\n\n\n    render: function() {\n        var FooterClasses = \"bar bar-standard bar-footer\";\n        if (this.props.showDontKnow) \n            FooterClasses += \" bar-footer-extended\";\n        if (this.props.showDontKnowBox) \n            FooterClasses += \" bar-footer-extended bar-footer-super-extended\";\n\n        var self = this;\n        return (\n                <div className={FooterClasses}>\n                    <BigButton text={this.props.buttonText} \n                    type={this.props.buttonType}\n                    buttonFunction={this.props.buttonFunction} />\n                    { this.getDontKnow() }\n                    { this.props.showDontKnowBox ? \n                        <ResponseField \n                                index={0}\n                                onInput={self.onInput}\n                                initValue={self.getAnswer(self.props.questionID)} \n                                type={'text'}\n                        /> \n                    : null}\n                </div>\n               )\n    }\n});\n\n","var React = require('react');\nvar Menu = require('./baseComponents/Menu.js');\n\n/*\n * Header component\n * Displays the top bar of the Application, includes hambaagah menu\n *\n * props:\n *  @splash: Boolean to render splash header instead of the default\n *  @buttonFunction: What to do on previous button click\n *  @number: Current number to render in header\n *  @db: Active pouch db // XXX rather not pass this to header\n *  @surveyID: active surveyID\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        return { showMenu: false }\n    },\n\n    onClick: function() {\n        this.setState({showMenu: this.state.showMenu ? false : true })\n    },\n\n    render: function() {\n        var headerClasses = \"bar bar-nav bar-padded noselect\";\n        if (this.state.showMenu) \n            headerClasses += \" title-extended\";\n\n        return (\n            <header className={headerClasses}>\n            {this.props.splash ?\n                <h1 className=\"title align-left\">independant</h1>\n             :   \n                <span>\n                <button onClick={this.props.buttonFunction}\n                    className=\"btn btn-link btn-nav pull-left page_nav__prev\">\n                    <span className=\"icon icon-left-nav\"></span> <span className=\"\">Previous</span>\n                </button>\n                <h1 className=\"title\">{this.props.number} / {this.props.total}</h1>\n                </span>\n            }\n\n            <a className=\"icon icon-bars pull-right menu\" onClick = {this.onClick} ></a>\n\n            { this.state.showMenu ? <Menu surveyID={this.props.surveyID} db={this.props.db}/> : null }\n            </header>\n        )\n    }\n\n});\n\n","var React = require('react');\n\nvar ResponseField = require('./baseComponents/ResponseField.js');\nvar LittleButton = require('./baseComponents/LittleButton.js');\n\n/*\n * Location question component\n *\n * props:\n *     @question: node object from survey\n *     @questionType: type constraint\n *     @language: current survey language\n *     @surveyID: current survey id\n *     @disabled: boolean for disabling all inputs\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n\n        return { \n            questionCount: length,\n        }\n    },\n\n    /*\n     * Hack to force react to update child components\n     * Gets called by parent element through 'refs' when state of something changed \n     * (usually localStorage)\n     */\n    update: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n        this.setState({\n            questionCount: length,\n        });\n    },\n\n    /*\n     * Add new input if and only if they've responded to all previous inputs\n     */\n    addNewInput: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length;\n\n        console.log(\"Length:\", length, \"Count\", this.state.questionCount);\n        if (answers[length] && answers[length].response_type\n                || length > 0 && length == this.state.questionCount) {\n\n            this.setState({\n                questionCount: this.state.questionCount + 1\n            })\n        }\n    },\n\n    /*\n     * Remove input and update localStorage\n     */\n    removeInput: function(index) {\n        console.log(\"Remove\", index);\n\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length;\n\n        answers.splice(index, 1);\n        survey[this.props.question.id] = answers;\n\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n\n        var count = this.state.questionCount;\n        if (this.state.questionCount > 1)\n            count = count - 1;\n\n        this.setState({\n            questionCount: count\n        })\n\n        this.forceUpdate();\n    },\n\n    /*\n     * Retrieve location and record into localStorage on success.\n     * Updates questionCount on success, triggering rerender of page\n     * causing input fields to have values reloaded.\n     *\n     * Only updates the LAST active input field.\n     */\n    onLocate: function() {\n        var self = this;\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var index = answers.length === 0 ? 0 : this.refs[answers.length] ? answers.length : answers.length - 1; // So sorry\n\n        navigator.geolocation.getCurrentPosition(\n            function success(position) {\n                var loc = {\n                    'lat': position.coords.latitude,\n                    'lng': position.coords.longitude, \n                }\n\n                // Record location for survey\n                localStorage['location'] = JSON.stringify(loc);\n\n                answers[index] = {\n                    'response': loc, \n                    'response_type': 'answer'\n                };\n\n                survey[self.props.question.id] = answers; // Update localstorage\n                localStorage[self.props.surveyID] = JSON.stringify(survey);\n\n                var length = answers.length === 0 ? 1 : answers.length;\n                self.setState({\n                    questionCount: length\n                });\n            }, \n            \n            function error() {\n                console.log(\"Location could not be grabbed\");\n            }, \n            \n            {\n                enableHighAccuracy: true,\n                timeout: 20000,\n                maximumAge: 0\n            }\n        );\n\n\n    },\n\n    /*\n     * Get default value for an input at a given index from localStorage\n     *\n     * @index: The location in the answer array in localStorage to search\n     */\n    getAnswer: function(index) {\n        console.log(\"In:\", index);\n\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n\n        console.log(answers, index);\n        return answers[index] && JSON.stringify(answers[index].response) || null;\n    },\n\n    render: function() {\n        var children = Array.apply(null, {length: this.state.questionCount})\n        var self = this;\n        return (\n                <span>\n                <LittleButton \n                    buttonFunction={this.onLocate}\n                    iconClass={'icon-star'}\n                    text={'find my location'} \n                />\n                {children.map(function(child, idx) {\n                    return (\n                            <ResponseField \n                                buttonFunction={self.removeInput}\n                                type={self.props.questionType}\n                                key={Math.random()} \n                                index={idx} \n                                ref={idx}\n                                disabled={true}\n                                initValue={self.getAnswer(idx)} \n                                showMinus={true}\n                            />\n                           )\n                })}\n                {this.props.question.allow_multiple\n                    ? <LittleButton buttonFunction={this.addNewInput}\n                        disabled={this.props.disabled}\n                        text={'add another answer'} />\n                    : null \n                }\n                </span>\n               )\n    }\n});\n","var React = require('react');\nvar Select = require('./baseComponents/Select.js');\n\n/*\n * Multiple choice question component\n *\n * props:\n *     @question: node object from survey\n *     @questionType: type constraint\n *     @language: current survey language\n *     @surveyID: current survey id\n *     @disabled: boolean for disabling all inputs\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        return { \n        }\n    },\n\n    /*\n     * Hack to force react to update child components\n     * Gets called by parent element through 'refs' when state of something changed \n     * (usually localStorage)\n     */\n    update: function() {\n    },\n\n    /*\n     * Record all selected options into localStorage\n     */\n    onSelect: function(values) {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        answers = [];\n        values.forEach(function(value, index) {\n            if (value == 'null')\n                return;\n            answers.push({\n                'response': value === 'other' ? '' : value, \n                'response_type': value === 'other' ? 'other' : 'answer'\n            });\n        });\n\n        console.log(\"values\", values, answers)\n        survey[this.props.question.id] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n    },\n\n    /*\n     * Record other response into existing slot of answer object in localStorage\n     * Callback is only called on validated input\n     */\n    onInput: function(value) {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n\n        answers.forEach(function(answer, index) {\n            if (answer.response_type === 'other') {\n                answer.response = value;\n                return false;\n            }\n            return true;\n        });\n\n        survey[this.props.question.id] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n    },\n\n    /*\n     * Get all selected options from localStorage\n     */\n    getSelection: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n\n        var values = [];\n        answers.forEach(function(answer, index) {\n            values[index] = answer.response;\n            if (answer.response_type === 'other')\n                values[index] = 'other';\n        });\n\n        console.log(\"values\", values)\n        return values;\n    },\n\n    /*\n     * Get other response if any from localStorage \n     */\n    getAnswer: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n\n        var response = null;\n        answers.forEach(function(answer, index) {\n            if (answer.response_type === 'other') {\n                response = answer.response;\n                return false;\n            }\n\n            return true;\n        });\n\n        console.log(\"response\", response);\n        return response;\n    },\n    \n    render: function() {\n        var self = this;\n        var choices = this.props.question.choices.map(function(choice) {\n            return { \n                'value': choice.choice_id, \n                'text': choice.choice_text[self.props.language] \n            }\n        });\n\n        // Key is used as hack to rerender select on dontKnow state change\n        return (<Select \n                    key={this.props.disabled}\n                    choices={choices}\n                    withOther={this.props.question.allow_other}\n                    multiSelect={this.props.question.allow_multiple}\n                    disabled={this.props.disabled}\n                    initValue={this.getAnswer()} \n                    initSelect={this.getSelection()} \n                    onSelect={this.onSelect}\n                    onInput={this.onInput}\n                />)\n    }\n});\n","var React = require('react');\n\n/*\n * Note component\n *\n * props:\n *     @question: node object from survey\n *     @questionType: type constraint\n *     @language: current survey language\n *     @surveyID: current survey id\n */\nmodule.exports = React.createClass({\n    // Every question component needs this method\n    update: function() {\n    },\n\n    render: function() {\n        return (\n                <span></span>\n               )\n    }\n});\n","var React = require('react'),\n    PhotoField = require('./baseComponents/PhotoField'),\n    LittleButton = require('./baseComponents/LittleButton'),\n    PhotoAPI = require('../api/PhotoAPI'),\n    uuid = require('node-uuid');\n\n//XXX use this: navigator.vibrate(50);\n\n/*\n * Location question component\n *\n * props:\n *     @question: node object from survey\n *     @questionType: type constraint\n *     @language: current survey language\n *     @surveyID: current survey id\n *     @disabled: boolean for disabling all inputs\n *     @db: pouchdb database\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length ? answers.length : 1;\n\n        var camera = null;\n        var src = null;\n\n        return {\n            questionCount: length,\n            requested: false,\n            camera: camera,\n            photos: [],\n            src: src\n        };\n    },\n\n    // This is how you react to the render call back. Once video is mounted I can attach a source\n    // and re-render the page with it using the autoPlay feature. No DOM manipulation required!!\n    componentDidMount: function() {\n        this.getStream();\n        this.getPhotos();\n    },\n\n    componentWillMount: function() {\n    },\n\n    getStream: function() {\n        var self = this;\n        // Browser implementations\n        navigator.getUserMedia = navigator.getUserMedia ||\n            navigator.webkitGetUserMedia ||\n            navigator.mozGetUserMedia ||\n            navigator.msGetUserMedia;\n\n        navigator.getUserMedia ({\n            video: {optional: [{sourceId: self.state.camera}]}\n        }, function(stream) {\n            var src = window.URL.createObjectURL(stream);\n            console.log(src);\n            self.setState({\n                src: src\n            });\n        }, function(err) {\n            console.log(\"Video failed:\", err);\n        });\n\n    },\n\n    /*\n     * Get default value for an input at a given index from localStorage\n     * Use this value to query pouchDB and update state asynchronously\n     */\n    getPhotos: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var self = this;\n\n        answers.forEach(function(answer, idx) {\n            PhotoAPI.getPhoto(self.props.db, answer.response, function(err, photo) {\n                if (err) {\n                    console.log(\"DB query failed:\", err);\n                    return;\n                }\n\n                self.state.photos[idx] = photo;\n                self.setState({\n                    photos: self.state.photos\n                });\n            });\n        });\n    },\n\n    /*\n     * Hack to force react to update child components\n     * Gets called by parent element through 'refs' when state of something changed\n     * (usually localStorage)\n     */\n    update: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length;\n        this.setState({\n            questionCount: length,\n        });\n    },\n\n    /*\n     * Add new input if and only if they've responded to all previous inputs\n     */\n    addNewInput: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length;\n\n        console.log(\"Length:\", length, \"Count\", this.state.questionCount);\n        if (answers[length] && answers[length].response_type\n                || length > 0 && length == this.state.questionCount) {\n\n            this.setState({\n                questionCount: this.state.questionCount + 1\n            })\n        }\n    },\n\n    /*\n     * Remove input and update localStorage\n     */\n    removeInput: function(index) {\n        console.log(\"Remove\", index);\n\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length;\n        var photoID = answers[index] && answers[index].response || 0;\n        var self = this;\n\n        // Removing an empty input\n        if (photoID === 0) {\n            return;\n        }\n\n        // Remove from localStorage;\n        answers.splice(index, 1);\n        survey[this.props.question.id] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n        // Remove from pouchDB\n        console.log(\"removing\", photoID);\n        this.state.photos.splice(index, 1);\n        PhotoAPI.removePhoto(this.props.db, photoID, function(err, result) {\n            if (err) {\n                console.log(\"Could not remove attachment?:\", err);\n                return;\n            }\n            console.log(\"Removed attachement:\", result);\n        });\n\n        var count = this.state.questionCount - 1;\n        count = count ? count : 1;\n        this.setState({\n            photos: this.state.photos,\n            questionCount: count\n        })\n    },\n\n    /*\n     * Retrieve location and record into localStorage on success.\n     * Updates questionCount on success, triggering rerender of page\n     * causing input fields to have values reloaded.\n     *\n     * Only updates the LAST active input field.\n     */\n    onCapture: function() {\n        var self = this;\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var index = answers.length === 0 ? 0 : this.refs[answers.length] ? answers.length : answers.length - 1; // So sorry\n\n        // Capture still from video element and write into new canvas\n        //XXX Delete canvas? canvas;\n        var canvas = document.createElement('canvas');\n        var video = React.findDOMNode(this.refs.video);\n        canvas.height = video.clientHeight;\n        canvas.width = video.clientWidth;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n        // Extract photo from canvas and write it into pouchDB\n        var photo = canvas.toDataURL('image/png');\n        var photoID = uuid.v4();\n        PhotoAPI.addPhoto(this.props.db, photoID, photo)\n\n        // Record the ID into localStorage\n        answers[index] = {\n            'response': photoID,\n            'response_type': 'answer'\n        };\n\n        survey[self.props.question.id] = answers; // Update localstorage\n        localStorage[self.props.surveyID] = JSON.stringify(survey);\n\n        // Update state for count and in memory photos array\n        var length = answers.length === 0 ? 1 : answers.length;\n        self.state.photos[index] = photo;\n        self.setState({\n            photos: self.state.photos,\n            questionCount: length\n        });\n\n    },\n\n    render: function() {\n        var children = Array.apply(null, {length: this.state.questionCount})\n        var self = this;\n        return (\n                <span>\n                <LittleButton\n                    buttonFunction={this.onCapture}\n                    disabled={this.props.disabled}\n                    iconClass={'icon-star'}\n                    text={'take a photo'}\n                />\n\n                <canvas ref='canvas' className=\"question__canvas\" />\n                <video\n                    autoPlay\n                    ref='video'\n                    className=\"question__video\"\n                    src={this.state.src}\n                />\n\n                {children.map(function(child, idx) {\n                    return (\n                            <PhotoField\n                                buttonFunction={self.removeInput}\n                                type={self.props.questionType}\n                                key={Math.random()}\n                                index={idx}\n                                ref={idx}\n                                disabled={true}\n                                initValue={self.state.photos[idx]}\n                                showMinus={true}\n                            />\n                           )\n                })}\n\n                {this.props.question.allow_multiple\n                    ? <LittleButton buttonFunction={this.addNewInput}\n                        disabled={this.props.disabled}\n                        text={'add another answer'} />\n                    : null\n                }\n                </span>\n               )\n    }\n});\n","var React = require('react');\n\nvar ResponseField = require('./baseComponents/ResponseField.js');\nvar LittleButton = require('./baseComponents/LittleButton.js');\n\n/*\n * Question component\n * The default question controller-view\n *\n * props:\n *     @question: node object from survey\n *     @questionType: type constraint\n *     @language: current survey language\n *     @surveyID: current survey id\n *     @disabled: boolean for disabling all inputs\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n\n        return { \n            questionCount: length,\n        }\n    },\n\n    /*\n     * Hack to force react to update child components\n     * Gets called by parent element through 'refs' when state of something changed \n     * (usually localStorage)\n     */\n    update: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n        this.setState({\n            questionCount: length,\n        });\n    },\n\n    /*\n     * Add new input if and only if they've responded to all previous inputs\n     */\n    addNewInput: function() {\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length;\n\n        console.log(\"Length:\", length, \"Count\", this.state.questionCount);\n        if (answers[length] && answers[length].response_type\n                || length > 0 && length == this.state.questionCount) {\n\n            this.setState({\n                questionCount: this.state.questionCount + 1\n            })\n        }\n    },\n\n    /*\n     * Remove input and update localStorage\n     */\n    removeInput: function(index) {\n        console.log(\"Remove\", index);\n\n        if (!(this.state.questionCount > 1))\n            return;\n\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n\n        answers.splice(index, 1);\n        survey[this.props.question.id] = answers;\n\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n        this.setState({\n            questionCount: this.state.questionCount - 1\n        })\n\n        //this.forceUpdate();\n    },\n\n    /*\n     * Record new response into localStorage, response has been validated\n     * if this callback is fired \n     */\n    onInput: function(value, index) {\n\n        console.log(\"Hey\", index, value);\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n\n        //XXX Null value implies failed validation\n        answers[index] = {\n            'response': value, \n            'response_type': 'answer'\n        };\n\n        survey[this.props.question.id] = answers;\n        localStorage[this.props.surveyID] = JSON.stringify(survey);\n\n        //if (value === null) {\n        //    this.removeInput(index);\n        //}\n    },\n\n    /*\n     * Get default value for an input at a given index from localStorage\n     *\n     * @index: The location in the answer array in localStorage to search\n     */\n    getAnswer: function(index) {\n        console.log(\"In:\", index);\n\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var answers = survey[this.props.question.id] || [];\n        var length = answers.length === 0 ? 1 : answers.length;\n\n        console.log(answers, index);\n        return answers[index] && answers[index].response || null;\n    },\n\n    render: function() {\n        var children = Array.apply(null, {length: this.state.questionCount})\n        var self = this;\n        return (\n                <span>\n                {children.map(function(child, idx) {\n                    return (\n                            <ResponseField \n                                buttonFunction={self.removeInput}\n                                onInput={self.onInput}\n                                type={self.props.questionType}\n                                logic={self.props.question.logic}\n                                key={Math.random()} \n                                index={idx} \n                                disabled={self.props.disabled}\n                                initValue={self.getAnswer(idx)} \n                                showMinus={self.state.questionCount > 1}\n                            />\n                           )\n                })}\n                {this.props.question.allow_multiple\n                    ? <LittleButton buttonFunction={this.addNewInput}\n                        disabled={this.props.disabled}\n                        text={'add another answer'} />\n                    : null \n                }\n                </span>\n               )\n    }\n});\n","var React = require('react');\n\nvar Card = require('./baseComponents/Card.js');\nvar BigButton = require('./baseComponents/BigButton.js');\n\n/*\n * Splash page component\n * Renders the appropiate card for the main page\n *\n * props:\n *     @language: current survey language\n *     @surveyID: current survey id\n *     @buttonFunction: What to do when submit is clicked\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        var self = this;\n        // Get all unsynced surveys\n        var unsynced_surveys = JSON.parse(localStorage['unsynced'] || '{}');\n        // Get array of unsynced submissions to this survey\n        var unsynced_submissions = unsynced_surveys[this.props.surveyID] || [];\n\n        // Update navigator.onLine\n        var interval = window.setInterval(function() {\n            if (self.state.online !== navigator.onLine) {\n                self.setState({\n                    online: navigator.onLine,\n                });\n            }\n        }, 1000);\n\n        return { \n            count: unsynced_submissions.length,\n            online: navigator.onLine,\n            interval: interval,\n        }\n    },\n\n    // Force react to update\n    update: function() {\n        // Get all unsynced surveys\n        var unsynced_surveys = JSON.parse(localStorage['unsynced'] || '{}');\n        // Get array of unsynced submissions to this survey\n        var unsynced_submissions = unsynced_surveys[this.props.surveyID] || [];\n\n        this.setState({ \n            count: unsynced_submissions.length,\n            online: navigator.onLine,\n        });\n    },\n\n    buttonFunction: function(event) {\n        if (this.props.buttonFunction)\n            this.props.buttonFunction(event);\n\n        // Get all unsynced surveys\n        var unsynced_surveys = JSON.parse(localStorage['unsynced'] || '{}');\n        // Get array of unsynced submissions to this survey\n        var unsynced_submissions = unsynced_surveys[this.props.surveyID] || [];\n\n        this.setState({ \n            count: unsynced_submissions.length,\n            online: navigator.onLine,\n        });\n\n    },\n\n    componentWillUnmount: function() {\n       window.clearInterval(this.state.interval);\n    },\n\n    getCard: function() {\n        var email = localStorage['submitter_email'] || \"anon@anon.org\";\n        var title = this.props.surveyTitle[this.props.language];\n        if (this.state.count) {\n            if (this.state.online) {\n                // Unsynced and online\n                return (\n                        <span>\n                        <Card messages={[['You have ',  <b>{this.state.count}</b>, ' unsynced surveys.', ' Please submit them now.'], \n                            ]} type={\"message-warning\"}/>\n                        <BigButton text={\"Submit Completed Surveys\"} buttonFunction={this.buttonFunction} /> \n                        </span>\n                       )\n            } else {\n                // Unsynced and offline\n                return (\n                        <Card messages={[['You have ',  <b>{this.state.count}</b>, ' unsynced surveys.'], \n                            '',\n                            'At present, you do not have a network connection — please remember to submit' \n                                + ' these surveys the next time you do have access to the internet.'\n                        ]} type={\"message-warning\"}/>\n                       )\n            }\n        } else {\n            // No unsynced surveys\n            return (\n                    <Card messages={[['Hi ', <b>{email}</b>, ' and welcome to the ', {title}, <br/>], \n                        ['If you have any questions regarding the survey, please ', <u>contact the survey adminstrator</u>]]} \n                    type={\"message-primary\"}/>\n                   )\n        }\n    },\n\n    render: function() {\n        return this.getCard()\n    }\n});\n","var React = require('react');\nvar Card = require('./baseComponents/Card.js');\nvar Message = require('./baseComponents/Message.js');\nvar ResponseField = require('./baseComponents/ResponseField.js');\n\n/*\n * Submit page component\n * Renders the appropiate card and buttons for the submit page\n *\n * props:\n *     @language: current survey language\n *     @surveyID: current survey id\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        return { \n        }\n    },\n\n    onInput: function(value, index) {\n        if (index === 0) {\n            localStorage['submitter_name'] = value;\n        } else {\n            localStorage['submitter_email'] = value;\n        }\n\n    },\n\n    render: function() {\n        var self = this;\n        return (\n                <span>\n                \n                <Message text={'Enter your name and email id'} />\n                <ResponseField \n                    onInput={self.onInput}\n                    type={'text'}\n                    key={'name'} \n                    placeholder={\"Enumerator Name\"}\n                    index={0} \n                    initValue={localStorage['submitter_name']} \n                    showMinus={false}\n                />\n\n                <ResponseField \n                    onInput={self.onInput}\n                    type={'email'}\n                    key={'email'} \n                    placeholder={\"Enumerator Email\"}\n                    index={1} \n                    initValue={localStorage['submitter_email']} \n                    showMinus={false}\n                />\n\n                <Card messages={[\"Saved surveys must be uploaded when you next have network connectivity.\"]} \n                    type={\"message-primary\"}/>\n\n                </span>\n               )\n    }\n});\n","var React = require('react');\n\n/*\n * Big 'ol button\n *\n * props:\n *  @type: Type of button (class name from ratchet usually) defaults to btn-primary\n *  @buttonFunction: What to do on click events\n *  @text: Text of the button\n */\nmodule.exports = React.createClass({\n    render: function() {\n        var buttonClasses = 'btn btn-block navigate-right page_nav__next';\n        if (this.props.type) {\n            buttonClasses += ' ' + this.props.type;\n        } else {\n            buttonClasses += ' btn-primary';\n        }\n\n        return (\n                <div className='bar-padded'>\n                    <button onClick={this.props.buttonFunction} className={buttonClasses}>\n                        {this.props.text}\n                    </button>\n                </div>\n               );\n    }\n});\n\n","var React = require('react');\n\n/*\n * Card component\n *\n * props:\n *  @type: Card type (class name from ratchet usually) defaults to message-primary\n *  @msg: Array of messages, each element is placed on a new line. JSX accepted\n */\nmodule.exports = React.createClass({\n    render: function() {\n        var messageClass = 'message-box';\n        if (this.props.type) {\n            messageClass += ' ' + this.props.type;\n        } else {\n            messageClass += ' message-primary';\n        }\n\n        return (\n            <div className='content-padded'>\n                <div className={messageClass} >\n                {this.props.messages.map(function(msg, idx) {\n                    return (\n                            <span> {msg} <br/> </span>\n                        );\n                })}\n                </div>\n            </div>\n       );\n    }\n});\n","var React = require('react');\n\n/*\n * Don't know component\n *\n * props:\n *  @checkBoxFunction: What to do on click event\n */\nmodule.exports = React.createClass({\n    render: function() {\n        return (\n                <div className='question__btn__other'>\n                    <input\n                        onClick={this.props.checkBoxFunction}\n                        type='checkbox'\n                        id='dont-know'\n                        name='dont-know'\n                        defaultChecked={this.props.checked}\n                    />\n                    <label htmlFor='dont-know'>I don't know the answer</label>\n                </div>\n               );\n    }\n});\n\n","var React = require('react');\n\n/*\n * Facility Radio component\n * Renders radio's specifically formatted for facility data\n *\n * props:\n *  @facilities: Array of facility objects (revisit format)\n *  @selectFunction: What to do when facility is selected\n *  @initValue: Default selected facility\n */\nmodule.exports = React.createClass({\n    /*\n     * Keep track of which option is selected\n     */\n    getInitialState: function() {\n        return {\n            selected: this.props.initValue\n        };\n    },\n\n    /*\n     * Make radio behave like single option checkbox\n     *\n     * Calls selectFunction with option (passes null when option unchecked)\n     *\n     * @e: click event\n     */\n    onClick: function(e) {\n        var option = e.target.value;\n        var checked = e.target.checked;\n        var selected = option;\n\n        if (option === this.state.selected) {\n            selected = null;\n            checked = false;\n        }\n\n        e.target.checked = checked;\n        window.etarget = e.target;\n        //e.stopPropagation();\n        //e.cancelBubble = true;\n\n        if (this.props.selectFunction)\n            this.props.selectFunction(selected);\n\n        this.setState({\n            selected: selected\n        });\n    },\n\n    render: function() {\n        var self = this;\n        return (\n                <div className='question__radios'>\n                {this.props.facilities.map(function(facility) {\n                    return (\n                        <div\n                            key={facility.uuid}\n                            className='question__radio noselect'\n                        >\n                            <input\n                                type='radio'\n                                id={facility.uuid}\n                                name='facility'\n                                onClick={self.onClick}\n                                disabled={self.props.disabled}\n                                defaultChecked={facility.uuid === self.state.selected}\n                                value={facility.uuid}\n                            />\n                            <label\n                                htmlFor={facility.uuid}\n                                className='question__radio__label'\n                            >\n                                <span className=\"radio__span\">\n                                    <span></span>\n                                </span>\n                                <strong className='question__radio__strong__meta'>\n                                    {facility.name}\n                                </strong>\n                                <br/>\n                                <span className='question__radio__span__meta'>\n                                    {facility.properties.sector}\n                                </span>\n                                <span className='question__radio__span__meta'>\n                                    <em>{facility.distance && facility.distance.toFixed(2)}m</em>\n                                </span>\n                            </label>\n                        </div>\n                    );\n                })}\n                </div>\n               );\n    }\n});\n\n","var React = require('react');\n\n/*\n * Little weeny button\n *\n * props:\n *  @type: Type of button (class name from ratchet usually) defaults to btn-primary\n *  @buttonFunction: What to do on click events\n *  @text: Text of the button\n *  @icon: Icon if any to show before button text\n */\nmodule.exports = React.createClass({\n    render: function() {\n        var iconClass = 'icon ' + this.props.icon;\n        return (\n                <div className=\"content-padded\">\n                    <button className=\"btn\"\n                        disabled={this.props.disabled}\n                        onClick={this.props.buttonFunction} >\n\n                        {this.props.icon ? <span className={iconClass}></span> : null }\n                        {this.props.text}\n                    </button>\n                </div>\n               );\n    }\n});\n\n","var React = require('react'),\n    PhotoAPI = require('../../api/PhotoAPI.js');\n\n/*\n * Header Menu component\n *\n * XXX In works, must sort out way to properly clear active survey\n * (Could have active survey data that references photos in pouchdb that would\n * be left orphaned if not submitted).\n *\n * @db: active pouch db\n * @surveyID: active surveyID\n */\nmodule.exports = React.createClass({\n\n    wipeActive: function() {\n        // Confirm their intent\n        var nuke = confirm('Warning: Active survey and photos will be lost.');\n        if (!nuke)\n            return;\n\n        var self = this;\n        var survey = JSON.parse(localStorage[this.props.surveyID] || '{}');\n        var questionIDs = Object.keys(survey);\n        console.log('questionIDs', questionIDs);\n        questionIDs.forEach(function(questionID) {\n            var responses = survey[questionID] || [];\n            console.log('responses', responses);\n            responses.forEach(function(response) {\n                console.log('response', response);\n                //XXX response object does not contain type_constraint, would need to pass in question nodes\n                //if (response.type_constraint === 'photo') {\n                //XXX hack for now\n                if (response.response.length === 36) {\n                    PhotoAPI.removePhoto(self.props.db, response.response, function(err, result) {\n                        if (err) {\n                            //XXX should fail often as it tries to clear every response\n                            console.log('Couldnt remove from db:', err);\n                            return;\n                        }\n\n                        console.log('Removed:', result);\n                    });\n                }\n            });\n        });\n\n        // Wipe active survey\n        localStorage[this.props.surveyID] = JSON.stringify({});\n        // Wipe location info\n        localStorage['location'] = JSON.stringify({});\n        window.location.reload();\n    },\n\n\n    wipeAll: function() {\n        var self = this;\n        // Confirm their intent\n        var nuke = confirm('Warning: All stored surveys and photos will be lost.');\n        if (!nuke)\n            return;\n\n        localStorage.clear();\n        self.props.db.destroy().then(function() {\n            window.location.reload();\n        });\n    },\n\n    render: function() {\n        var self = this;\n        return (\n            <div className='title_menu'>\n                <div className='title_menu_option menu_restart'\n                    onClick={self.wipeActive}\n                >\n                    Cancel survey\n                </div>\n                <div className='title_menu_option menu_clear'\n                    onClick={self.wipeAll}\n                >\n                    Clear all saved surveys\n                </div>\n            </div>\n       )\n    }\n});\n","var React = require('react');\n\n/*\n * Message component\n *\n * @text: text to render\n */\nmodule.exports = React.createClass({\n    render: function() {\n        var textClass = this.props.classes;\n        return (\n                <div className='content-padded'>\n                        <p className={textClass}>{this.props.text}</p>\n                </div>\n               )\n    }\n});\n\n","var React = require('react');\n\n/*\n * ResponseField component\n * Main input field component, handles validation\n *\n * props:\n *  @onInput: What to do on valid input\n *  @index: What index value to send on valid input (i.e position in array of fields)\n *  @showMinus: Show the 'X' on the input\n *  @buttonFunction: What to do on 'X' click event, index value is bound to this function\n *  @initValue: Initial value for the input field\n */\nmodule.exports = React.createClass({\n\n    /*\n     * Validate the answer based on props.type\n     *\n     * @answer: The response to be validated\n     *\n     * TODO: implement photo validation, if necessary...\n     */\n    validate: function(answer) {\n        return true;\n    },\n\n    /*\n     * Handle change event, validates on every change\n     * fires props.onInput on validation success\n     *\n     * @event: Change event\n     */\n    // onChange: function(event) {\n\n    // },\n\n    render: function() {\n        return (\n                <div className=\"photo_container\">\n                    <img\n                        className=\"photo_input\"\n                        src={this.props.initValue}\n                        disabled={this.props.disabled}\n                     >\n                     {this.props.showMinus ?\n                        <span\n                            onClick={this.props.buttonFunction.bind(null, this.props.index)}\n                            disabled={this.props.disabled}\n                            className=\"icon icon-close question__minus\">\n                        </span>\n                        : null}\n                    </img>\n                 </div>\n               );\n    }\n});\n","var React = require('react');\n\n/*\n * ResponseField component\n * Main input field component, handles validation\n *\n * props:\n *  @type: question type constraint, sets the input type to it, defaults to text\n *  @logic: dictionary containing logic to enforce\n *  @onInput: What to do on valid input\n *  @index: What index value to send on valid input (i.e position in array of fields)\n *  @showMinus: Show the 'X' on the input\n *  @buttonFunction: What to do on 'X' click event, index value is bound to this function\n *  @placeholder: Placeholder text for input, defaults to 'Please provide a response'\n *  @initValue: Initial value for the input field\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        return {\n        };\n    },\n\n    // Determine the input field type based on props.type\n    getResponseType: function() {\n        var type = this.props.type;\n        switch(type) {\n            case 'integer':\n            case 'decimal':\n                return 'number';\n            case 'timestamp':\n                return 'datetime-local';\n            case 'time':\n                return 'time';\n            case 'date':\n                return 'date';\n            case 'email':\n                return 'email';\n            default:\n                return 'text';\n        }\n    },\n\n    // Determine the input field step based on props.type\n    getResponseStep: function() {\n        var type = this.props.type;\n        switch(type) {\n            case 'decimal':\n                return 'any';\n            case 'timestamp':\n                return '1';\n            default:\n                return null;\n        }\n    },\n\n    /*\n     * Validate the answer based on props.type\n     *\n     * @answer: The response to be validated\n     */\n    validate: function(answer) {\n        var type = this.props.type;\n        var logic = this.props.logic;\n        console.log('Enforcing: ', logic);\n        var val = null;\n        switch(type) {\n            case 'integer':\n                val = parseInt(answer);\n                if (isNaN(val)) {\n                    val = null;\n                    break;\n                }\n\n                if (logic && logic.min && typeof logic.min === 'number') {\n                    if (val < logic.min) {\n                        val = null;\n                    }\n                }\n\n                if (logic && logic.max && typeof logic.max === 'number') {\n                    if (val > logic.max) {\n                        val = null;\n                    }\n                }\n\n                break;\n            case 'decimal':\n                val = parseFloat(answer);\n                if (isNaN(val)) {\n                    val = null;\n                }\n\n                if (logic && logic.min && typeof logic.min === 'number') {\n                    if (val < logic.min) {\n                        val = null;\n                    }\n                }\n\n                if (logic && logic.max && typeof logic.max === 'number') {\n                    if (val > logic.max) {\n                        val = null;\n                    }\n                }\n\n                break;\n            case 'date':\n                var resp = new Date(answer);\n                var day = ('0' + resp.getDate()).slice(-2);\n                var month = ('0' + (resp.getMonth() + 1)).slice(-2);\n                var year = resp.getFullYear();\n                val = answer; //XXX Keep format?\n                if(isNaN(year) || isNaN(month) || isNaN(day))  {\n                    val = null;\n                }\n\n                if (logic && logic.min && !isNaN((new Date(logic.min)).getDate())) {\n                    if (resp < new Date(logic.min)) {\n                        val = null;\n                    }\n                }\n\n                if (logic && logic.max && !isNaN((new Date(logic.max)).getDate())) {\n                    if (resp > new Date(logic.max)) {\n                        val = null;\n                    }\n                }\n\n                break;\n            case 'timestamp':\n            case 'time':\n                //TODO: enforce\n            default:\n              if (answer) {\n                  val = answer;\n              }\n        }\n\n        return val;\n\n    },\n\n    /*\n     * Handle change event, validates on every change\n     * fires props.onInput with validated value OR null\n     *\n     * @event: Change event\n     */\n    onChange: function(event) {\n        var value = this.validate(event.target.value);\n        var input = event.target;\n        input.setCustomValidity('');\n\n        if (value === null) {\n            window.target = event.target;\n            input.setCustomValidity('Invalid field.');\n        }\n\n        if (this.props.onInput)\n            this.props.onInput(value, this.props.index);\n    },\n\n    render: function() {\n        return (\n                <div className='input_container'>\n                    <input\n                        type={this.getResponseType()}\n                        step={this.getResponseStep()}\n                        placeholder={this.props.placeholder || 'Please provide a response.'}\n                        onChange={this.onChange}\n                        defaultValue={this.props.initValue}\n                        disabled={this.props.disabled}\n                     >\n                     {this.props.showMinus ?\n                        <span\n                            onClick={this.props.buttonFunction.bind(null, this.props.index)}\n                            disabled={this.props.disabled}\n                            className='icon icon-close question__minus'>\n                        </span>\n                        : null}\n                    </input>\n                 </div>\n               );\n    }\n});\n","var React = require('react'),\n    ResponseField = require('./ResponseField.js');\n\n/*\n * Select component\n * Handles drop down and other input rendering\n *\n * props:\n *  @multiSelect: Boolean to activate multiselect mode\n *  @choices: Array of choices in Select, expects a dict with value and text\n *  @withOther: Allow for other responses, adds it to the choices and renders\n *      a ResponseField when selected\n *  @onInput: What to do on valid other input\n *  @onSelect: What to do on selection\n */\nmodule.exports = React.createClass({\n    getInitialState: function() {\n        return {\n            showOther: this.props.initSelect && this.props.initSelect.indexOf('other') > -1\n        }\n    },\n\n    onChange: function(e) {\n        var foundOther = false;\n        var options = [];\n        for (var i = 0; i < e.target.selectedOptions.length; i++) {\n            option = e.target.selectedOptions[i];\n            foundOther = foundOther | option.value === \"other\";\n            options[i] = option.value;\n        }\n\n        if (this.props.onSelect)\n            this.props.onSelect(options);\n\n        this.setState({showOther: foundOther})\n    },\n\n    render: function() {\n       var size = this.props.multiSelect ?\n           this.props.choices.length + 1 + 1*this.props.withOther : 1;\n        return (\n                <div className=\"content-padded\">\n                    <select className=\"noselect\" onChange={this.onChange}\n                            multiple={this.props.multiSelect}\n                            size={size}\n                            defaultValue={this.props.multiSelect\n                                ? this.props.initSelect\n                                : this.props.initSelect\n                                    ? this.props.initSelect[0]\n                                    : null\n                            }\n                            disabled={this.props.disabled}\n                    >\n\n                    <option key=\"null\" value=\"null\">Please choose an option</option>\n                    {this.props.choices.map(function(choice) {\n                        return (\n                                <option key={choice.value} value={choice.value}>\n                                    { choice.text }\n                                </option>\n                                )\n                    })}\n                    {this.props.withOther ?\n                        <option key=\"other\" value=\"other\"> Other </option>\n                        : null}\n                    </select>\n                    {this.state.showOther\n                        ?   <ResponseField\n                                disabled={this.props.disabled}\n                                onInput={this.props.onInput}\n                                initValue={this.props.initValue}\n                            />\n                        :   null\n                    }\n                </div>\n               )\n\n    }\n});\n\n","var React = require('react');\n\n/*\n * Title component\n *\n * props:\n *  @title: Title text to render in content\n *  @message: 'hint' text to render in content\n */\nmodule.exports = React.createClass({\n    render: function() {\n        return ( \n                <div className=\"content-padded\">\n                    <h3>{this.props.title}</h3>\n                    <p>{this.props.message}</p>\n                </div>\n               )\n    }\n});\n","module.exports = {\n    revisit_url: null\n};","var React = require('react'),\n    Application = require('./Application'),\n    config = require('./conf/config');\n\n/*\n * Entry point for template\n *\n * @survey: JSON representation of the survey\n * @revisit_url: Revisit url, set globally\n */\nwindow.init = function(survey, url) {\n    console.log('init');\n    // Set revisit url\n    config.revisit_url = url;\n\n    // Listen to appcache updates, reload JS.\n    window.applicationCache.addEventListener('updateready', function() {\n        alert('Application updated, reloading ...');\n        window.applicationCache.swapCache();\n        window.location.reload();\n    });\n\n    React.render(\n            <Application survey={survey} />,\n            document.body\n    );\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","'use strict';\nvar util = require('util');\nvar EventEmitter = require('events').EventEmitter;\nfunction toArray(arr, start, end) {\n  return Array.prototype.slice.call(arr, start, end)\n}\nfunction strongUnshift(x, arrLike) {\n  var arr = toArray(arrLike);\n  arr.unshift(x);\n  return arr;\n}\n\n\n/**\n * MPromise constructor.\n *\n * _NOTE: The success and failure event names can be overridden by setting `Promise.SUCCESS` and `Promise.FAILURE` respectively._\n *\n * @param {Function} back a function that accepts `fn(err, ...){}` as signature\n * @inherits NodeJS EventEmitter http://nodejs.org/api/events.html#events_class_events_eventemitter\n * @event `reject`: Emits when the promise is rejected (event name may be overridden)\n * @event `fulfill`: Emits when the promise is fulfilled (event name may be overridden)\n * @api public\n */\nfunction Promise(back) {\n  this.emitter = new EventEmitter();\n  this.emitted = {};\n  this.ended = false;\n  if ('function' == typeof back) {\n    this.ended = true;\n    this.onResolve(back);\n  }\n}\n\n\n/*\n * Module exports.\n */\nmodule.exports = Promise;\n\n\n/*!\n * event names\n */\nPromise.SUCCESS = 'fulfill';\nPromise.FAILURE = 'reject';\n\n\n/**\n * Adds `listener` to the `event`.\n *\n * If `event` is either the success or failure event and the event has already been emitted, the`listener` is called immediately and passed the results of the original emitted event.\n *\n * @param {String} event\n * @param {Function} callback\n * @return {MPromise} this\n * @api private\n */\nPromise.prototype.on = function (event, callback) {\n  if (this.emitted[event])\n    callback.apply(undefined, this.emitted[event]);\n  else\n    this.emitter.on(event, callback);\n\n  return this;\n};\n\n\n/**\n * Keeps track of emitted events to run them on `on`.\n *\n * @api private\n */\nPromise.prototype.safeEmit = function (event) {\n  // ensures a promise can't be fulfill() or reject() more than once\n  if (event == Promise.SUCCESS || event == Promise.FAILURE) {\n    if (this.emitted[Promise.SUCCESS] || this.emitted[Promise.FAILURE]) {\n      return this;\n    }\n    this.emitted[event] = toArray(arguments, 1);\n  }\n\n  this.emitter.emit.apply(this.emitter, arguments);\n  return this;\n};\n\n\n/**\n * @api private\n */\nPromise.prototype.hasRejectListeners = function () {\n  return EventEmitter.listenerCount(this.emitter, Promise.FAILURE) > 0;\n};\n\n\n/**\n * Fulfills this promise with passed arguments.\n *\n * If this promise has already been fulfilled or rejected, no action is taken.\n *\n * @api public\n */\nPromise.prototype.fulfill = function () {\n  return this.safeEmit.apply(this, strongUnshift(Promise.SUCCESS, arguments));\n};\n\n\n/**\n * Rejects this promise with `reason`.\n *\n * If this promise has already been fulfilled or rejected, no action is taken.\n *\n * @api public\n * @param {Object|String} reason\n * @return {MPromise} this\n */\nPromise.prototype.reject = function (reason) {\n  if (this.ended && !this.hasRejectListeners())\n    throw reason;\n  return this.safeEmit(Promise.FAILURE, reason);\n};\n\n\n/**\n * Resolves this promise to a rejected state if `err` is passed or\n * fulfilled state if no `err` is passed.\n *\n * @param {Error} [err] error or null\n * @param {Object} [val] value to fulfill the promise with\n * @api public\n */\nPromise.prototype.resolve = function (err, val) {\n  if (err) return this.reject(err);\n  return this.fulfill(val);\n};\n\n\n/**\n * Adds a listener to the SUCCESS event.\n *\n * @return {MPromise} this\n * @api public\n */\nPromise.prototype.onFulfill = function (fn) {\n  if (!fn) return this;\n  if ('function' != typeof fn) throw new TypeError(\"fn should be a function\");\n  return this.on(Promise.SUCCESS, fn);\n};\n\n\n/**\n * Adds a listener to the FAILURE event.\n *\n * @return {MPromise} this\n * @api public\n */\nPromise.prototype.onReject = function (fn) {\n  if (!fn) return this;\n  if ('function' != typeof fn) throw new TypeError(\"fn should be a function\");\n  return this.on(Promise.FAILURE, fn);\n};\n\n\n/**\n * Adds a single function as a listener to both SUCCESS and FAILURE.\n *\n * It will be executed with traditional node.js argument position:\n * function (err, args...) {}\n *\n * Also marks the promise as `end`ed, since it's the common use-case, and yet has no\n * side effects unless `fn` is undefined or null.\n *\n * @param {Function} fn\n * @return {MPromise} this\n */\nPromise.prototype.onResolve = function (fn) {\n  if (!fn) return this;\n  if ('function' != typeof fn) throw new TypeError(\"fn should be a function\");\n  this.on(Promise.FAILURE, function (err) { fn.call(this, err); });\n  this.on(Promise.SUCCESS, function () { fn.apply(this, strongUnshift(null, arguments)); });\n  return this;\n};\n\n\n/**\n * Creates a new promise and returns it. If `onFulfill` or\n * `onReject` are passed, they are added as SUCCESS/ERROR callbacks\n * to this promise after the next tick.\n *\n * Conforms to [promises/A+](https://github.com/promises-aplus/promises-spec) specification. Read for more detail how to use this method.\n *\n * ####Example:\n *\n *     var p = new Promise;\n *     p.then(function (arg) {\n *       return arg + 1;\n *     }).then(function (arg) {\n *       throw new Error(arg + ' is an error!');\n *     }).then(null, function (err) {\n *       assert.ok(err instanceof Error);\n *       assert.equal('2 is an error', err.message);\n *     });\n *     p.complete(1);\n *\n * @see promises-A+ https://github.com/promises-aplus/promises-spec\n * @param {Function} onFulfill\n * @param {Function} [onReject]\n * @return {MPromise} newPromise\n */\nPromise.prototype.then = function (onFulfill, onReject) {\n  var newPromise = new Promise;\n\n  if ('function' == typeof onFulfill) {\n    this.onFulfill(handler(newPromise, onFulfill));\n  } else {\n    this.onFulfill(newPromise.fulfill.bind(newPromise));\n  }\n\n  if ('function' == typeof onReject) {\n    this.onReject(handler(newPromise, onReject));\n  } else {\n    this.onReject(newPromise.reject.bind(newPromise));\n  }\n\n  return newPromise;\n};\n\n\nfunction handler(promise, fn) {\n  function newTickHandler() {\n    var pDomain = promise.emitter.domain;\n    if (pDomain && pDomain !== process.domain) pDomain.enter();\n    try {\n      var x = fn.apply(undefined, boundHandler.args);\n    } catch (err) {\n      promise.reject(err);\n      return;\n    }\n    resolve(promise, x);\n  }\n  function boundHandler() {\n    boundHandler.args = arguments;\n    process.nextTick(newTickHandler);\n  }\n  return boundHandler;\n}\n\n\nfunction resolve(promise, x) {\n  function fulfillOnce() {\n    if (done++) return;\n    resolve.apply(undefined, strongUnshift(promise, arguments));\n  }\n  function rejectOnce(reason) {\n    if (done++) return;\n    promise.reject(reason);\n  }\n\n  if (promise === x) {\n    promise.reject(new TypeError(\"promise and x are the same\"));\n    return;\n  }\n  var rest = toArray(arguments, 1);\n  var type = typeof x;\n  if ('undefined' == type || null == x || !('object' == type || 'function' == type)) {\n    promise.fulfill.apply(promise, rest);\n    return;\n  }\n\n  try {\n    var theThen = x.then;\n  } catch (err) {\n    promise.reject(err);\n    return;\n  }\n\n  if ('function' != typeof theThen) {\n    promise.fulfill.apply(promise, rest);\n    return;\n  }\n\n  var done = 0;\n  try {\n    var ret = theThen.call(x, fulfillOnce, rejectOnce);\n    return ret;\n  } catch (err) {\n    if (done++) return;\n    promise.reject(err);\n  }\n}\n\n\n/**\n * Signifies that this promise was the last in a chain of `then()s`: if a handler passed to the call to `then` which produced this promise throws, the exception will go uncaught.\n *\n * ####Example:\n *\n *     var p = new Promise;\n *     p.then(function(){ throw new Error('shucks') });\n *     setTimeout(function () {\n *       p.fulfill();\n *       // error was caught and swallowed by the promise returned from\n *       // p.then(). we either have to always register handlers on\n *       // the returned promises or we can do the following...\n *     }, 10);\n *\n *     // this time we use .end() which prevents catching thrown errors\n *     var p = new Promise;\n *     var p2 = p.then(function(){ throw new Error('shucks') }).end(); // <--\n *     setTimeout(function () {\n *       p.fulfill(); // throws \"shucks\"\n *     }, 10);\n *\n * @api public\n * @param {Function} [onReject]\n * @return {MPromise} this\n */\nPromise.prototype.end = Promise.prototype['catch'] = function (onReject) {\n  if (!onReject && !this.hasRejectListeners())\n    onReject = function idRejector(e) { throw e; };\n  this.onReject(onReject);\n  this.ended = true;\n  return this;\n};\n\n\n/**\n * A debug utility function that adds handlers to a promise that will log some output to the `console`\n *\n * ####Example:\n *\n *     var p = new Promise;\n *     p.then(function(){ throw new Error('shucks') });\n *     setTimeout(function () {\n *       p.fulfill();\n *       // error was caught and swallowed by the promise returned from\n *       // p.then(). we either have to always register handlers on\n *       // the returned promises or we can do the following...\n *     }, 10);\n *\n *     // this time we use .end() which prevents catching thrown errors\n *     var p = new Promise;\n *     var p2 = p.then(function(){ throw new Error('shucks') }).end(); // <--\n *     setTimeout(function () {\n *       p.fulfill(); // throws \"shucks\"\n *     }, 10);\n *\n * @api public\n * @param {MPromise} p\n * @param {String} name\n * @return {MPromise} this\n */\nPromise.trace = function (p, name) {\n  p.then(\n    function () {\n      console.log(\"%s fulfill %j\", name, toArray(arguments));\n    },\n    function () {\n      console.log(\"%s reject %j\", name, toArray(arguments));\n    }\n  )\n};\n\n\nPromise.prototype.chain = function (p2) {\n  var p1 = this;\n  p1.onFulfill(p2.fulfill.bind(p2));\n  p1.onReject(p2.reject.bind(p2));\n  return p2;\n};\n\n\nPromise.prototype.all = function (promiseOfArr) {\n  var pRet = new Promise;\n  this.then(promiseOfArr).then(\n    function (promiseArr) {\n      var count = 0;\n      var ret = [];\n      var errSentinel;\n      if (!promiseArr.length) pRet.resolve();\n      promiseArr.forEach(function (promise, index) {\n        if (errSentinel) return;\n        count++;\n        promise.then(\n          function (val) {\n            if (errSentinel) return;\n            ret[index] = val;\n            --count;\n            if (count == 0) pRet.fulfill(ret);\n          },\n          function (err) {\n            if (errSentinel) return;\n            errSentinel = err;\n            pRet.reject(err);\n          }\n        );\n      });\n      return pRet;\n    }\n    , pRet.reject.bind(pRet)\n  );\n  return pRet;\n};\n\n\nPromise.hook = function (arr) {\n  var p1 = new Promise;\n  var pFinal = new Promise;\n  var signalP = function () {\n    --count;\n    if (count == 0)\n      pFinal.fulfill();\n    return pFinal;\n  };\n  var count = 1;\n  var ps = p1;\n  arr.forEach(function (hook) {\n    ps = ps.then(\n      function () {\n        var p = new Promise;\n        count++;\n        hook(p.resolve.bind(p), signalP);\n        return p;\n      }\n    )\n  });\n  ps = ps.then(signalP);\n  p1.resolve();\n  return ps;\n};\n\n\n/* This is for the A+ tests, but it's very useful as well */\nPromise.fulfilled = function fulfilled() { var p = new Promise; p.fulfill.apply(p, arguments); return p; };\nPromise.rejected = function rejected(reason) { return new Promise().reject(reason); };\nPromise.deferred = function deferred() {\n  var p = new Promise;\n  return {\n    promise: p,\n    reject: p.reject.bind(p),\n    resolve: p.fulfill.bind(p),\n    callback: p.resolve.bind(p)\n  }\n};\n/* End A+ tests adapter bit */\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n(function() {\n  var _global = this;\n\n  // Unique ID creation requires a high quality random # generator.  We feature\n  // detect to determine the best RNG source, normalizing to a function that\n  // returns 128-bits of randomness, since that's what's usually required\n  var _rng;\n\n  // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html\n  //\n  // Moderately fast, high quality\n  if (typeof(_global.require) == 'function') {\n    try {\n      var _rb = _global.require('crypto').randomBytes;\n      _rng = _rb && function() {return _rb(16);};\n    } catch(e) {}\n  }\n\n  if (!_rng && _global.crypto && crypto.getRandomValues) {\n    // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n    //\n    // Moderately fast, high quality\n    var _rnds8 = new Uint8Array(16);\n    _rng = function whatwgRNG() {\n      crypto.getRandomValues(_rnds8);\n      return _rnds8;\n    };\n  }\n\n  if (!_rng) {\n    // Math.random()-based (RNG)\n    //\n    // If all else fails, use Math.random().  It's fast, but is of unspecified\n    // quality.\n    var  _rnds = new Array(16);\n    _rng = function() {\n      for (var i = 0, r; i < 16; i++) {\n        if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n        _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n      }\n\n      return _rnds;\n    };\n  }\n\n  // Buffer class to use\n  var BufferClass = typeof(_global.Buffer) == 'function' ? _global.Buffer : Array;\n\n  // Maps for number <-> hex string conversion\n  var _byteToHex = [];\n  var _hexToByte = {};\n  for (var i = 0; i < 256; i++) {\n    _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    _hexToByte[_byteToHex[i]] = i;\n  }\n\n  // **`parse()` - Parse a UUID into it's component bytes**\n  function parse(s, buf, offset) {\n    var i = (buf && offset) || 0, ii = 0;\n\n    buf = buf || [];\n    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n      if (ii < 16) { // Don't overflow!\n        buf[i + ii++] = _hexToByte[oct];\n      }\n    });\n\n    // Zero out remaining bytes if string was short\n    while (ii < 16) {\n      buf[i + ii++] = 0;\n    }\n\n    return buf;\n  }\n\n  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**\n  function unparse(buf, offset) {\n    var i = offset || 0, bth = _byteToHex;\n    return  bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]];\n  }\n\n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n\n  // random #'s we need to init node and clockseq\n  var _seedBytes = _rng();\n\n  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n  var _nodeId = [\n    _seedBytes[0] | 0x01,\n    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n  ];\n\n  // Per 4.2.2, randomize (14 bit) clockseq\n  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n  // Previous uuid creation time\n  var _lastMSecs = 0, _lastNSecs = 0;\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n\n    options = options || {};\n\n    var clockseq = options.clockseq != null ? options.clockseq : _clockseq;\n\n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = options.msecs != null ? options.msecs : new Date().getTime();\n\n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = options.nsecs != null ? options.nsecs : _lastNSecs + 1;\n\n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq == null) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n\n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {\n      nsecs = 0;\n    }\n\n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n\n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n\n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n\n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n\n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n\n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n\n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n\n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n\n    // `node`\n    var node = options.node || _nodeId;\n    for (var n = 0; n < 6; n++) {\n      b[i + n] = node[n];\n    }\n\n    return buf ? buf : unparse(b);\n  }\n\n  // **`v4()` - Generate random UUID**\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v4(options, buf, offset) {\n    // Deprecated - 'format' argument, as supported in v1.2\n    var i = buf && offset || 0;\n\n    if (typeof(options) == 'string') {\n      buf = options == 'binary' ? new BufferClass(16) : null;\n      options = null;\n    }\n    options = options || {};\n\n    var rnds = options.random || (options.rng || _rng)();\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ii++) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n\n    return buf || unparse(rnds);\n  }\n\n  // Export public API\n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  uuid.parse = parse;\n  uuid.unparse = unparse;\n  uuid.BufferClass = BufferClass;\n\n  if (typeof(module) != 'undefined' && module.exports) {\n    // Publish as node.js module\n    module.exports = uuid;\n  } else  if (typeof define === 'function' && define.amd) {\n    // Publish as AMD module\n    define(function() {return uuid;});\n \n\n  } else {\n    // Publish as global (in browsers)\n    var _previousRoot = _global.uuid;\n\n    // **`noConflict()` - (browser only) to reset global 'uuid' var**\n    uuid.noConflict = function() {\n      _global.uuid = _previousRoot;\n      return uuid;\n    };\n\n    _global.uuid = uuid;\n  }\n}).call(this);\n","'use strict';\n\nvar PouchPromise;\n/* istanbul ignore next */\nif (typeof window !== 'undefined' && window.PouchDB) {\n  PouchPromise = window.PouchDB.utils.Promise;\n} else {\n  PouchPromise = typeof global.Promise === 'function' ? global.Promise : require('lie');\n}\n\n// this is essentially the \"update sugar\" function from daleharvey/pouchdb#1388\n// the diffFun tells us what delta to apply to the doc.  it either returns\n// the doc, or false if it doesn't need to do an update after all\nfunction upsertInner(db, docId, diffFun) {\n  return new PouchPromise(function (fulfill, reject) {\n    if (typeof docId !== 'string') {\n      return reject(new Error('doc id is required'));\n    }\n\n    db.get(docId, function (err, doc) {\n      if (err) {\n        /* istanbul ignore next */\n        if (err.status !== 404) {\n          return reject(err);\n        }\n        doc = {};\n      }\n\n      // the user might change the _rev, so save it for posterity\n      var docRev = doc._rev;\n      var newDoc = diffFun(doc);\n\n      if (!newDoc) {\n        // if the diffFun returns falsy, we short-circuit as\n        // an optimization\n        return fulfill({updated: false, rev: docRev});\n      }\n\n      // users aren't allowed to modify these values,\n      // so reset them here\n      newDoc._id = docId;\n      newDoc._rev = docRev;\n      fulfill(tryAndPut(db, newDoc, diffFun));\n    });\n  });\n}\n\nfunction tryAndPut(db, doc, diffFun) {\n  return db.put(doc).then(function (res) {\n    return {\n      updated: true,\n      rev: res.rev\n    };\n  }, function (err) {\n    /* istanbul ignore next */\n    if (err.status !== 409) {\n      throw err;\n    }\n    return upsertInner(db, doc._id, diffFun);\n  });\n}\n\nexports.upsert = function upsert(docId, diffFun, cb) {\n  var db = this;\n  var promise = upsertInner(db, docId, diffFun);\n  if (typeof cb !== 'function') {\n    return promise;\n  }\n  promise.then(function (resp) {\n    cb(null, resp);\n  }, cb);\n};\n\nexports.putIfNotExists = function putIfNotExists(docId, doc, cb) {\n  var db = this;\n\n  if (typeof docId !== 'string') {\n    cb = doc;\n    doc = docId;\n    docId = doc._id;\n  }\n\n  var diffFun = function (existingDoc) {\n    if (existingDoc._rev) {\n      return false; // do nothing\n    }\n    return doc;\n  };\n\n  var promise = upsertInner(db, docId, diffFun);\n  if (typeof cb !== 'function') {\n    return promise;\n  }\n  promise.then(function (resp) {\n    cb(null, resp);\n  }, cb);\n};\n\n\n/* istanbul ignore next */\nif (typeof window !== 'undefined' && window.PouchDB) {\n  window.PouchDB.plugin(exports);\n}\n","'use strict';\n\nmodule.exports = INTERNAL;\n\nfunction INTERNAL() {}","'use strict';\nvar Promise = require('./promise');\nvar reject = require('./reject');\nvar resolve = require('./resolve');\nvar INTERNAL = require('./INTERNAL');\nvar handlers = require('./handlers');\nmodule.exports = all;\nfunction all(iterable) {\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new Promise(INTERNAL);\n  \n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len & !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}","'use strict';\nvar tryCatch = require('./tryCatch');\nvar resolveThenable = require('./resolveThenable');\nvar states = require('./states');\n\nexports.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return exports.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    resolveThenable.safely(self, thenable);\n  } else {\n    self.state = states.FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nexports.reject = function (self, error) {\n  self.state = states.REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && typeof obj === 'object' && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n","module.exports = exports = require('./promise');\n\nexports.resolve = require('./resolve');\nexports.reject = require('./reject');\nexports.all = require('./all');\nexports.race = require('./race');\n","'use strict';\n\nvar unwrap = require('./unwrap');\nvar INTERNAL = require('./INTERNAL');\nvar resolveThenable = require('./resolveThenable');\nvar states = require('./states');\nvar QueueItem = require('./queueItem');\n\nmodule.exports = Promise;\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    return new Promise(resolver);\n  }\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = states.PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    resolveThenable.safely(this, resolver);\n  }\n}\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === states.FULFILLED ||\n    typeof onRejected !== 'function' && this.state === states.REJECTED) {\n    return this;\n  }\n  var promise = new Promise(INTERNAL);\n  if (this.state !== states.PENDING) {\n    var resolver = this.state === states.FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\n","'use strict';\nvar handlers = require('./handlers');\nvar unwrap = require('./unwrap');\n\nmodule.exports = QueueItem;\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n","'use strict';\nvar Promise = require('./promise');\nvar reject = require('./reject');\nvar resolve = require('./resolve');\nvar INTERNAL = require('./INTERNAL');\nvar handlers = require('./handlers');\nmodule.exports = race;\nfunction race(iterable) {\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return resolve([]);\n  }\n\n  var i = -1;\n  var promise = new Promise(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n","'use strict';\n\nvar Promise = require('./promise');\nvar INTERNAL = require('./INTERNAL');\nvar handlers = require('./handlers');\nmodule.exports = reject;\n\nfunction reject(reason) {\n\tvar promise = new Promise(INTERNAL);\n\treturn handlers.reject(promise, reason);\n}","'use strict';\n\nvar Promise = require('./promise');\nvar INTERNAL = require('./INTERNAL');\nvar handlers = require('./handlers');\nmodule.exports = resolve;\n\nvar FALSE = handlers.resolve(new Promise(INTERNAL), false);\nvar NULL = handlers.resolve(new Promise(INTERNAL), null);\nvar UNDEFINED = handlers.resolve(new Promise(INTERNAL), void 0);\nvar ZERO = handlers.resolve(new Promise(INTERNAL), 0);\nvar EMPTYSTRING = handlers.resolve(new Promise(INTERNAL), '');\n\nfunction resolve(value) {\n  if (value) {\n    if (value instanceof Promise) {\n      return value;\n    }\n    return handlers.resolve(new Promise(INTERNAL), value);\n  }\n  var valueType = typeof value;\n  switch (valueType) {\n    case 'boolean':\n      return FALSE;\n    case 'undefined':\n      return UNDEFINED;\n    case 'object':\n      return NULL;\n    case 'number':\n      return ZERO;\n    case 'string':\n      return EMPTYSTRING;\n  }\n}","'use strict';\nvar handlers = require('./handlers');\nvar tryCatch = require('./tryCatch');\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n  \n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\nexports.safely = safelyResolveThenable;","// Lazy man's symbols for states\n\nexports.REJECTED = ['REJECTED'];\nexports.FULFILLED = ['FULFILLED'];\nexports.PENDING = ['PENDING'];\n","'use strict';\n\nmodule.exports = tryCatch;\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}","'use strict';\n\nvar immediate = require('immediate');\nvar handlers = require('./handlers');\nmodule.exports = unwrap;\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}","'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n","//    PouchDB 3.6.0\n//    \n//    (c) 2012-2015 Dale Harvey and the PouchDB team\n//    PouchDB may be freely distributed under the Apache license, version 2.0.\n//    For all details and documentation:\n//    http://pouchdb.com\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var t;t=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,t.PouchDB=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c=\"function\"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error(\"Cannot find module '\"+s+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i=\"function\"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){(function(n){\"use strict\";function r(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n)===!0)return e[n];return!1}function o(e){return function(t,n){t||n[0]&&n[0].error?e(t||n[0]):e(null,n.length?n[0]:n)}}function i(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),o=0;o<r.length;o++){var i=r[o];n._attachments[i]=l.pick(n._attachments[i],[\"data\",\"digest\",\"content_type\",\"revpos\",\"stub\"])}}}function s(e,t){var n=l.compare(e._id,t._id);if(0!==n)return n;var r=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return l.compare(r,o)}function a(e){var t={},n=[];return d.traverseRevTree(e,function(e,r,o,i){var s=r+\"-\"+o;return e&&(t[s]=0),void 0!==i&&n.push({from:i,to:s}),s}),n.reverse(),n.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function c(e,t,n){var r=\"limit\"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&r.reverse(),!r.length)return e._allDocs({limit:0},n);var o={offset:t.skip};return _.all(r.map(function(n){var r=l.extend(!0,{key:n,deleted:\"ok\"},t);return[\"limit\",\"skip\",\"keys\"].forEach(function(e){delete r[e]}),new _(function(t,i){e._allDocs(r,function(e,r){return e?i(e):(o.total_rows=r.total_rows,void t(r.rows[0]||{key:n,error:\"not_found\"}))})})})).then(function(e){return o.rows=e,o})}function u(e){var t=e._compactionQueue[0],r=t.opts,o=t.callback;e.get(\"_local/compaction\")[\"catch\"](function(){return!1}).then(function(t){t&&t.last_seq&&(r.last_seq=t.last_seq),e._compact(r,function(t,r){t?o(t):o(null,r),n.nextTick(function(){e._compactionQueue.shift(),e._compactionQueue.length&&u(e)})})})}function f(){h.call(this)}var l=e(48),d=e(37),p=e(24),h=e(52).EventEmitter,v=e(33),m=e(13),_=l.Promise;l.inherits(f,h),t.exports=f,f.prototype.post=l.adapterFun(\"post\",function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),\"object\"!=typeof e||Array.isArray(e)?n(p.error(p.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,o(n))}),f.prototype.put=l.adapterFun(\"put\",l.getArguments(function(e){var t,n,r,i,s=e.shift(),a=\"_id\"in s;if(\"object\"!=typeof s||Array.isArray(s))return(i=e.pop())(p.error(p.NOT_AN_OBJECT));for(s=l.clone(s);;)if(t=e.shift(),n=typeof t,\"string\"!==n||a?\"string\"!==n||!a||\"_rev\"in s?\"object\"===n?r=t:\"function\"===n&&(i=t):s._rev=t:(s._id=t,a=!0),!e.length)break;r=r||{};var c=l.invalidIdError(s._id);return c?i(c):l.isLocalId(s._id)&&\"function\"==typeof this._putLocal?s._deleted?this._removeLocal(s,i):this._putLocal(s,i):void this.bulkDocs({docs:[s]},r,o(i))})),f.prototype.putAttachment=l.adapterFun(\"putAttachment\",function(e,t,n,r,o,i){function s(e){return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:r},a.put(e)}var a=this;return\"function\"==typeof o&&(i=o,o=r,r=n,n=null),\"undefined\"==typeof o&&(o=r,r=n,n=null),a.get(e).then(function(e){if(e._rev!==n)throw p.error(p.REV_CONFLICT);return s(e)},function(t){if(t.reason===p.MISSING_DOC.message)return s({_id:e});throw t})}),f.prototype.removeAttachment=l.adapterFun(\"removeAttachment\",function(e,t,n,r){var o=this;o.get(e,function(e,i){return e?void r(e):i._rev!==n?void r(p.error(p.REV_CONFLICT)):i._attachments?(delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,r)):r()})}),f.prototype.remove=l.adapterFun(\"remove\",function(e,t,n,r){var i;\"string\"==typeof t?(i={_id:e,_rev:t},\"function\"==typeof n&&(r=n,n={})):(i=e,\"function\"==typeof t?(r=t,n={}):(r=n,n=t)),n=l.clone(n||{}),n.was_delete=!0;var s={_id:i._id,_rev:i._rev||n.rev};return s._deleted=!0,l.isLocalId(s._id)&&\"function\"==typeof this._removeLocal?this._removeLocal(i,r):void this.bulkDocs({docs:[s]},n,o(r))}),f.prototype.revsDiff=l.adapterFun(\"revsDiff\",function(e,t,n){function r(e,t){a.has(e)||a.set(e,{missing:[]}),a.get(e).missing.push(t)}function o(t,n){var o=e[t].slice(0);d.traverseRevTree(n,function(e,n,i,s,a){var c=n+\"-\"+i,u=o.indexOf(c);-1!==u&&(o.splice(u,1),\"available\"!==a.status&&r(t,c))}),o.forEach(function(e){r(t,e)})}\"function\"==typeof t&&(n=t,t={}),t=l.clone(t);var i=Object.keys(e);if(!i.length)return n(null,{});var s=0,a=new l.Map;i.map(function(t){this._getRevisionTree(t,function(r,c){if(r&&404===r.status&&\"missing\"===r.message)a.set(t,{missing:e[t]});else{if(r)return n(r);o(t,c)}if(++s===i.length){var u={};return a.forEach(function(e,t){u[t]=e}),n(null,u)}})},this)}),f.prototype.compactDocument=l.adapterFun(\"compactDocument\",function(e,t,n){var r=this;this._getRevisionTree(e,function(o,i){if(o)return n(o);var s=a(i),c=[],u=[];Object.keys(s).forEach(function(e){s[e]>t&&c.push(e)}),d.traverseRevTree(i,function(e,t,n,r,o){var i=t+\"-\"+n;\"available\"===o.status&&-1!==c.indexOf(i)&&u.push(i)}),r._doCompaction(e,u,n)})}),f.prototype.compact=l.adapterFun(\"compact\",function(e,t){\"function\"==typeof e&&(t=e,e={});var n=this;e=l.clone(e||{}),n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),1===n._compactionQueue.length&&u(n)}),f.prototype._compact=function(e,t){function n(e){s.push(o.compactDocument(e.id,0))}function r(e){var n=e.last_seq;_.all(s).then(function(){return v(o,\"_local/compaction\",function(e){return!e.last_seq||e.last_seq<n?(e.last_seq=n,e):!1})}).then(function(){t(null,{ok:!0})})[\"catch\"](t)}var o=this,i={returnDocs:!1,last_seq:e.last_seq||0},s=[];o.changes(i).on(\"change\",n).on(\"complete\",r).on(\"error\",t)},f.prototype.get=l.adapterFun(\"get\",function(e,t,n){function o(){var r=[],o=i.length;return o?void i.forEach(function(i){s.get(e,{rev:i,revs:t.revs,attachments:t.attachments},function(e,t){e?r.push({missing:i}):r.push({ok:t}),o--,o||n(null,r)})}):n(null,r)}if(\"function\"==typeof t&&(n=t,t={}),\"string\"!=typeof e)return n(p.error(p.INVALID_ID));if(l.isLocalId(e)&&\"function\"==typeof this._getLocal)return this._getLocal(e,n);var i=[],s=this;if(!t.open_revs)return this._get(e,t,function(e,o){if(t=l.clone(t),e)return n(e);var i=o.doc,a=o.metadata,c=o.ctx;if(t.conflicts){var u=d.collectConflicts(a);u.length&&(i._conflicts=u)}if(l.isDeleted(a,i._rev)&&(i._deleted=!0),t.revs||t.revs_info){var f=d.rootToLeaf(a.rev_tree),p=r(f,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(i._rev.split(\"-\")[1])}),h=p.ids.map(function(e){return e.id}).indexOf(i._rev.split(\"-\")[1])+1,v=p.ids.length-h;if(p.ids.splice(h,v),p.ids.reverse(),t.revs&&(i._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map(function(e){return e.id})}),t.revs_info){var m=p.pos+p.ids.length;i._revs_info=p.ids.map(function(e){return m--,{rev:m+\"-\"+e.id,status:e.opts.status}})}}if(t.local_seq&&(l.info('The \"local_seq\" option is deprecated and will be removed'),i._local_seq=o.metadata.seq),t.attachments&&i._attachments){var _=i._attachments,g=Object.keys(_).length;if(0===g)return n(null,i);Object.keys(_).forEach(function(e){this._getAttachment(_[e],{encode:!0,ctx:c},function(t,r){var o=i._attachments[e];o.data=r,delete o.stub,delete o.length,--g||n(null,i)})},s)}else{if(i._attachments)for(var y in i._attachments)i._attachments.hasOwnProperty(y)&&(i._attachments[y].stub=!0);n(null,i)}});if(\"all\"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?n(e):(i=d.collectLeaves(t).map(function(e){return e.rev}),void o())});else{if(!Array.isArray(t.open_revs))return n(p.error(p.UNKNOWN_ERROR,\"function_clause\"));i=t.open_revs;for(var a=0;a<i.length;a++){var c=i[a];if(\"string\"!=typeof c||!/^\\d+-/.test(c))return n(p.error(p.INVALID_REV))}o()}}),f.prototype.getAttachment=l.adapterFun(\"getAttachment\",function(e,t,n,r){var o=this;n instanceof Function&&(r=n,n={}),n=l.clone(n),this._get(e,n,function(e,i){return e?r(e):i.doc._attachments&&i.doc._attachments[t]?(n.ctx=i.ctx,void o._getAttachment(i.doc._attachments[t],n,r)):r(p.error(p.MISSING_DOC))})}),f.prototype.allDocs=l.adapterFun(\"allDocs\",function(e,t){if(\"function\"==typeof e&&(t=e,e={}),e=l.clone(e),e.skip=\"undefined\"!=typeof e.skip?e.skip:0,\"keys\"in e){if(!Array.isArray(e.keys))return t(new TypeError(\"options.keys must be an array\"));var n=[\"startkey\",\"endkey\",\"key\"].filter(function(t){return t in e})[0];if(n)return void t(p.error(p.QUERY_PARSE_ERROR,\"Query parameter `\"+n+\"` is not compatible with multi-get\"));if(\"http\"!==this.type())return c(this,e,t)}return this._allDocs(e,t)}),f.prototype.changes=function(e,t){return\"function\"==typeof e&&(t=e,e={}),new m(this,e,t)},f.prototype.close=l.adapterFun(\"close\",function(e){return this._closed=!0,this._close(e)}),f.prototype.info=l.adapterFun(\"info\",function(e){var t=this;this._info(function(n,r){return n?e(n):(r.db_name=r.db_name||t._db_name,r.auto_compaction=!(!t.auto_compaction||\"http\"===t.type()),void e(null,r))})}),f.prototype.id=l.adapterFun(\"id\",function(e){return this._id(e)}),f.prototype.type=function(){return\"function\"==typeof this._type?this._type():this.adapter},f.prototype.bulkDocs=l.adapterFun(\"bulkDocs\",function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),t=l.clone(t),Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(p.error(p.MISSING_BULK_DOCS));for(var r=0;r<e.docs.length;++r)if(\"object\"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(p.error(p.NOT_AN_OBJECT));return e=l.clone(e),\"new_edits\"in t||(\"new_edits\"in e?t.new_edits=e.new_edits:t.new_edits=!0),t.new_edits||\"http\"===this.type()||e.docs.sort(s),i(e.docs),this._bulkDocs(e,t,function(e,r){return e?n(e):(t.new_edits||(r=r.filter(function(e){return e.error})),void n(null,r))})}),f.prototype.registerDependentDatabase=l.adapterFun(\"registerDependentDatabase\",function(e,t){function n(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var r=new this.constructor(e,this.__opts);v(this,\"_local/_pouch_dependentDbs\",n,function(e){return e?t(e):t(null,{db:r})})}),f.prototype.destroy=l.adapterFun(\"destroy\",function(e){function t(){n._destroy(function(t,r){return t?e(t):(n.emit(\"destroyed\"),void e(null,r||{ok:!0}))})}var n=this,r=\"use_prefix\"in n?n.use_prefix:!0;n.get(\"_local/_pouch_dependentDbs\",function(o,i){if(o)return 404!==o.status?e(o):t();var s=i.dependentDbs,a=n.constructor,c=Object.keys(s).map(function(e){var t=r?e.replace(new RegExp(\"^\"+a.prefix),\"\"):e;return new a(t,n.__opts).destroy()});_.all(c).then(t,function(t){e(t)})})})}).call(this,e(53))},{13:13,24:24,33:33,37:37,48:48,52:52,53:53}],2:[function(e,t,n){(function(n){\"use strict\";function r(e){return w?new v(function(t){d(e,function(e){t(g(e))})}):v.resolve(e.toString(\"base64\"))}function o(e){return/^_design/.test(e)?\"_design/\"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?\"_local/\"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function i(e){return e._attachments&&Object.keys(e._attachments)?v.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];return n.data&&\"string\"!=typeof n.data?r(n.data).then(function(e){n.data=e}):void 0})):v.resolve()}function s(e,t){if(/http(s?):/.test(e)){var n=h.parseUri(e);n.remote=!0,(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var r=n.path.replace(/(^\\/|\\/$)/g,\"\").split(\"/\");if(n.db=r.pop(),n.path=r.join(\"/\"),t=t||{},t=m(t),n.headers=t.headers||t.ajax&&t.ajax.headers||{},t.auth||n.auth){var o=t.auth||n.auth,i=g(o.username+\":\"+o.password);n.headers.Authorization=\"Basic \"+i}return t.headers&&(n.headers=t.headers),n}return{host:\"\",path:\"/\",db:e,auth:!1}}function a(e,t){return c(e,e.db+\"/\"+t)}function c(e,t){if(e.remote){var n=e.path?\"/\":\"\";return e.protocol+\"://\"+e.host+\":\"+e.port+\"/\"+e.path+n+t}return\"/\"+t}function u(e,t){function n(e,t){var n=h.extend(!0,m(O),e);return E(n.method+\" \"+n.url),h.ajax(n,t)}function u(e){return new v(function(t,r){n(e,function(e,n){return e?r(e):void t(n)})})}function d(e){return e.split(\"/\").map(encodeURIComponent).join(\"/\")}var _=this;_.getHost=e.getHost?e.getHost:s;var g=_.getHost(e.name,e),x=a(g,\"\");_.getUrl=function(){return x},_.getHeaders=function(){return m(g.headers)};var O=e.ajax||{};e=m(e);var A=function(){n({headers:m(g.headers),method:\"PUT\",url:x},function(e){e&&401===e.status?n({headers:m(g.headers),method:\"HEAD\",url:x},function(e){e?t(e):t(null,_)}):e&&412!==e.status?t(e):t(null,_)})};e.skipSetup||n({headers:m(g.headers),method:\"GET\",url:x},function(e){e?404===e.status?(h.explain404(\"PouchDB is just detecting if the remote DB exists.\"),A()):t(e):t(null,_)}),_.type=function(){return\"http\"},_.id=h.adapterFun(\"id\",function(e){n({headers:m(g.headers),method:\"GET\",url:c(g,\"\")},function(t,n){if(t)return e(t);var r=n&&n.uuid?n.uuid+g.db:a(g,\"\");e(null,r)})}),_.request=h.adapterFun(\"request\",function(e,t){e.headers=g.headers,e.url=a(g,e.url),n(e,t)}),_.compact=h.adapterFun(\"compact\",function(e,t){\"function\"==typeof e&&(t=e,e={}),e=m(e),n({headers:m(g.headers),url:a(g,\"_compact\"),method:\"POST\"},function(){function n(){_.info(function(r,o){o.compact_running?setTimeout(n,e.interval||200):t(null,{ok:!0})})}\"function\"==typeof t&&n()})}),_._info=function(e){n({headers:m(g.headers),method:\"GET\",url:a(g,\"\")},function(t,n){t?e(t):(n.host=a(g,\"\"),e(null,n))})},_.get=h.adapterFun(\"get\",function(e,t,n){function i(e){var t=e._attachments,n=t&&Object.keys(t);return t&&n.length?v.all(n.map(function(n){var i=t[n],s=o(e._id)+\"/\"+d(n)+\"?rev=\"+e._rev;return u({headers:m(g.headers),method:\"GET\",url:a(g,s),binary:!0}).then(r).then(function(e){delete i.stub,delete i.length,i.data=e})})):void 0}function s(e){return Array.isArray(e)?v.all(e.map(function(e){return e.ok?i(e.ok):void 0})):i(e)}\"function\"==typeof t&&(n=t,t={}),t=m(t);var c=[];t.revs&&c.push(\"revs=true\"),t.revs_info&&c.push(\"revs_info=true\"),t.local_seq&&c.push(\"local_seq=true\"),t.open_revs&&(\"all\"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),c.push(\"open_revs=\"+t.open_revs)),t.rev&&c.push(\"rev=\"+t.rev),t.conflicts&&c.push(\"conflicts=\"+t.conflicts),c=c.join(\"&\"),c=\"\"===c?\"\":\"?\"+c,e=o(e);var f={headers:m(g.headers),method:\"GET\",url:a(g,e+c)},l=t.ajax||{};h.extend(!0,f,l),u(f).then(function(e){return v.resolve().then(function(){return t.attachments?s(e):void 0}).then(function(){n(null,e)})})[\"catch\"](n)}),_.remove=h.adapterFun(\"remove\",function(e,t,r,i){var s;\"string\"==typeof t?(s={_id:e,_rev:t},\"function\"==typeof r&&(i=r,r={})):(s=e,\"function\"==typeof t?(i=t,r={}):(i=r,r=t));var c=s._rev||r.rev;n({headers:m(g.headers),method:\"DELETE\",url:a(g,o(s._id))+\"?rev=\"+c},i)}),_.getAttachment=h.adapterFun(\"getAttachment\",function(e,t,r,i){\"function\"==typeof r&&(i=r,r={});var s=r.rev?\"?rev=\"+r.rev:\"\",c=a(g,o(e))+\"/\"+d(t)+s;n({headers:m(g.headers),method:\"GET\",url:c,binary:!0},i)}),_.removeAttachment=h.adapterFun(\"removeAttachment\",function(e,t,r,i){var s=a(g,o(e)+\"/\"+d(t))+\"?rev=\"+r;n({headers:m(g.headers),method:\"DELETE\",url:s},i)}),_.putAttachment=h.adapterFun(\"putAttachment\",function(e,t,r,i,s,c){\"function\"==typeof s&&(c=s,s=i,i=r,r=null),\"undefined\"==typeof s&&(s=i,i=r,r=null);var u=o(e)+\"/\"+d(t),f=a(g,u);if(r&&(f+=\"?rev=\"+r),\"string\"==typeof i){var l;try{l=y(i)}catch(h){return c(b.error(b.BAD_ARG,\"Attachments need to be base64 encoded\"))}i=w?p(l,s):l?new S(l,\"binary\"):\"\"}var v={headers:m(g.headers),method:\"PUT\",url:f,processData:!1,body:i,timeout:6e4};v.headers[\"Content-Type\"]=s,n(v,c)}),_.put=h.adapterFun(\"put\",h.getArguments(function(e){var t,n,r,s=e.shift(),c=\"_id\"in s,f=e.pop();return\"object\"!=typeof s||Array.isArray(s)?f(b.error(b.NOT_AN_OBJECT)):(s=m(s),void i(s).then(function(){for(;;)if(t=e.shift(),n=typeof t,\"string\"!==n||c?\"string\"!==n||!c||\"_rev\"in s?\"object\"===n&&(r=m(t)):s._rev=t:(s._id=t,c=!0),!e.length)break;r=r||{};var i=h.invalidIdError(s._id);if(i)throw i;var l=[];r&&\"undefined\"!=typeof r.new_edits&&l.push(\"new_edits=\"+r.new_edits),l=l.join(\"&\"),\"\"!==l&&(l=\"?\"+l);var d={headers:m(g.headers),method:\"PUT\",url:a(g,o(s._id))+l,body:s};return v.resolve().then(function(){var e=s._attachments&&Object.keys(s._attachments).filter(function(e){return!s._attachments[e].stub}).length;if(e){var t=T(s);d.body=t.body,d.processData=!1,d.headers=h.extend(d.headers,t.headers)}})[\"catch\"](function(){throw new Error(\"Did you forget to base64-encode an attachment?\")}).then(function(){return u(d)}).then(function(e){e.ok=!0,f(null,e)})})[\"catch\"](f))})),_.post=h.adapterFun(\"post\",function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=m(t),\"object\"!=typeof e?n(b.error(b.NOT_AN_OBJECT)):(\"_id\"in e||(e._id=h.uuid()),void _.put(e,t,function(e,t){return e?n(e):(t.ok=!0,void n(null,t))}))}),_._bulkDocs=function(e,t,r){\"undefined\"!=typeof t.new_edits&&(e.new_edits=t.new_edits),v.all(e.docs.map(i)).then(function(){n({headers:m(g.headers),method:\"POST\",url:a(g,\"_bulk_docs\"),body:e},function(e,t){return e?r(e):(t.forEach(function(e){e.ok=!0}),void r(null,t))})})[\"catch\"](r)},_.allDocs=h.adapterFun(\"allDocs\",function(e,t){\"function\"==typeof e&&(t=e,e={}),e=m(e);var r,o=[],i=\"GET\";if(e.conflicts&&o.push(\"conflicts=true\"),e.descending&&o.push(\"descending=true\"),e.include_docs&&o.push(\"include_docs=true\"),e.attachments&&o.push(\"attachments=true\"),e.key&&o.push(\"key=\"+encodeURIComponent(JSON.stringify(e.key))),e.startkey&&o.push(\"startkey=\"+encodeURIComponent(JSON.stringify(e.startkey))),e.endkey&&o.push(\"endkey=\"+encodeURIComponent(JSON.stringify(e.endkey))),\"undefined\"!=typeof e.inclusive_end&&o.push(\"inclusive_end=\"+!!e.inclusive_end),\"undefined\"!=typeof e.limit&&o.push(\"limit=\"+e.limit),\"undefined\"!=typeof e.skip&&o.push(\"skip=\"+e.skip),o=o.join(\"&\"),\"\"!==o&&(o=\"?\"+o),\"undefined\"!=typeof e.keys){var s=\"keys=\"+encodeURIComponent(JSON.stringify(e.keys));s.length+o.length+1<=l?o+=(-1!==o.indexOf(\"?\")?\"&\":\"?\")+s:(i=\"POST\",r=JSON.stringify({keys:e.keys}))}n({headers:m(g.headers),method:i,url:a(g,\"_all_docs\"+o),body:r},t)}),_._changes=function(e){var t=\"batch_size\"in e?e.batch_size:f;e=m(e),e.timeout=e.timeout||3e4;var r={timeout:e.timeout-5e3},o=\"undefined\"!=typeof e.limit?e.limit:!1;0===o&&(o=1);var i;i=\"returnDocs\"in e?e.returnDocs:!0;var s=o;if(e.style&&(r.style=e.style),(e.include_docs||e.filter&&\"function\"==typeof e.filter)&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.continuous&&(r.feed=\"longpoll\"),e.conflicts&&(r.conflicts=!0),e.descending&&(r.descending=!0),e.filter&&\"string\"==typeof e.filter&&(r.filter=e.filter,\"_view\"===e.filter&&e.view&&\"string\"==typeof e.view&&(r.view=e.view)),e.query_params&&\"object\"==typeof e.query_params)for(var c in e.query_params)e.query_params.hasOwnProperty(c)&&(r[c]=e.query_params[c]);var u,d=\"GET\";if(e.doc_ids){r.filter=\"_doc_ids\";var p=JSON.stringify(e.doc_ids);p.length<l?r.doc_ids=p:(d=\"POST\",u={doc_ids:e.doc_ids})}if(e.continuous&&_._useSSE)return _.sse(e,r,i);var v,y,E=function(i,c){if(!e.aborted){r.since=i,\"object\"==typeof r.since&&(r.since=JSON.stringify(r.since)),e.descending?o&&(r.limit=s):r.limit=!o||s>t?t:s;var f=\"?\"+Object.keys(r).map(function(e){return e+\"=\"+r[e]}).join(\"&\"),l={headers:m(g.headers),method:d,url:a(g,\"_changes\"+f),timeout:e.timeout,body:u};y=i,e.aborted||(v=n(l,c))}},w=10,S=0,T={results:[]},x=function(n,r){if(!e.aborted){var a=0;if(r&&r.results){a=r.results.length,T.last_seq=r.last_seq;var c={};c.query=e.query_params,r.results=r.results.filter(function(t){s--;var n=h.filterChange(e)(t);return n&&(i&&T.results.push(t),h.call(e.onChange,t)),n})}else if(n)return e.aborted=!0,void h.call(e.complete,n);r&&r.last_seq&&(y=r.last_seq);var u=o&&0>=s||r&&t>a||e.descending;if((!e.continuous||o&&0>=s)&&u)h.call(e.complete,null,T);else{n?S+=1:S=0;var f=1<<S,l=w*f,d=e.maximumWait||3e4;if(l>d)return void h.call(e.complete,n||b.error(b.UNKNOWN_ERROR));setTimeout(function(){E(y,x)},l)}}};return E(e.since||0,x),{cancel:function(){e.aborted=!0,v&&v.abort()}}},_.sse=function(e,t,n){function r(t){var r=JSON.parse(t.data);n&&u.results.push(r),u.last_seq=r.seq,h.call(e.onChange,r)}function o(t){return c.removeEventListener(\"message\",r,!1),l===!1?(_._useSSE=!1,void(f=_._changes(e))):(c.close(),void h.call(e.complete,t))}t.feed=\"eventsource\",t.since=e.since||0,t.limit=e.limit,delete t.timeout;var i=\"?\"+Object.keys(t).map(function(e){return e+\"=\"+t[e]}).join(\"&\"),s=a(g,\"_changes\"+i),c=new EventSource(s),u={results:[],last_seq:!1},f=!1,l=!1;return c.addEventListener(\"message\",r,!1),c.onopen=function(){l=!0},c.onerror=o,{cancel:function(){return f?f.cancel():(c.removeEventListener(\"message\",r,!1),void c.close())}}},_._useSSE=!1,_.revsDiff=h.adapterFun(\"revsDiff\",function(e,t,r){\"function\"==typeof t&&(r=t,t={}),n({headers:m(g.headers),method:\"POST\",url:a(g,\"_revs_diff\"),body:JSON.stringify(e)},r)}),_._close=function(e){e()},_._destroy=function(t){n({url:a(g,\"\"),method:\"DELETE\",headers:m(g.headers)},function(n,r){n?(_.emit(\"error\",n),t(n)):(_.emit(\"destroyed\"),_.constructor.emit(\"destroyed\",e.name),t(null,r))})}}var f=25,l=1800,d=e(22),p=e(19),h=e(48),v=h.Promise,m=h.clone,_=e(17),g=_.btoa,y=_.atob,b=e(24),E=e(54)(\"pouchdb:http\"),w=\"undefined\"==typeof n||n.browser,S=e(23),T=e(27);u.valid=function(){return!0},t.exports=u}).call(this,e(53))},{17:17,19:19,22:22,23:23,24:24,27:27,48:48,53:53,54:54}],3:[function(e,t,n){\"use strict\";function r(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(i){return{error:i}}return null}function o(e,t,n,r){return\"DataError\"===n.name&&0===n.code?r(null,{total_rows:e._meta.docCount,offset:t.skip,rows:[]}):void r(a.error(a.IDB_ERROR,n.name,n.message))}function i(e,t,n,i){function a(e,i){function a(t,n,r){var o=t.id+\"::\"+r;L.get(o).onsuccess=function(r){n.doc=p(r.target.result),e.conflicts&&(n.doc._conflicts=s.collectConflicts(t)),v(n.doc,e,R)}}function c(t,n,r){var o={id:r.id,key:r.id,value:{rev:n}},i=r.deleted;if(\"ok\"===e.deleted)N.push(o),i?(o.value.deleted=!0,o.doc=null):e.include_docs&&a(r,o,n);else if(!i&&S--<=0&&(N.push(o),e.include_docs&&a(r,o,n),0===--T))return;t[\"continue\"]()}function u(e){j=t._meta.docCount;var n=e.target.result;if(n){var r=h(n.value),o=r.winningRev;c(n,o,r)}}function g(){i(null,{total_rows:j,offset:e.skip,rows:N})}function y(){e.attachments?m(N).then(g):g()}var b=\"startkey\"in e?e.startkey:!1,E=\"endkey\"in e?e.endkey:!1,w=\"key\"in e?e.key:!1,S=e.skip||0,T=\"number\"==typeof e.limit?e.limit:-1,x=e.inclusive_end!==!1,O=\"descending\"in e&&e.descending?\"prev\":null,A=r(b,E,x,w,O);if(A&&A.error)return o(t,e,A.error,i);var k=[d,l];e.attachments&&k.push(f);var q=_(n,k,\"readonly\");if(q.error)return i(q.error);var R=q.txn,C=R.objectStore(d),D=R.objectStore(l),I=O?C.openCursor(A,O):C.openCursor(A),L=D.index(\"_doc_id_rev\"),N=[],j=0;R.oncomplete=y,I.onsuccess=u}function c(e,n){return 0===e.limit?n(null,{total_rows:t._meta.docCount,offset:e.skip,rows:[]}):void a(e,n)}c(e,i)}var s=e(37),a=e(24),c=e(7),u=e(6),f=u.ATTACH_STORE,l=u.BY_SEQ_STORE,d=u.DOC_STORE,p=c.decodeDoc,h=c.decodeMetadata,v=c.fetchAttachmentsIfNecessary,m=c.postProcessAttachments,_=c.openTransactionSafely;t.exports=i},{24:24,37:37,6:6,7:7}],4:[function(e,t,n){\"use strict\";function r(e,t){return new o.Promise(function(n,r){var i=o.createBlob([\"\"],{type:\"image/png\"});e.objectStore(s).put(i,\"key\"),e.oncomplete=function(){var e=t.transaction([s],\"readwrite\"),i=e.objectStore(s).get(\"key\");i.onerror=r,i.onsuccess=function(e){var t=e.target.result,r=URL.createObjectURL(t);o.ajax({url:r,cache:!0,binary:!0},function(e,t){e&&405===e.status?n(!0):(n(!(!t||\"image/png\"!==t.type)),e&&404===e.status&&o.explain404(\"PouchDB is just detecting blob URL support.\")),URL.revokeObjectURL(r)})}}})[\"catch\"](function(){return!1})}var o=e(48),i=e(6),s=i.DETECT_BLOB_SUPPORT_STORE;t.exports=r},{48:48,6:6}],5:[function(e,t,n){\"use strict\";function r(e,t,n,r,s,a){function y(){var e=[l,f,u,p,d,c],t=g(r,e,\"readwrite\");return t.error?a(t.error):(C=t.txn,C.onerror=_(a),C.ontimeout=_(a),C.oncomplete=w,D=C.objectStore(l),I=C.objectStore(f),L=C.objectStore(u),N=C.objectStore(c),void T(function(e){return e?(G=!0,a(e)):void E()}))}function b(){o.processDocs(B,n,H,C,J,x,t)}function E(){function e(){++n===B.length&&b()}function t(t){var n=v(t.target.result);n&&H.set(n.id,n),e()}if(B.length)for(var n=0,r=0,i=B.length;i>r;r++){var s=B[r];if(s._id&&o.isLocalId(s._id))e();else{var a=D.get(s.metadata.id);a.onsuccess=t}}}function w(){G||(s.notify(n._meta.name),n._meta.docCount+=F,a(null,J))}function S(e,t){var n=L.get(e);n.onsuccess=function(n){if(n.target.result)t();else{var r=i.error(i.MISSING_STUB,\"unknown stub attachment with digest \"+e);r.status=412,t(r)}}}function T(e){function t(){++o===n.length&&e(r)}var n=[];if(B.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,o=0;n.forEach(function(e){S(e,function(e){e&&!r&&(r=e),t()})})}function x(e,t,n,r,o,i,s,a){F+=i;var c=e.data;c._id=e.metadata.id,c._rev=e.metadata.rev,r&&(c._deleted=!0);var u=c._attachments&&Object.keys(c._attachments).length;return u?k(e,t,n,o,s,a):void A(e,t,n,o,s,a)}function O(e){var t=o.compactTree(e.metadata);h(t,e.metadata.id,C)}function A(e,t,r,o,i,s){function a(i){o&&n.auto_compaction&&O(e),l.seq=i.target.result,delete l.rev;var s=m(l,t,r),a=D.put(s);a.onsuccess=u}function c(e){e.preventDefault(),e.stopPropagation();var t=I.index(\"_doc_id_rev\"),n=t.getKey(f._doc_id_rev);n.onsuccess=function(e){var t=I.put(f,e.target.result);t.onsuccess=a}}function u(){J[i]={ok:!0,id:l.id,rev:t},H.set(e.metadata.id,e.metadata),q(e,l.seq,s)}var f=e.data,l=e.metadata;f._doc_id_rev=l.id+\"::\"+l.rev,delete f._id,delete f._rev;var d=I.put(f);d.onsuccess=a,d.onerror=c}function k(e,t,n,r,o,i){function s(){u===f.length&&A(e,t,n,r,o,i)}function a(){u++,s()}var c=e.data,u=0,f=Object.keys(c._attachments);f.forEach(function(t){var n=e.data._attachments[t];if(n.stub)u++,s();else{var r=n.data;delete n.data;var o=n.digest;R(o,r,a)}})}function q(e,t,n){function r(){++i===s.length&&n()}function o(n){var o=e.data._attachments[n].digest,i=N.put({seq:t,digestSeq:o+\"::\"+t});i.onsuccess=r,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),r()}}var i=0,s=Object.keys(e.data._attachments||{});if(!s.length)return n();for(var a=0;a<s.length;a++)o(s[a])}function R(e,t,n){var r=L.count(e);r.onsuccess=function(r){var o=r.target.result;if(o)return n();var i={digest:e,body:t},s=L.put(i);s.onsuccess=n}}for(var C,D,I,L,N,j,B=e.docs,F=0,M=0,P=B.length;P>M;M++){var U=B[M];U._id&&o.isLocalId(U._id)||(U=B[M]=o.parseDoc(U,t.new_edits),U.error&&!j&&(j=U))}if(j)return a(j);var J=new Array(B.length),H=new o.Map,G=!1,V=n._meta.blobSupport?\"blob\":\"base64\";o.preprocessAttachments(B,V,function(e){return e?a(e):void y()})}var o=e(48),i=e(24),s=e(7),a=e(6),c=a.ATTACH_AND_SEQ_STORE,u=a.ATTACH_STORE,f=a.BY_SEQ_STORE,l=a.DOC_STORE,d=a.LOCAL_STORE,p=a.META_STORE,h=s.compactRevs,v=s.decodeMetadata,m=s.encodeMetadata,_=s.idbError,g=s.openTransactionSafely;t.exports=r},{24:24,48:48,6:6,7:7}],6:[function(e,t,n){\"use strict\";n.ADAPTER_VERSION=5,n.DOC_STORE=\"document-store\",n.BY_SEQ_STORE=\"by-sequence\",n.ATTACH_STORE=\"attach-store\",n.ATTACH_AND_SEQ_STORE=\"attach-seq-store\",n.META_STORE=\"meta-store\",n.LOCAL_STORE=\"local-store\",n.DETECT_BLOB_SUPPORT_STORE=\"detect-blob-support\"},{}],7:[function(e,t,n){(function(t){\"use strict\";function r(e,t,n){try{e.apply(t,n)}catch(r){\"undefined\"!=typeof PouchDB&&PouchDB.emit(\"error\",r)}}var o=e(24),i=e(48),s=e(17),a=s.atob,c=s.btoa,u=e(6),f=e(22),l=e(18);n.taskQueue={running:!1,queue:[]},n.applyNext=function(){if(!n.taskQueue.running&&n.taskQueue.queue.length){n.taskQueue.running=!0;var e=n.taskQueue.queue.shift();e.action(function(o,i){r(e.callback,this,[o,i]),n.taskQueue.running=!1,t.nextTick(n.applyNext)})}},n.idbError=function(e){return function(t){var n=t.target&&t.target.error&&t.target.error.name||t.target;e(o.error(o.IDB_ERROR,n,t.type))}},n.encodeMetadata=function(e,t,n){return{data:i.safeJsonStringify(e),winningRev:t,deletedOrLocal:n?\"1\":\"0\",seq:e.seq,id:e.id}},n.decodeMetadata=function(e){if(!e)return null;var t=i.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deleted=\"1\"===e.deletedOrLocal,t.seq=e.seq,t},n.decodeDoc=function(e){if(!e)return e;var t=i.lastIndexOf(e._doc_id_rev,\":\");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e},n.readBlobData=function(e,t,n,r){n?e?\"string\"!=typeof e?f(e,function(e){r(c(e))}):r(e):r(\"\"):e?\"string\"!=typeof e?r(e):(e=l(a(e)),r(i.createBlob([e],{type:t}))):r(i.createBlob([\"\"],{type:t}))},n.fetchAttachmentsIfNecessary=function(e,t,n,r){function o(){++a===s.length&&r&&r()}function i(e,t){var r=e._attachments[t],i=r.digest,s=n.objectStore(u.ATTACH_STORE).get(i);s.onsuccess=function(e){r.body=e.target.result.body,o()}}var s=Object.keys(e._attachments||{});if(!s.length)return r&&r();var a=0;s.forEach(function(n){t.attachments&&t.include_docs?i(e,n):(e._attachments[n].stub=!0,o())})},n.postProcessAttachments=function(e){return i.Promise.all(e.map(function(e){if(e.doc&&e.doc._attachments){var t=Object.keys(e.doc._attachments);return i.Promise.all(t.map(function(t){var r=e.doc._attachments[t];if(\"body\"in r){var o=r.body,s=r.content_type;return new i.Promise(function(a){n.readBlobData(o,s,!0,function(n){e.doc._attachments[t]=i.extend(i.pick(r,[\"digest\",\"content_type\"]),{data:n}),a()})})}}))}}))},n.compactRevs=function(e,t,n){function r(){f--,f||o()}function o(){i.length&&i.forEach(function(e){var t=c.index(\"digestSeq\").count(IDBKeyRange.bound(e+\"::\",e+\"::￿\",!1,!1));t.onsuccess=function(t){var n=t.target.result;n||a[\"delete\"](e)}})}var i=[],s=n.objectStore(u.BY_SEQ_STORE),a=n.objectStore(u.ATTACH_STORE),c=n.objectStore(u.ATTACH_AND_SEQ_STORE),f=e.length;e.forEach(function(e){var n=s.index(\"_doc_id_rev\"),o=t+\"::\"+e;n.getKey(o).onsuccess=function(e){var t=e.target.result;if(\"number\"!=typeof t)return r();s[\"delete\"](t);var n=c.index(\"seq\").openCursor(IDBKeyRange.only(t));n.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split(\"::\")[0];i.push(n),c[\"delete\"](t.primaryKey),t[\"continue\"]()}else r()}}})},n.openTransactionSafely=function(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}}).call(this,e(53))},{17:17,18:18,22:22,24:24,48:48,53:53,6:6}],8:[function(e,t,n){(function(n){\"use strict\";function r(e,t){var n=this;C.queue.push({action:function(t){o(n,e,t)},callback:t}),w()}function o(e,t,o){function u(e){var t=e.createObjectStore(y,{keyPath:\"id\"});e.createObjectStore(_,{autoIncrement:!0}).createIndex(\"_doc_id_rev\",\"_doc_id_rev\",{unique:!0}),e.createObjectStore(m,{keyPath:\"digest\"}),e.createObjectStore(E,{keyPath:\"id\",autoIncrement:!1}),e.createObjectStore(g),t.createIndex(\"deletedOrLocal\",\"deletedOrLocal\",{unique:!1}),e.createObjectStore(b,{keyPath:\"_id\"});var n=e.createObjectStore(v,{autoIncrement:!0});n.createIndex(\"seq\",\"seq\"),n.createIndex(\"digestSeq\",\"digestSeq\",{unique:!0})}function f(e,t){var n=e.objectStore(y);n.createIndex(\"deletedOrLocal\",\"deletedOrLocal\",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var o=r.value,i=s.isDeleted(o);o.deletedOrLocal=i?\"1\":\"0\",n.put(o),r[\"continue\"]()}else t()}}function w(e){e.createObjectStore(b,{keyPath:\"_id\"}).createIndex(\"_doc_id_rev\",\"_doc_id_rev\",{unique:!0})}function C(e,t){var n=e.objectStore(b),r=e.objectStore(y),o=e.objectStore(_),i=r.openCursor();i.onsuccess=function(e){var i=e.target.result;if(i){var c=i.value,u=c.id,f=s.isLocalId(u),l=a.winningRev(c);\nif(f){var d=u+\"::\"+l,p=u+\"::\",h=u+\"::~\",v=o.index(\"_doc_id_rev\"),m=IDBKeyRange.bound(p,h,!1,!1),_=v.openCursor(m);_.onsuccess=function(e){if(_=e.target.result){var t=_.value;t._doc_id_rev===d&&n.put(t),o[\"delete\"](_.primaryKey),_[\"continue\"]()}else r[\"delete\"](i.primaryKey),i[\"continue\"]()}}else i[\"continue\"]()}else t&&t()}}function L(e){var t=e.createObjectStore(v,{autoIncrement:!0});t.createIndex(\"seq\",\"seq\"),t.createIndex(\"digestSeq\",\"digestSeq\",{unique:!0})}function N(e,t){var n=e.objectStore(_),r=e.objectStore(m),o=e.objectStore(v),i=r.count();i.onsuccess=function(e){var r=e.target.result;return r?void(n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,i=n.primaryKey,s=Object.keys(r._attachments||{}),a={},c=0;c<s.length;c++){var u=r._attachments[s[c]];a[u.digest]=!0}var f=Object.keys(a);for(c=0;c<f.length;c++){var l=f[c];o.put({seq:i,digestSeq:l+\"::\"+i})}n[\"continue\"]()}):t()}}function j(e){function t(e){return e.data?x(e):(e.deleted=\"1\"===e.deletedOrLocal,e)}var n=e.objectStore(_),r=e.objectStore(y),o=r.openCursor();o.onsuccess=function(e){function o(){var e=c.id+\"::\",t=c.id+\"::￿\",r=n.index(\"_doc_id_rev\").openCursor(IDBKeyRange.bound(e,t)),o=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return c.seq=o,i();var n=t.primaryKey;n>o&&(o=n),t[\"continue\"]()}}function i(){var e=O(c,c.winningRev,c.deleted),t=r.put(e);t.onsuccess=function(){s[\"continue\"]()}}var s=e.target.result;if(s){var c=t(s.value);return c.winningRev=c.winningRev||a.winningRev(c),c.seq?i():void o()}}}var B=t.name,F=null;e._meta=null,e.type=function(){return\"idb\"},e._id=s.toPromise(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(t,n,o){l(t,n,e,F,r.Changes,o)},e._get=function(e,t,n){function r(){n(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u;if(t=s.clone(t),t.ctx)u=t.ctx;else{var f=D(F,[y,_,m],\"readonly\");if(f.error)return n(f.error);u=f.txn}u.objectStore(y).get(e).onsuccess=function(e){if(i=x(e.target.result),!i)return a=c.error(c.MISSING_DOC,\"missing\"),r();if(s.isDeleted(i)&&!t.rev)return a=c.error(c.MISSING_DOC,\"deleted\"),r();var n=u.objectStore(_),f=t.rev||i.winningRev,l=i.id+\"::\"+f;n.index(\"_doc_id_rev\").get(l).onsuccess=function(e){return o=e.target.result,o&&(o=T(o)),o?void r():(a=c.error(c.MISSING_DOC,\"missing\"),r())}}},e._getAttachment=function(e,t,n){var r;if(t=s.clone(t),t.ctx)r=t.ctx;else{var o=D(F,[y,_,m],\"readonly\");if(o.error)return n(o.error);r=o.txn}var i=e.digest,a=e.content_type;r.objectStore(m).get(i).onsuccess=function(e){var r=e.target.result.body;R(r,a,t.encode,function(e){n(null,e)})}},e._info=function(t){if(null===F||!I[B]){var n=new Error(\"db isn't open\");return n.id=\"idbNull\",t(n)}var r,o,i=D(F,[_],\"readonly\");if(i.error)return t(i.error);var s=i.txn,a=s.objectStore(_).openCursor(null,\"prev\");a.onsuccess=function(t){var n=t.target.result;r=n?n.key:0,o=e._meta.docCount},s.oncomplete=function(){t(null,{doc_count:o,update_seq:r,idb_attachment_format:e._meta.blobSupport?\"binary\":\"base64\"})}},e._allDocs=function(t,n){d(t,e,F,n)},e._changes=function(t){function n(e){function n(){return a.seq!==s?e[\"continue\"]():(l=s,a.winningRev===i._rev?o(i):void r())}function r(){var e=i._id+\"::\"+a.winningRev,t=v.index(\"_doc_id_rev\").openCursor(IDBKeyRange.bound(e,e+\"￿\"));t.onsuccess=function(e){o(T(e.target.result.value))}}function o(n){var r=t.processChange(n,a,t);r.seq=a.seq,w(r)&&(E++,p&&b.push(r),t.attachments&&t.include_docs?A(n,t,h,function(){q([r]).then(function(){t.onChange(r)})}):t.onChange(r)),E!==d&&e[\"continue\"]()}var i=T(e.value),s=e.key;if(u&&!u.has(i._id))return e[\"continue\"]();var a;return(a=S.get(i._id))?n():void(g.get(i._id).onsuccess=function(e){a=x(e.target.result),S.set(i._id,a),n()})}function o(e){var t=e.target.result;t&&n(t)}function i(){var e=[y,_];t.attachments&&e.push(m);var n=D(F,e,\"readonly\");if(n.error)return t.complete(n.error);h=n.txn,h.onerror=k(t.complete),h.oncomplete=a,v=h.objectStore(_),g=h.objectStore(y);var r;r=f?v.openCursor(null,f):v.openCursor(IDBKeyRange.lowerBound(t.since,!0)),r.onsuccess=o}function a(){function e(){t.complete(null,{results:b,last_seq:l})}!t.continuous&&t.attachments?q(b).then(e):e()}if(t=s.clone(t),t.continuous){var c=B+\":\"+s.uuid();return r.Changes.addListener(B,c,e,t),r.Changes.notify(B),{cancel:function(){r.Changes.removeListener(B,c)}}}var u=t.doc_ids&&new s.Set(t.doc_ids),f=t.descending?\"prev\":null;t.since=t.since||0;var l=t.since,d=\"limit\"in t?t.limit:-1;0===d&&(d=1);var p;p=\"returnDocs\"in t?t.returnDocs:!0;var h,v,g,b=[],E=0,w=s.filterChange(t),S=new s.Map;i()},e._close=function(e){return null===F?e(c.error(c.NOT_OPEN)):(F.close(),delete I[B],F=null,void e())},e._getRevisionTree=function(e,t){var n=D(F,[y],\"readonly\");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(y).get(e);o.onsuccess=function(e){var n=x(e.target.result);n?t(null,n.rev_tree):t(c.error(c.MISSING_DOC))}},e._doCompaction=function(e,t,n){var r=[y,_,m,v],o=D(F,r,\"readwrite\");if(o.error)return n(o.error);var i=o.txn,c=i.objectStore(y);c.get(e).onsuccess=function(n){var r=x(n.target.result);a.traverseRevTree(r.rev_tree,function(e,n,r,o,i){var s=n+\"-\"+r;-1!==t.indexOf(s)&&(i.status=\"missing\")}),S(t,e,i);var o=r.winningRev,s=r.deleted;i.objectStore(y).put(O(r,o,s))},i.onerror=k(n),i.oncomplete=function(){s.call(n)}},e._getLocal=function(e,t){var n=D(F,[b],\"readonly\");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(b).get(e);o.onerror=k(t),o.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(c.error(c.MISSING_DOC))}},e._putLocal=function(e,t,n){\"function\"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,o=e._id;r?e._rev=\"0-\"+(parseInt(r.split(\"-\")[1],10)+1):e._rev=\"0-1\";var i,s=t.ctx;if(!s){var a=D(F,[b],\"readwrite\");if(a.error)return n(a.error);s=a.txn,s.onerror=k(n),s.oncomplete=function(){i&&n(null,i)}}var u,f=s.objectStore(b);r?(u=f.get(o),u.onsuccess=function(o){var s=o.target.result;if(s&&s._rev===r){var a=f.put(e);a.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,i)}}else n(c.error(c.REV_CONFLICT))}):(u=f.add(e),u.onerror=function(e){n(c.error(c.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},u.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,i)})},e._removeLocal=function(e,t){var n=D(F,[b],\"readwrite\");if(n.error)return t(n.error);var r,o=n.txn;o.oncomplete=function(){r&&t(null,r)};var i=e._id,s=o.objectStore(b),a=s.get(i);a.onerror=k(t),a.onsuccess=function(n){var o=n.target.result;o&&o._rev===e._rev?(s[\"delete\"](i),r={ok:!0,id:i,rev:\"0-0\"}):t(c.error(c.MISSING_DOC))}},e._destroy=function(e){r.Changes.removeAllListeners(B),r.openReqList[B]&&r.openReqList[B].result&&(r.openReqList[B].result.close(),delete I[B]);var t=indexedDB.deleteDatabase(B);t.onsuccess=function(){r.openReqList[B]&&(r.openReqList[B]=null),s.hasLocalStorage()&&B in localStorage&&delete localStorage[B],e(null,{ok:!0})},t.onerror=k(e)};var M=I[B];if(M)return F=M.idb,e._meta=M.global,void n.nextTick(function(){o(null,e)});var P=indexedDB.open(B,h);\"openReqList\"in r||(r.openReqList={}),r.openReqList[B]=P,P.onupgradeneeded=function(e){function t(){var e=o[i-1];i++,e&&e(r,t)}var n=e.target.result;if(e.oldVersion<1)return u(n);var r=e.currentTarget.transaction;e.oldVersion<3&&w(n),e.oldVersion<4&&L(n);var o=[f,C,N,j],i=e.oldVersion;t()},P.onsuccess=function(t){F=t.target.result,F.onversionchange=function(){F.close(),delete I[B]},F.onabort=function(){F.close(),delete I[B]};var n=F.transaction([E,g,y],\"readwrite\"),r=n.objectStore(E).get(E),a=null,c=null,u=null;r.onsuccess=function(t){var r=function(){null!==a&&null!==c&&null!==u&&(e._meta={name:B,instanceId:u,blobSupport:a,docCount:c},I[B]={idb:F,global:e._meta},o(null,e))},f=t.target.result||{id:E};B+\"_id\"in f?(u=f[B+\"_id\"],r()):(u=s.uuid(),f[B+\"_id\"]=u,n.objectStore(E).put(f).onsuccess=function(){r()}),i||(i=p(n,F)),i.then(function(e){a=e,r()});var l=n.objectStore(y).index(\"deletedOrLocal\");l.count(IDBKeyRange.only(\"0\")).onsuccess=function(e){c=e.target.result,r()}}},P.onerror=k(o)}var i,s=e(48),a=e(37),c=e(24),u=e(7),f=e(6),l=e(5),d=e(3),p=e(4),h=f.ADAPTER_VERSION,v=f.ATTACH_AND_SEQ_STORE,m=f.ATTACH_STORE,_=f.BY_SEQ_STORE,g=f.DETECT_BLOB_SUPPORT_STORE,y=f.DOC_STORE,b=f.LOCAL_STORE,E=f.META_STORE,w=u.applyNext,S=u.compactRevs,T=u.decodeDoc,x=u.decodeMetadata,O=u.encodeMetadata,A=u.fetchAttachmentsIfNecessary,k=u.idbError,q=u.postProcessAttachments,R=u.readBlobData,C=u.taskQueue,D=u.openTransactionSafely,I={};r.valid=function(){var e=\"undefined\"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!e&&\"undefined\"!=typeof indexedDB&&\"undefined\"!=typeof IDBKeyRange},r.Changes=new s.Changes,t.exports=r}).call(this,e(53))},{24:24,3:3,37:37,4:4,48:48,5:5,53:53,6:6,7:7}],9:[function(e,t,n){\"use strict\";function r(e,t,n,r,a,m){function _(){return q?m(q):(a.notify(n._name),n._docCount=-1,void m(null,R))}function g(e,t){var n=\"SELECT count(*) as cnt FROM \"+f+\" WHERE digest=?\";k.executeSql(n,[e],function(n,r){if(0===r.rows.item(0).cnt){var o=i.error(i.MISSING_STUB,\"unknown stub attachment with digest \"+e);t(o)}else t()})}function y(e){function t(){++o===n.length&&e(r)}var n=[];if(O.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,o=0;n.forEach(function(e){g(e,function(e){e&&!r&&(r=e),t()})})}function b(e,t,r,i,s,a,f,v){function m(){function t(e,t){function r(){return++i===s.length&&t(),!1}function o(t){var o=\"INSERT INTO \"+l+\" (digest, seq) VALUES (?,?)\",i=[n._attachments[t].digest,e];k.executeSql(o,i,r,r)}var i=0,s=Object.keys(n._attachments||{});if(!s.length)return t();for(var a=0;a<s.length;a++)o(s[a])}var n=e.data,r=i?1:0,o=n._id,s=n._rev,a=p(n),c=\"INSERT INTO \"+u+\" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);\",f=[o,s,a,r];k.executeSql(c,f,function(e,n){var r=n.insertId;t(r,function(){b(e,r)})},function(){var e=d(\"seq\",u,null,\"doc_id=? AND rev=?\");return k.executeSql(e,[o,s],function(e,n){var i=n.rows.item(0).seq,c=\"UPDATE \"+u+\" SET json=?, deleted=? WHERE doc_id=? AND rev=?;\",f=[a,r,o,s];e.executeSql(c,f,function(e){t(i,function(){b(e,i)})})}),!1})}function _(e){E||(e?(E=e,v(E)):w===T.length&&m())}function g(e){w++,_(e)}function y(){if(s&&n.auto_compaction){var t=e.metadata.id,r=o.compactTree(e.metadata);h(r,t,k)}}function b(n,r){y(),e.metadata.seq=r,delete e.metadata.rev;var i=s?\"UPDATE \"+c+\" SET json=?, max_seq=?, winningseq=(SELECT seq FROM \"+u+\" WHERE doc_id=\"+c+\".id AND rev=?) WHERE id=?\":\"INSERT INTO \"+c+\" (id, winningseq, max_seq, json) VALUES (?,?,?,?);\",a=o.safeJsonStringify(e.metadata),l=e.metadata.id,d=s?[a,r,t,l]:[l,r,r,a];n.executeSql(i,d,function(){R[f]={ok:!0,id:e.metadata.id,rev:t},C.set(l,e.metadata),v()})}var E=null,w=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var T=Object.keys(e.data._attachments||{});i&&(e.data._deleted=!0),T.forEach(function(t){var n=e.data._attachments[t];if(n.stub)w++,_();else{var r=n.data;delete n.data;var o=n.digest;S(o,r,g)}}),T.length||m()}function E(){o.processDocs(O,n,C,k,R,b,t)}function w(e){function t(){++n===O.length&&e()}if(!O.length)return e();var n=0;O.forEach(function(e){if(e._id&&o.isLocalId(e._id))return t();var n=e.metadata.id;k.executeSql(\"SELECT json FROM \"+c+\" WHERE id = ?\",[n],function(e,r){if(r.rows.length){var i=o.safeJsonParse(r.rows.item(0).json);C.set(n,i)}t()})})}function S(e,t,n){var r=\"SELECT digest FROM \"+f+\" WHERE digest=?\";k.executeSql(r,[e],function(o,i){return i.rows.length?n():(r=\"INSERT INTO \"+f+\" (digest, body, escaped) VALUES (?,?,1)\",void o.executeSql(r,[e,s.escapeBlob(t)],function(){n()},function(){return n(),!1}))})}var T=t.new_edits,x=e.docs,O=x.map(function(e){if(e._id&&o.isLocalId(e._id))return e;var t=o.parseDoc(e,T);return t}),A=O.filter(function(e){return e.error});if(A.length)return m(A[0]);var k,q,R=new Array(O.length),C=new o.Map;o.preprocessAttachments(O,\"binary\",function(e){return e?m(e):void r.transaction(function(e){k=e,y(function(e){e?q=e:w(E)})},v(m),_)})}var o=e(48),i=e(24),s=e(11),a=e(10),c=a.DOC_STORE,u=a.BY_SEQ_STORE,f=a.ATTACH_STORE,l=a.ATTACH_AND_SEQ_STORE,d=s.select,p=s.stringifyDoc,h=s.compactRevs,v=s.unknownError;t.exports=r},{10:10,11:11,24:24,48:48}],10:[function(e,t,n){\"use strict\";function r(e){return\"'\"+e+\"'\"}n.ADAPTER_VERSION=7,n.DOC_STORE=r(\"document-store\"),n.BY_SEQ_STORE=r(\"by-sequence\"),n.ATTACH_STORE=r(\"attach-store\"),n.LOCAL_STORE=r(\"local-store\"),n.META_STORE=r(\"metadata-store\"),n.ATTACH_AND_SEQ_STORE=r(\"attach-seq-store\")},{}],11:[function(e,t,n){\"use strict\";function r(e){return e.replace(/\\u0002/g,\"\u0002\u0002\").replace(/\\u0001/g,\"\u0001\u0002\").replace(/\\u0000/g,\"\u0001\u0001\")}function o(e){return e.replace(/\\u0001\\u0001/g,\"\\x00\").replace(/\\u0001\\u0002/g,\"\u0001\").replace(/\\u0002\\u0002/g,\"\u0002\")}function i(e){return delete e._id,delete e._rev,JSON.stringify(e)}function s(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function a(e){for(var t=\"(\";e--;)t+=\"?\",e&&(t+=\",\");return t+\")\"}function c(e,t,n,r,o){return\"SELECT \"+e+\" FROM \"+(\"string\"==typeof t?t:t.join(\" JOIN \"))+(n?\" ON \"+n:\"\")+(r?\" WHERE \"+(\"string\"==typeof r?r:r.join(\" AND \")):\"\")+(o?\" ORDER BY \"+o:\"\")}function u(e,t,n){function r(){++i===e.length&&o()}function o(){if(s.length){var e=\"SELECT DISTINCT digest AS digest FROM \"+b+\" WHERE seq IN \"+a(s.length);n.executeSql(e,s,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var o=\"DELETE FROM \"+b+\" WHERE seq IN (\"+s.map(function(){return\"?\"}).join(\",\")+\")\";e.executeSql(o,s,function(e){var t=\"SELECT digest FROM \"+b+\" WHERE digest IN (\"+n.map(function(){return\"?\"}).join(\",\")+\")\";e.executeSql(t,n,function(e,t){for(var r=new v.Set,o=0;o<t.rows.length;o++)r.add(t.rows.item(o).digest);n.forEach(function(t){r.has(t)||(e.executeSql(\"DELETE FROM \"+b+\" WHERE digest=?\",[t]),e.executeSql(\"DELETE FROM \"+y+\" WHERE digest=?\",[t]))})})})}})}}if(e.length){var i=0,s=[];e.forEach(function(e){var o=\"SELECT seq FROM \"+g+\" WHERE doc_id=? AND rev=?\";n.executeSql(o,[t,e],function(e,t){if(!t.rows.length)return r();var n=t.rows.item(0).seq;s.push(n),e.executeSql(\"DELETE FROM \"+g+\" WHERE seq=?\",[n],r)})})}}function f(e){return function(t){var n=t&&t.constructor.toString().match(/function ([^\\(]+)/),r=n&&n[1]||t.type,o=t.target||t.message;e(m.error(m.WSQ_ERROR,o,r))}}function l(e){if(\"size\"in e)return 1e6*e.size;var t=/Android/.test(window.navigator.userAgent);return t?5e6:1}function d(){return\"undefined\"!=typeof sqlitePlugin?sqlitePlugin.openDatabase.bind(sqlitePlugin):\"undefined\"!=typeof openDatabase?function(e){return openDatabase(e.name,e.version,e.description,e.size)}:void 0}function p(e){var t=d(),n=E[e.name];return n||(n=E[e.name]=t(e),n._sqlitePlugin=\"undefined\"!=typeof sqlitePlugin),n}function h(){return\"undefined\"!=typeof openDatabase||\"undefined\"!=typeof SQLitePlugin}var v=e(48),m=e(24),_=e(10),g=_.BY_SEQ_STORE,y=_.ATTACH_STORE,b=_.ATTACH_AND_SEQ_STORE,E={};t.exports={escapeBlob:r,unescapeBlob:o,stringifyDoc:i,unstringifyDoc:s,qMarks:a,select:c,compactRevs:u,unknownError:f,getSize:l,openDB:p,valid:h}},{10:10,24:24,48:48}],12:[function(e,t,n){\"use strict\";function r(e,t,n,r,o){function s(){++u===c.length&&o&&o()}function a(e,t){var o=e._attachments[t],a={encode:!0,ctx:r};n._getAttachment(o,a,function(n,r){e._attachments[t]=i.extend(i.pick(o,[\"digest\",\"content_type\"]),{data:r}),s()})}var c=Object.keys(e._attachments||{});if(!c.length)return o&&o();var u=0;c.forEach(function(n){t.attachments&&t.include_docs?a(e,n):(e._attachments[n].stub=!0,s())})}function o(e,t){function n(){i.hasLocalStorage()&&(window.localStorage[\"_pouch__websqldb_\"+K._name]=!0),t(null,K)}function f(e,t){e.executeSql(C),e.executeSql(\"ALTER TABLE \"+v+\" ADD COLUMN deleted TINYINT(1) DEFAULT 0\",[],function(){e.executeSql(q),e.executeSql(\"ALTER TABLE \"+h+\" ADD COLUMN local TINYINT(1) DEFAULT 0\",[],function(){e.executeSql(\"CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON \"+h+\" (local, id)\");var n=\"SELECT \"+h+\".winningseq AS seq, \"+h+\".json AS metadata FROM \"+v+\" JOIN \"+h+\" ON \"+v+\".seq = \"+h+\".winningseq\";e.executeSql(n,[],function(e,n){for(var r=[],o=[],s=0;s<n.rows.length;s++){var a=n.rows.item(s),c=a.seq,u=JSON.parse(a.metadata);i.isDeleted(u)&&r.push(c),i.isLocalId(u.id)&&o.push(u.id)}e.executeSql(\"UPDATE \"+h+\"SET local = 1 WHERE id IN \"+b(o.length),o,function(){e.executeSql(\"UPDATE \"+v+\" SET deleted = 1 WHERE seq IN \"+b(r.length),r,t)})})})})}function j(e,t){var n=\"CREATE TABLE IF NOT EXISTS \"+_+\" (id UNIQUE, rev, json)\";e.executeSql(n,[],function(){var n=\"SELECT \"+h+\".id AS id, \"+v+\".json AS data FROM \"+v+\" JOIN \"+h+\" ON \"+v+\".seq = \"+h+\".winningseq WHERE local = 1\";e.executeSql(n,[],function(e,n){function r(){if(!o.length)return t(e);var n=o.shift(),i=JSON.parse(n.data)._rev;e.executeSql(\"INSERT INTO \"+_+\" (id, rev, json) VALUES (?,?,?)\",[n.id,i,n.data],function(e){e.executeSql(\"DELETE FROM \"+h+\" WHERE id=?\",[n.id],function(e){e.executeSql(\"DELETE FROM \"+v+\" WHERE seq=?\",[n.seq],function(){r()})})})}for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i));r()})})}function B(e,t){function n(n){function r(){if(!n.length)return t(e);var o=n.shift(),i=c(o.hex,W),s=i.lastIndexOf(\"::\"),a=i.substring(0,s),u=i.substring(s+2),f=\"UPDATE \"+v+\" SET doc_id=?, rev=? WHERE doc_id_rev=?\";e.executeSql(f,[a,u,i],function(){r()})}r()}var r=\"ALTER TABLE \"+v+\" ADD COLUMN doc_id\";e.executeSql(r,[],function(e){var t=\"ALTER TABLE \"+v+\" ADD COLUMN rev\";e.executeSql(t,[],function(e){e.executeSql(R,[],function(e){var t=\"SELECT hex(doc_id_rev) as hex FROM \"+v;e.executeSql(t,[],function(e,t){for(var r=[],o=0;o<t.rows.length;o++)r.push(t.rows.item(o));n(r)})})})})}function F(e,t){function n(e){var n=\"SELECT COUNT(*) AS cnt FROM \"+m;e.executeSql(n,[],function(e,n){function r(){var n=S(N+\", \"+h+\".id AS id\",[h,v],L,null,h+\".id \");n+=\" LIMIT \"+s+\" OFFSET \"+i,i+=s,e.executeSql(n,[],function(e,n){function o(e,t){var n=i[e]=i[e]||[];-1===n.indexOf(t)&&n.push(t)}if(!n.rows.length)return t(e);for(var i={},s=0;s<n.rows.length;s++)for(var a=n.rows.item(s),c=w(a.data,a.id,a.rev),u=Object.keys(c._attachments||{}),f=0;f<u.length;f++){var l=c._attachments[u[f]];o(l.digest,a.seq)}var d=[];if(Object.keys(i).forEach(function(e){var t=i[e];t.forEach(function(t){d.push([e,t])})}),!d.length)return r();var p=0;d.forEach(function(t){var n=\"INSERT INTO \"+y+\" (digest, seq) VALUES (?,?)\";e.executeSql(n,t,function(){++p===d.length&&r()})})})}var o=n.rows.item(0).cnt;if(!o)return t(e);var i=0,s=10;r()})}var r=\"CREATE TABLE IF NOT EXISTS \"+y+\" (digest, seq INTEGER)\";e.executeSql(r,[],function(e){e.executeSql(I,[],function(e){e.executeSql(D,[],n)})})}function M(e,t){var n=\"ALTER TABLE \"+m+\" ADD COLUMN escaped TINYINT(1) DEFAULT 0\";e.executeSql(n,[],t)}function P(e,t){var n=\"ALTER TABLE \"+h+\" ADD COLUMN max_seq INTEGER\";e.executeSql(n,[],function(e){var n=\"UPDATE \"+h+\" SET max_seq=(SELECT MAX(seq) FROM \"+v+\" WHERE doc_id=id)\";e.executeSql(n,[],function(e){var n=\"CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON \"+h+\" (max_seq)\";e.executeSql(n,[],t)})})}function U(e,t){e.executeSql('SELECT HEX(\"a\") AS hex',[],function(e,n){var r=n.rows.item(0).hex;W=2===r.length?\"UTF-8\":\"UTF-16\",t()})}function J(){for(;Y.length>0;){var e=Y.pop();e(null,z)}}function H(e,t){if(0===t){var n=\"CREATE TABLE IF NOT EXISTS \"+g+\" (dbid, db_version INTEGER)\",r=\"CREATE TABLE IF NOT EXISTS \"+m+\" (digest UNIQUE, escaped TINYINT(1), body BLOB)\",o=\"CREATE TABLE IF NOT EXISTS \"+y+\" (digest, seq INTEGER)\",s=\"CREATE TABLE IF NOT EXISTS \"+h+\" (id unique, json, winningseq, max_seq INTEGER UNIQUE)\",a=\"CREATE TABLE IF NOT EXISTS \"+v+\" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)\",c=\"CREATE TABLE IF NOT EXISTS \"+_+\" (id UNIQUE, rev, json)\";e.executeSql(r),e.executeSql(c),e.executeSql(o,[],function(){e.executeSql(D),e.executeSql(I)}),e.executeSql(s,[],function(){e.executeSql(C),e.executeSql(a,[],function(){e.executeSql(q),e.executeSql(R),e.executeSql(n,[],function(){var t=\"INSERT INTO \"+g+\" (db_version, dbid) VALUES (?,?)\";z=i.uuid();var n=[p,z];e.executeSql(t,n,function(){J()})})})})}else{var u=function(){var n=p>t;n&&e.executeSql(\"UPDATE \"+g+\" SET db_version = \"+p);var r=\"SELECT dbid FROM \"+g;e.executeSql(r,[],function(e,t){z=t.rows.item(0).dbid,J()})},l=[f,j,B,F,M,P,u],d=t,b=function(e){l[d-1](e,b),d++};b(e)}}function G(){$.transaction(function(e){U(e,function(){V(e)})},x(t),n)}function V(e){var t=\"SELECT sql FROM sqlite_master WHERE tbl_name = \"+g;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql(\"SELECT db_version FROM \"+g,[],function(e,t){var n=t.rows.item(0).db_version;H(e,n)}):e.executeSql(\"ALTER TABLE \"+g+\" ADD COLUMN db_version INTEGER\",[],function(){H(e,1)}):H(e,0)})}function Q(e,t){if(-1!==K._docCount)return t(K._docCount);var n=S(\"COUNT(\"+h+\".id) AS 'num'\",[h,v],L,v+\".deleted=0\");e.executeSql(n,[],function(e,n){K._docCount=n.rows.item(0).num,t(K._docCount)})}var W,K=this,z=null,X=O(e),Y=[];K._docCount=-1,K._name=e.name;var $=A({name:K._name,version:k,description:K._name,size:X,location:e.location,createFromLocation:e.createFromLocation,androidDatabaseImplementation:e.androidDatabaseImplementation});return $?(\"function\"!=typeof $.readTransaction&&($.readTransaction=$.transaction),i.isCordova()?window.addEventListener(K._name+\"_pouch\",function Z(){window.removeEventListener(K._name+\"_pouch\",Z,!1),G()},!1):G(),K.type=function(){return\"websql\"},K._id=i.toPromise(function(e){e(null,z)}),K._info=function(e){$.readTransaction(function(t){Q(t,function(n){var r=\"SELECT MAX(seq) AS seq FROM \"+v;t.executeSql(r,[],function(t,r){var o=r.rows.item(0).seq||0;e(null,{doc_count:n,update_seq:o,sqlite_plugin:$._sqlitePlugin,websql_encoding:W})})})},x(e))},K._bulkDocs=function(e,t,n){d(e,t,K,$,o.Changes,n)},K._get=function(e,t,n){function r(){n(c,{doc:o,metadata:s,ctx:l})}t=i.clone(t);var o,s,c;if(!t.ctx)return void $.readTransaction(function(r){t.ctx=r,K._get(e,t,n)});var u,f,l=t.ctx;t.rev?(u=S(N,[h,v],h+\".id=\"+v+\".doc_id\",[v+\".doc_id=?\",v+\".rev=?\"]),f=[e,t.rev]):(u=S(N,[h,v],L,h+\".id=?\"),f=[e]),l.executeSql(u,f,function(e,n){if(!n.rows.length)return c=a.error(a.MISSING_DOC,\"missing\"),r();var u=n.rows.item(0);return s=i.safeJsonParse(u.metadata),u.deleted&&!t.rev?(c=a.error(a.MISSING_DOC,\"deleted\"),r()):(o=w(u.data,s.id,u.rev),void r())})},K._allDocs=function(e,t){var n,o=[],a=\"startkey\"in e?e.startkey:!1,c=\"endkey\"in e?e.endkey:!1,u=\"key\"in e?e.key:!1,f=\"descending\"in e?e.descending:!1,l=\"limit\"in e?e.limit:-1,d=\"skip\"in e?e.skip:0,p=e.inclusive_end!==!1,m=[],_=[];if(u!==!1)_.push(h+\".id = ?\"),m.push(u);else if(a!==!1||c!==!1){if(a!==!1&&(_.push(h+\".id \"+(f?\"<=\":\">=\")+\" ?\"),m.push(a)),c!==!1){var g=f?\">\":\"<\";p&&(g+=\"=\"),_.push(h+\".id \"+g+\" ?\"),m.push(c)}u!==!1&&(_.push(h+\".id = ?\"),m.push(u))}\"ok\"!==e.deleted&&_.push(v+\".deleted = 0\"),$.readTransaction(function(t){Q(t,function(a){if(n=a,0!==l){var c=S(N,[h,v],L,_,h+\".id \"+(f?\"DESC\":\"ASC\"));c+=\" LIMIT \"+l+\" OFFSET \"+d,t.executeSql(c,m,function(t,n){for(var a=0,c=n.rows.length;c>a;a++){var u=n.rows.item(a),f=i.safeJsonParse(u.metadata),l=f.id,d=w(u.data,l,u.rev),p=d._rev,h={id:l,key:l,value:{rev:p}};if(e.include_docs&&(h.doc=d,h.doc._rev=p,e.conflicts&&(h.doc._conflicts=s.collectConflicts(f)),r(h.doc,e,K,t)),u.deleted){if(\"ok\"!==e.deleted)continue;h.value.deleted=!0,h.doc=null}o.push(h)}})}})},x(t),function(){t(null,{total_rows:n,offset:e.skip,rows:o})})},K._changes=function(e){function t(){var t=h+\".json AS metadata, \"+h+\".max_seq AS maxSeq, \"+v+\".json AS winningDoc, \"+v+\".rev AS winningRev \",n=h+\" JOIN \"+v,o=h+\".id=\"+v+\".doc_id AND \"+h+\".winningseq=\"+v+\".seq\",l=[\"maxSeq > ?\"],d=[e.since];e.doc_ids&&(l.push(h+\".id IN \"+b(e.doc_ids.length)),d=d.concat(e.doc_ids));var p=\"maxSeq \"+(s?\"DESC\":\"ASC\"),m=S(t,n,o,l,p),_=i.filterChange(e);e.view||e.filter||(m+=\" LIMIT \"+a);var g=e.since||0;$.readTransaction(function(t){t.executeSql(m,d,function(t,n){function o(t){return function(){e.onChange(t)}}for(var s=0,l=n.rows.length;l>s;s++){var d=n.rows.item(s),p=i.safeJsonParse(d.metadata);g=d.maxSeq;var h=w(d.winningDoc,p.id,d.winningRev),v=e.processChange(h,p,e);if(v.seq=d.maxSeq,_(v)&&(f++,c&&u.push(v),e.attachments&&e.include_docs?r(h,e,K,t,o(v)):o(v)()),f===a)break}})},x(e.complete),function(){e.continuous||e.complete(null,{results:u,last_seq:g})})}if(e=i.clone(e),e.continuous){var n=K._name+\":\"+i.uuid();return o.Changes.addListener(K._name,n,K,e),o.Changes.notify(K._name),{cancel:function(){o.Changes.removeListener(K._name,n)}}}var s=e.descending;e.since=e.since&&!s?e.since:0;var a=\"limit\"in e?e.limit:-1;0===a&&(a=1);var c;c=\"returnDocs\"in e?e.returnDocs:!0;var u=[],f=0;t()},K._close=function(e){e()},K._getAttachment=function(e,t,n){var r,o=t.ctx,s=e.digest,a=e.content_type,f=\"SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM \"+m+\" WHERE digest=?\";o.executeSql(f,[s],function(e,o){var s=o.rows.item(0),f=s.escaped?l.unescapeBlob(s.body):c(s.body,W);r=t.encode?i.btoa(f):u(f,a),n(null,r)})},K._getRevisionTree=function(e,t){$.readTransaction(function(n){var r=\"SELECT json AS metadata FROM \"+h+\" WHERE id = ?\";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=i.safeJsonParse(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(a.error(a.MISSING_DOC))})})},K._doCompaction=function(e,t,n){return t.length?void $.transaction(function(n){var r=\"SELECT json AS metadata FROM \"+h+\" WHERE id = ?\";n.executeSql(r,[e],function(n,r){var o=i.safeJsonParse(r.rows.item(0).metadata);s.traverseRevTree(o.rev_tree,function(e,n,r,o,i){var s=n+\"-\"+r;-1!==t.indexOf(s)&&(i.status=\"missing\")});var a=\"UPDATE \"+h+\" SET json = ? WHERE id = ?\";n.executeSql(a,[i.safeJsonStringify(o),e])}),T(t,e,n)},x(n),function(){n()}):n()},K._getLocal=function(e,t){$.readTransaction(function(n){var r=\"SELECT json, rev FROM \"+_+\" WHERE id=?\";n.executeSql(r,[e],function(n,r){if(r.rows.length){var o=r.rows.item(0),i=w(o.json,e,o.rev);t(null,i)}else t(a.error(a.MISSING_DOC))})})},K._putLocal=function(e,t,n){function r(e){var r,f;i?(r=\"UPDATE \"+_+\" SET rev=?, json=? WHERE id=? AND rev=?\",f=[o,u,s,i]):(r=\"INSERT INTO \"+_+\" (id, rev, json) VALUES (?,?,?)\",f=[s,o,u]),e.executeSql(r,f,function(e,r){r.rowsAffected?(c={ok:!0,id:s,rev:o},t.ctx&&n(null,c)):n(a.error(a.REV_CONFLICT))},function(){return n(a.error(a.REV_CONFLICT)),!1})}\"function\"==typeof t&&(n=t,t={}),delete e._revisions;var o,i=e._rev,s=e._id;o=i?e._rev=\"0-\"+(parseInt(i.split(\"-\")[1],10)+1):e._rev=\"0-1\";var c,u=E(e);t.ctx?r(t.ctx):$.transaction(function(e){r(e)},x(n),function(){c&&n(null,c)})},K._removeLocal=function(e,t){var n;$.transaction(function(r){var o=\"DELETE FROM \"+_+\" WHERE id=? AND rev=?\",i=[e._id,e._rev];r.executeSql(o,i,function(r,o){return o.rowsAffected?void(n={ok:!0,id:e._id,rev:\"0-0\"}):t(a.error(a.MISSING_DOC))})},x(t),function(){n&&t(null,n)})},void(K._destroy=function(e){o.Changes.removeAllListeners(K._name),$.transaction(function(e){var t=[h,v,m,g,_,y];t.forEach(function(t){e.executeSql(\"DROP TABLE IF EXISTS \"+t,[])})},x(e),function(){i.hasLocalStorage()&&(delete window.localStorage[\"_pouch__websqldb_\"+K._name],delete window.localStorage[K._name]),e(null,{ok:!0})})})):t(a.error(a.UNKNOWN_ERROR))}var i=e(48),s=e(37),a=e(24),c=e(29),u=e(19),f=e(10),l=e(11),d=e(9),p=f.ADAPTER_VERSION,h=f.DOC_STORE,v=f.BY_SEQ_STORE,m=f.ATTACH_STORE,_=f.LOCAL_STORE,g=f.META_STORE,y=f.ATTACH_AND_SEQ_STORE,b=l.qMarks,E=l.stringifyDoc,w=l.unstringifyDoc,S=l.select,T=l.compactRevs,x=l.unknownError,O=l.getSize,A=l.openDB,k=1,q=\"CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON \"+v+\" (seq, deleted)\",R=\"CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON \"+v+\" (doc_id, rev)\",C=\"CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON \"+h+\" (winningseq)\",D=\"CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON \"+y+\" (seq)\",I=\"CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON \"+y+\" (digest, seq)\",L=v+\".seq = \"+h+\".winningseq\",N=v+\".seq AS seq, \"+v+\".deleted AS deleted, \"+v+\".json AS data, \"+v+\".rev AS rev, \"+h+\".json AS metadata\";o.valid=l.valid,o.Changes=new i.Changes,t.exports=o},{10:10,11:11,19:19,24:24,29:29,37:37,48:48,9:9}],13:[function(e,t,n){\"use strict\";function r(e,t,n){function r(){o.cancel()}c.call(this);var o=this;this.db=e,t=t?i.clone(t):{};var s=n||t.complete||function(){},a=t.complete=i.once(function(t,n){t?o.emit(\"error\",t):o.emit(\"complete\",n),o.removeAllListeners(),e.removeListener(\"destroyed\",r)});s&&(o.on(\"complete\",function(e){s(null,e)}),o.on(\"error\",function(e){s(e)}));var u=t.onChange;u&&o.on(\"change\",u),e.once(\"destroyed\",r),t.onChange=function(e){t.isCancelled||(o.emit(\"change\",e),o.startSeq&&o.startSeq<=e.seq&&(o.emit(\"uptodate\"),o.startSeq=!1),e.deleted?o.emit(\"delete\",e):1===e.changes.length&&\"1-\"===e.changes[0].rev.slice(0,2)?o.emit(\"create\",e):o.emit(\"update\",e))};var f=new i.Promise(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});o.once(\"cancel\",function(){u&&o.removeListener(\"change\",u),e.removeListener(\"destroyed\",r),t.complete(null,{status:\"cancelled\"})}),this.then=f.then.bind(f),this[\"catch\"]=f[\"catch\"].bind(f),this.then(function(e){a(null,e)},a),e.taskqueue.isReady?o.doChanges(t):e.taskqueue.addTask(function(){o.isCancelled?o.emit(\"cancel\"):o.doChanges(t)})}function o(e,t,n){var r=[{rev:e._rev}];\"all_docs\"===n.style&&(r=s.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:r,doc:e};return i.isDeleted(t,e._rev)&&(o.deleted=!0),n.conflicts&&(o.doc._conflicts=s.collectConflicts(t),o.doc._conflicts.length||delete o.doc._conflicts),o}var i=e(48),s=e(37),a=e(24),c=e(52).EventEmitter,u=e(35),f=e(36);t.exports=r,i.inherits(r,c),r.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit(\"cancel\")},r.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=i.clone(e),\"live\"in e&&!(\"continuous\"in e)&&(e.continuous=e.live),e.processChange=o,\"latest\"===e.since&&(e.since=\"now\"),e.since||(e.since=0),\"now\"===e.since)return void this.db.info().then(function(r){return t.isCancelled?void n(null,{status:\"cancelled\"}):(e.since=r.update_seq,void t.doChanges(e))},n);if(e.continuous&&\"now\"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq},function(e){if(\"idbNull\"!==e.id)throw e}),\"http\"!==this.db.type()&&e.filter&&\"string\"==typeof e.filter&&!e.doc_ids)return this.filterChanges(e);\"descending\"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&\"function\"==typeof r.cancel){var s=t.cancel;t.cancel=i.getArguments(function(e){r.cancel(),s.apply(this,e)})}},r.prototype.filterChanges=function(e){var t=this,n=e.complete;if(\"_view\"===e.filter){if(!e.view||\"string\"!=typeof e.view){var r=a.error(a.BAD_REQUEST,\"`view` filter parameter is not provided.\");return void n(r)}var o=e.view.split(\"/\");this.db.get(\"_design/\"+o[0],function(r,i){if(t.isCancelled)return void n(null,{status:\"cancelled\"});if(r)return void n(a.generateErrorFromResponse(r));if(i&&i.views&&i.views[o[1]]){var s=f(i.views[o[1]].map);return e.filter=s,void t.doChanges(e)}var c=i.views?\"missing json key: \"+o[1]:\"missing json key: views\";r||(r=a.error(a.MISSING_DOC,c)),n(r)})}else{var i=e.filter.split(\"/\");this.db.get(\"_design/\"+i[0],function(r,o){if(t.isCancelled)return void n(null,{status:\"cancelled\"});if(r)return void n(a.generateErrorFromResponse(r));if(o&&o.filters&&o.filters[i[1]]){var s=u(o.filters[i[1]]);return e.filter=s,void t.doChanges(e)}var c=o&&o.filters?\"missing json key: \"+i[1]:\"missing json key: filters\";return r||(r=a.error(a.MISSING_DOC,c)),void n(r)})}}},{24:24,35:35,36:36,37:37,48:48,52:52}],14:[function(e,t,n){(function(n,r){\"use strict\";function o(e){e&&r.debug&&console.error(e)}function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var f=this;(\"function\"==typeof t||\"undefined\"==typeof t)&&(r=t,t={}),e&&\"object\"==typeof e&&(t=e,e=void 0),\"undefined\"==typeof r&&(r=o),e=e||t.name,t=t?a.clone(t):{},delete t.name,this.__opts=t;var l=r;f.auto_compaction=t.auto_compaction,f.prefix=i.prefix,s.call(f),\nf.taskqueue=new c;var d=new u(function(o,s){r=function(e,t){return e?s(e):(delete t.then,void o(t))},t=a.clone(t);var c,u,l=t.name||e;return function(){try{if(\"string\"!=typeof l)throw u=new Error(\"Missing/invalid DB name\"),u.code=400,u;if(c=i.parseAdapter(l,t),t.originalName=l,t.name=c.name,t.prefix&&\"http\"!==c.adapter&&\"https\"!==c.adapter&&(t.name=t.prefix+t.name),t.adapter=t.adapter||c.adapter,f._adapter=t.adapter,f._db_name=l,!i.adapters[t.adapter])throw u=new Error(\"Adapter is missing\"),u.code=404,u;if(!i.adapters[t.adapter].valid())throw u=new Error(\"Invalid Adapter\"),u.code=404,u}catch(e){f.taskqueue.fail(e),f.changes=a.toPromise(function(t){t.complete&&t.complete(e)})}}(),u?s(u):(f.adapter=t.adapter,f.replicate={},f.replicate.from=function(e,t,n){return f.constructor.replicate(e,f,t,n)},f.replicate.to=function(e,t,n){return f.constructor.replicate(f,e,t,n)},f.sync=function(e,t,n){return f.constructor.sync(f,e,t,n)},f.replicate.sync=f.sync,i.adapters[t.adapter].call(f,t,function(e){function n(){i.emit(\"destroyed\",t.originalName),i.emit(t.originalName,\"destroyed\"),f.removeListener(\"destroyed\",n)}return e?void(r&&(f.taskqueue.fail(e),r(e))):(f.on(\"destroyed\",n),f.emit(\"created\",f),i.emit(\"created\",t.originalName),f.taskqueue.ready(f),void r(null,f))}),t.skipSetup&&(f.taskqueue.ready(f),n.nextTick(function(){r(null,f)})),void(a.isCordova()&&cordova.fireWindowEvent(t.name+\"_pouch\",{})))});d.then(function(e){l(null,e)},l),f.then=d.then.bind(d),f[\"catch\"]=d[\"catch\"].bind(d)}var s=e(1),a=e(48),c=e(47),u=a.Promise;a.inherits(i,s),i.debug=e(54),t.exports=i}).call(this,e(53),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{1:1,47:47,48:48,53:53,54:54}],15:[function(e,t,n){(function(n){\"use strict\";function r(e,t){function r(t,n,r){if(e.binary||e.json||!e.processData||\"string\"==typeof t){if(!e.binary&&e.json&&\"string\"==typeof t)try{t=JSON.parse(t)}catch(o){return r(o)}}else t=JSON.stringify(t);Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?s.generateErrorFromResponse(e):e})),r(null,t,n)}function c(e,t){var n,r;if(e.code&&e.status){var o=new Error(e.message||e.code);return o.status=e.status,t(o)}try{n=JSON.parse(e.responseText),r=s.generateErrorFromResponse(n)}catch(i){r=s.generateErrorFromResponse(e)}t(r)}function u(e){return n.browser?\"\":new i(\"\",\"binary\")}var f=!1,l=a.getArguments(function(e){f||(t.apply(this,e),f=!0)});\"function\"==typeof e&&(l=e,e={}),e=a.clone(e);var d={method:\"GET\",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=a.extend(!0,d,e),e.json&&(e.binary||(e.headers.Accept=\"application/json\"),e.headers[\"Content-Type\"]=e.headers[\"Content-Type\"]||\"application/json\"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),o(e,function(t,n,o){if(t)return t.status=n?n.statusCode:400,c(t,l);var i,a=n.headers&&n.headers[\"content-type\"],f=o||u();e.binary||!e.json&&e.processData||\"object\"==typeof f||!(/json/.test(a)||/^[\\s]*\\{/.test(f)&&/\\}[\\s]*$/.test(f))||(f=JSON.parse(f)),n.statusCode>=200&&n.statusCode<300?r(f,n,l):(e.binary&&(f=JSON.parse(f.toString())),i=s.generateErrorFromResponse(f),i.status=n.statusCode,l(i))})}var o=e(32),i=e(23),s=e(24),a=e(48);t.exports=r}).call(this,e(53))},{23:23,24:24,32:32,48:48,53:53}],16:[function(e,t,n){\"use strict\";t.exports=function(e){for(var t=\"\",n=new Uint8Array(e),r=n.byteLength,o=0;r>o;o++)t+=String.fromCharCode(n[o]);return t}},{}],17:[function(e,t,n){\"use strict\";var r=e(23);\"function\"==typeof atob?n.atob=function(e){return atob(e)}:n.atob=function(e){var t=new r(e,\"base64\");if(t.toString(\"base64\")!==e)throw\"Cannot base64 encode full string\";return t.toString(\"binary\")},\"function\"==typeof btoa?n.btoa=function(e){return btoa(e)}:n.btoa=function(e){return new r(e,\"binary\").toString(\"base64\")}},{23:23}],18:[function(e,t,n){\"use strict\";t.exports=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n}},{}],19:[function(e,t,n){\"use strict\";var r=e(20),o=e(18);t.exports=function(e,t){return r([o(e)],{type:t})}},{18:18,20:20}],20:[function(e,t,n){(function(e){\"use strict\";function n(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if(\"TypeError\"!==r.name)throw r;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,i=new o,s=0;s<t.length;s+=1)i.append(t[s]);return i.getBlob(n.type)}}t.exports=n}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],21:[function(e,t,n){\"use strict\";t.exports=function(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}},{}],22:[function(e,t,n){\"use strict\";var r=e(16);t.exports=function(e,t){var n=new FileReader,o=\"function\"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||\"\";return o?t(n):void t(r(n))},o?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}},{16:16}],23:[function(e,t,n){t.exports={}},{}],24:[function(e,t,n){\"use strict\";function r(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}var o=e(57);o(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},n.UNAUTHORIZED=new r({status:401,error:\"unauthorized\",reason:\"Name or password is incorrect.\"}),n.MISSING_BULK_DOCS=new r({status:400,error:\"bad_request\",reason:\"Missing JSON list of 'docs'\"}),n.MISSING_DOC=new r({status:404,error:\"not_found\",reason:\"missing\"}),n.REV_CONFLICT=new r({status:409,error:\"conflict\",reason:\"Document update conflict\"}),n.INVALID_ID=new r({status:400,error:\"invalid_id\",reason:\"_id field must contain a string\"}),n.MISSING_ID=new r({status:412,error:\"missing_id\",reason:\"_id is required for puts\"}),n.RESERVED_ID=new r({status:400,error:\"bad_request\",reason:\"Only reserved document ids may start with underscore.\"}),n.NOT_OPEN=new r({status:412,error:\"precondition_failed\",reason:\"Database not open\"}),n.UNKNOWN_ERROR=new r({status:500,error:\"unknown_error\",reason:\"Database encountered an unknown error\"}),n.BAD_ARG=new r({status:500,error:\"badarg\",reason:\"Some query argument is invalid\"}),n.INVALID_REQUEST=new r({status:400,error:\"invalid_request\",reason:\"Request was invalid\"}),n.QUERY_PARSE_ERROR=new r({status:400,error:\"query_parse_error\",reason:\"Some query parameter is invalid\"}),n.DOC_VALIDATION=new r({status:500,error:\"doc_validation\",reason:\"Bad special document member\"}),n.BAD_REQUEST=new r({status:400,error:\"bad_request\",reason:\"Something wrong with the request\"}),n.NOT_AN_OBJECT=new r({status:400,error:\"bad_request\",reason:\"Document must be a JSON object\"}),n.DB_MISSING=new r({status:404,error:\"not_found\",reason:\"Database not found\"}),n.IDB_ERROR=new r({status:500,error:\"indexed_db_went_bad\",reason:\"unknown\"}),n.WSQ_ERROR=new r({status:500,error:\"web_sql_went_bad\",reason:\"unknown\"}),n.LDB_ERROR=new r({status:500,error:\"levelDB_went_went_bad\",reason:\"unknown\"}),n.FORBIDDEN=new r({status:403,error:\"forbidden\",reason:\"Forbidden by design doc validate_doc_update function\"}),n.INVALID_REV=new r({status:400,error:\"bad_request\",reason:\"Invalid rev format\"}),n.FILE_EXISTS=new r({status:412,error:\"file_exists\",reason:\"The database could not be created, the file already exists.\"}),n.MISSING_STUB=new r({status:412,error:\"missing_stub\"}),n.error=function(e,t,n){function o(t){for(var r in e)\"function\"!=typeof e[r]&&(this[r]=e[r]);void 0!==n&&(this.name=n),void 0!==t&&(this.reason=t)}return o.prototype=r.prototype,new o(t)},n.getErrorTypeByProp=function(e,t,r){var o=n,i=Object.keys(o).filter(function(n){var r=o[n];return\"function\"!=typeof r&&r[e]===t}),s=r&&i.filter(function(e){var t=o[e];return t.message===r})[0]||i[0];return s?o[s]:null},n.generateErrorFromResponse=function(e){var t,r,o,i,s,a=n;return r=e.error===!0&&\"string\"==typeof e.name?e.name:e.error,s=e.reason,o=a.getErrorTypeByProp(\"name\",r,s),e.missing||\"missing\"===s||\"deleted\"===s||\"not_found\"===r?o=a.MISSING_DOC:\"doc_validation\"===r?(o=a.DOC_VALIDATION,i=s):\"bad_request\"===r&&o.message!==s&&(0===s.indexOf(\"unknown stub attachment\")?(o=a.MISSING_STUB,i=s):o=a.BAD_REQUEST),o||(o=a.getErrorTypeByProp(\"status\",e.status,s)||a.UNKNOWN_ERROR),t=a.error(o,s,r),i&&(t.message=i),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.statusText&&(t.name=e.statusText),e.missing&&(t.missing=e.missing),t}},{57:57}],25:[function(e,t,n){(function(e,n){\"use strict\";function r(t){e.browser&&\"console\"in n&&\"info\"in console&&console.info(\"The above 404 is totally normal. \"+t)}t.exports=r}).call(this,e(53),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{53:53}],26:[function(e,t,n){(function(n,r){\"use strict\";function o(e){return String.fromCharCode(255&e)+String.fromCharCode(e>>>8&255)+String.fromCharCode(e>>>16&255)+String.fromCharCode(e>>>24&255)}function i(e){for(var t=\"\",n=0,r=e.length;r>n;n++)t+=o(e[n]);return c.btoa(t)}function s(e,t,n,r){(n>0||r<t.byteLength)&&(t=new Uint8Array(t,n,Math.min(r,t.byteLength)-n)),e.append(t)}function a(e,t,n,r){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t)}var c=e(17),u=e(51),f=e(87),l=r.setImmediate||r.setTimeout,d=32768;t.exports=function(e,t){function r(){var n=m*h,o=n+h;if(m++,v>m)g(_,e,n,o),l(r);else{g(_,e,n,o);var s=_.end(!0),a=i(s);t(null,a),_.destroy()}}if(!n.browser){var o=u.createHash(\"md5\").update(e).digest(\"base64\");return void t(null,o)}var c=\"string\"==typeof e,p=c?e.length:e.byteLength,h=Math.min(d,p),v=Math.ceil(p/h),m=0,_=c?new f:new f.ArrayBuffer,g=c?a:s;r()}}).call(this,e(53),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{17:17,51:51,53:53,87:87}],27:[function(e,t,n){(function(n){\"use strict\";function r(e,t){return d?c(e,{type:t}):p.concat(e.map(function(e){return new p(e,\"binary\")}))}function o(e){e=l(e);var t=a(),n={};Object.keys(e._attachments).forEach(function(t){var r=e._attachments[t];if(!r.stub){var o=s(r.data);n[t]={type:r.content_type,data:o},r.length=o.length,r.follows=!0,delete r.digest,delete r.data}});var o=\"--\"+t+\"\\r\\nContent-Type: application/json\\r\\n\\r\\n\",i=[o,JSON.stringify(e)];Object.keys(n).forEach(function(e){var r=n[e],o=\"\\r\\n--\"+t+\"\\r\\nContent-Disposition: attachment; filename=\"+JSON.stringify(e)+\"\\r\\nContent-Type: \"+r.type+\"\\r\\nContent-Length: \"+r.data.length+\"\\r\\n\\r\\n\";i.push(o),i.push(d?u(r.data):r.data)}),i.push(\"\\r\\n--\"+t+\"--\");var c=\"multipart/related; boundary=\"+t,f=r(i,c);return{headers:{\"Content-Type\":c},body:f}}var i=e(17),s=i.atob,a=e(34),c=e(20),u=e(18),f=e(48),l=f.clone,d=\"undefined\"==typeof n||n.browser,p=e(23);t.exports=o}).call(this,e(53))},{17:17,18:18,20:20,23:23,34:34,48:48,53:53}],28:[function(e,t,n){\"use strict\";function r(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function o(e){if(!/^\\d+\\-./.test(e))return s.error(s.INVALID_REV);var t=e.indexOf(\"-\"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function i(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,s=r.length;s>i;i++)o=[r[i],{status:\"missing\"},[o]];return[{pos:n,ids:o}]}var s=e(24),a=e(34),c=r([\"_id\",\"_rev\",\"_attachments\",\"_deleted\",\"_revisions\",\"_revs_info\",\"_conflicts\",\"_deleted_conflicts\",\"_local_seq\",\"_rev_tree\",\"_replication_id\",\"_replication_state\",\"_replication_state_time\",\"_replication_state_reason\",\"_replication_stats\",\"_removed\"]),u=r([\"_attachments\",\"_replication_id\",\"_replication_state\",\"_replication_state_time\",\"_replication_state_reason\",\"_replication_stats\"]);n.invalidIdError=function(e){var t;if(e?\"string\"!=typeof e?t=s.error(s.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=s.error(s.RESERVED_ID)):t=s.error(s.MISSING_ID),t)throw t},n.parseDoc=function(e,t){var r,f,l,d={status:\"available\"};if(e._deleted&&(d.deleted=!0),t)if(e._id||(e._id=a()),f=a(32,16).toLowerCase(),e._rev){if(l=o(e._rev),l.error)return l;e._rev_tree=[{pos:l.prefix,ids:[l.id,{status:\"missing\"},[[f,d,[]]]]}],r=l.prefix+1}else e._rev_tree=[{pos:1,ids:[f,d,[]]}],r=1;else if(e._revisions&&(e._rev_tree=i(e._revisions,d),r=e._revisions.start,f=e._revisions.ids[0]),!e._rev_tree){if(l=o(e._rev),l.error)return l;r=l.prefix,f=l.id,e._rev_tree=[{pos:r,ids:[f,d,[]]}]}n.invalidIdError(e._id),e._rev=r+\"-\"+f;var p={metadata:{},data:{}};for(var h in e)if(e.hasOwnProperty(h)){var v=\"_\"===h[0];if(v&&!c[h]){var m=s.error(s.DOC_VALIDATION,h);throw m.message=s.DOC_VALIDATION.message+\": \"+h,m}v&&!u[h]?p.metadata[h.slice(1)]=e[h]:p.data[h]=e[h]}return p}},{24:24,34:34}],29:[function(e,t,n){\"use strict\";function r(e){return decodeURIComponent(window.escape(e))}function o(e){return 65>e?e-48:e-55}function i(e,t,n){for(var r=\"\";n>t;)r+=String.fromCharCode(o(e.charCodeAt(t++))<<4|o(e.charCodeAt(t++)));return r}function s(e,t,n){for(var r=\"\";n>t;)r+=String.fromCharCode(o(e.charCodeAt(t+2))<<12|o(e.charCodeAt(t+3))<<8|o(e.charCodeAt(t))<<4|o(e.charCodeAt(t+1))),t+=4;return r}function a(e,t){return\"UTF-8\"===t?r(i(e,0,e.length)):s(e,0,e.length)}t.exports=a},{}],30:[function(e,t,n){\"use strict\";function r(e){for(var t=o,n=t.parser[t.strictMode?\"strict\":\"loose\"].exec(e),r={},i=14;i--;){var s=t.key[i],a=n[i]||\"\",c=-1!==[\"user\",\"password\"].indexOf(s);r[s]=c?decodeURIComponent(a):a}return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,o){n&&(r[t.q.name][n]=o)}),r}var o={strictMode:!1,key:[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],q:{name:\"queryKey\",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/}};t.exports=r},{}],31:[function(e,t,n){\"use strict\";\"function\"==typeof Promise?t.exports=Promise:t.exports=e(61)},{61:61}],32:[function(e,t,n){\"use strict\";function r(){for(var e={},t=new c.Promise(function(t,n){e.resolve=t,e.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.promise=t,c.Promise.resolve().then(function(){return fetch.apply(null,n)}).then(function(t){e.resolve(t)})[\"catch\"](function(t){e.reject(t)}),e}function o(e,t){var n,o,i,s=new Headers,a={method:e.method,credentials:\"include\",headers:s};return e.json&&(s.set(\"Accept\",\"application/json\"),s.set(\"Content-Type\",e.headers[\"Content-Type\"]||\"application/json\")),e.body&&e.body instanceof Blob?u(e.body,function(e){a.body=e}):e.body&&e.processData&&\"string\"!=typeof e.body?a.body=JSON.stringify(e.body):\"body\"in e?a.body=e.body:a.body=null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&s.set(t,e.headers[t])}),n=r(e.url,a),e.timeout>0&&(o=setTimeout(function(){n.reject(new Error(\"Load timeout for resource: \"+e.url))},e.timeout)),n.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(o),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):t(e,i)})[\"catch\"](function(e){t(e,i)}),{abort:n.reject}}function i(e,t){var n,r,o,i=function(){n.abort()};if(n=e.xhr?new e.xhr:new XMLHttpRequest,\"GET\"===e.method&&!e.cache){var s=-1!==e.url.indexOf(\"?\");e.url+=(s?\"&\":\"?\")+\"_nonce=\"+Date.now()}n.open(e.method,e.url),n.withCredentials=!0,\"GET\"===e.method?delete e.headers[\"Content-Type\"]:e.json&&(e.headers.Accept=\"application/json\",e.headers[\"Content-Type\"]=e.headers[\"Content-Type\"]||\"application/json\",e.body&&e.processData&&\"string\"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(n.responseType=\"arraybuffer\"),\"body\"in e||(e.body=null);for(var c in e.headers)e.headers.hasOwnProperty(c)&&n.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(r=setTimeout(i,e.timeout),n.onprogress=function(){clearTimeout(r),r=setTimeout(i,e.timeout)},\"undefined\"==typeof o&&(o=-1!==Object.keys(n).indexOf(\"upload\")&&\"undefined\"!=typeof n.upload),o&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var o;o=e.binary?a([n.response||\"\"],{type:n.getResponseHeader(\"Content-Type\")}):n.responseText,t(null,r,o)}else{var i={};try{i=JSON.parse(n.response)}catch(s){}t(i,r)}}},e.body&&e.body instanceof Blob?u(e.body,function(e){n.send(e)}):n.send(e.body),{abort:i}}function s(){try{return new XMLHttpRequest,!0}catch(e){return!1}}var a=e(20),c=e(48),u=e(21),f=s();t.exports=function(e,t){return f||e.xhr?i(e,t):o(e,t)}},{20:20,21:21,48:48}],33:[function(e,t,n){\"use strict\";var r=e(86).upsert;t.exports=function(e,t,n,o){return r.call(e,t,n,o)}},{86:86}],34:[function(e,t,n){\"use strict\";function r(e){return 0|Math.random()*e}function o(e,t){t=t||i.length;var n=\"\",o=-1;if(e){for(;++o<e;)n+=i[r(t)];return n}for(;++o<36;)switch(o){case 8:case 13:case 18:case 23:n+=\"-\";break;case 19:n+=i[3&r(16)|8];break;default:n+=i[r(16)]}return n}var i=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\");t.exports=o},{}],35:[function(_dereq_,module,exports){\"use strict\";function evalFilter(input){return eval([\"(function () { return \",input,\" })()\"].join(\"\"))}module.exports=evalFilter},{}],36:[function(_dereq_,module,exports){\"use strict\";function evalView(input){return eval([\"(function () {\",\"  return function (doc) {\",\"    var emitted = false;\",\"    var emit = function (a, b) {\",\"      emitted = true;\",\"    };\",\"    var view = \"+input+\";\",\"    view(doc);\",\"    if (emitted) {\",\"      return true;\",\"    }\",\"  }\",\"})()\"].join(\"\\n\"))}module.exports=evalView},{}],37:[function(e,t,n){\"use strict\";function r(e,t,n){for(var r,o=0,i=e.length;i>o;)r=o+i>>>1,n(e[r],t)<0?o=r+1:i=r;return o}function o(e,t,n){var o=r(e,t,n);e.splice(o,0,t)}function i(e){for(var t,n=e.shift(),r=[n.id,n.opts,[]],o=r;e.length;)n=e.shift(),t=[n.id,n.opts,[]],o[2].push(t),o=t;return r}function s(e,t){return e[0]<t[0]?-1:1}function a(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),a=i.tree1,c=i.tree2;(a[1].status||c[1].status)&&(a[1].status=\"available\"===a[1].status||\"available\"===c[1].status?\"available\":\"missing\");for(var u=0;u<c[2].length;u++)if(a[2][0]){for(var f=!1,l=0;l<a[2].length;l++)a[2][l][0]===c[2][u][0]&&(n.push({tree1:a[2][l],tree2:c[2][u]}),f=!0);f||(r=\"new_branch\",o(a[2],c[2][u],s))}else r=\"new_leaf\",a[2][0]=c[2][u]}return{conflicts:r,tree:e}}function c(e,t,n){var r,o=[],i=!1,s=!1;return e.length?(e.forEach(function(e){if(e.pos===t.pos&&e.ids[0]===t.ids[0])r=a(e.ids,t.ids),o.push({pos:e.pos,ids:r.tree}),i=i||r.conflicts,s=!0;else if(n!==!0){var c=e.pos<t.pos?e:t,u=e.pos<t.pos?t:e,f=u.pos-c.pos,l=[],d=[];for(d.push({ids:c.ids,diff:f,parent:null,parentIdx:null});d.length>0;){var p=d.pop();0!==p.diff?p.ids&&p.ids[2].forEach(function(e,t){d.push({ids:e,diff:p.diff-1,parent:p.ids,parentIdx:t})}):p.ids[0]===u.ids[0]&&l.push(p)}var h=l[0];h?(r=a(h.ids,u.ids),h.parent[2][h.parentIdx]=r.tree,o.push({pos:c.pos,ids:c.ids}),i=i||r.conflicts,s=!0):o.push(e)}else o.push(e)}),s||o.push(t),o.sort(function(e,t){return e.pos-t.pos}),{tree:o,conflicts:i||\"internal_node\"}):{tree:[t],conflicts:\"new_leaf\"}}function u(e,t){var n=l.rootToLeaf(e).map(function(e){var n=e.ids.slice(-t);return{pos:e.pos+(e.ids.length-n.length),ids:i(n)}});return n.reduce(function(e,t){return c(e,t,!0).tree},[n.shift()])}var f=e(79),l={};l.merge=function(e,t,n){e=f(!0,[],e),t=f(!0,{},t);var r=c(e,t);return{tree:u(r.tree,n),conflicts:r.conflicts}},l.winningRev=function(e){var t=[];return l.traverseRevTree(e.rev_tree,function(e,n,r,o,i){e&&t.push({pos:n,id:r,deleted:!!i.deleted})}),t.sort(function(e,t){return e.deleted!==t.deleted?e.deleted>t.deleted?1:-1:e.pos!==t.pos?t.pos-e.pos:e.id<t.id?1:-1}),t[0].pos+\"-\"+t[0].id},l.traverseRevTree=function(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,s=i[2],a=t(0===s.length,o,i[0],n.ctx,i[1]),c=0,u=s.length;u>c;c++)r.push({pos:o+1,ids:s[c],ctx:a})},l.collectLeaves=function(e){var t=[];return l.traverseRevTree(e,function(e,n,r,o,i){e&&t.push({rev:n+\"-\"+r,pos:n,opts:i})}),t.sort(function(e,t){return t.pos-e.pos}),t.forEach(function(e){delete e.pos}),t},l.collectConflicts=function(e){var t=l.winningRev(e),n=l.collectLeaves(e.rev_tree),r=[];return n.forEach(function(e){e.rev===t||e.opts.deleted||r.push(e.rev)}),r},l.rootToLeaf=function(e){var t=[];return l.traverseRevTree(e,function(e,n,r,o,i){if(o=o?o.slice(0):[],o.push({id:r,opts:i}),e){var s=n+1-o.length;t.unshift({pos:s,ids:o})}return o}),t},t.exports=l},{79:79}],38:[function(e,t,n){\"use strict\";function r(e,t){e=parseInt(e,10),t=parseInt(t,10),e!==e&&(e=0),t!==t||e>=t?t=(e||1)<<1:t+=1;var n=Math.random(),r=t-e;return~~(r*n+e)}function o(e){var t=0;return e||(t=2e3),r(e,t)}function i(e,t,n,r){return e.retry===!1?(t.emit(\"error\",n),void t.removeAllListeners()):(\"function\"!=typeof e.back_off_function&&(e.back_off_function=o),t.emit(\"requestError\",n),\"active\"===t.state&&(t.emit(\"paused\",n),t.state=\"stopped\",t.once(\"active\",function(){e.current_back_off=s})),e.current_back_off=e.current_back_off||s,e.current_back_off=e.back_off_function(e.current_back_off),void setTimeout(r,e.current_back_off))}var s=0;t.exports=i},{}],39:[function(e,t,n){\"use strict\";function r(e,t,n,o){return e.get(t)[\"catch\"](function(n){if(404===n.status)return\"http\"===e.type()&&s(\"PouchDB is just checking if a remote checkpoint exists.\"),{_id:t};throw n}).then(function(i){return o.cancelled?void 0:(i.last_seq=n,e.put(i)[\"catch\"](function(i){if(409===i.status)return r(e,t,n,o);throw i}))})}function o(e,t,n,r){this.src=e,this.target=t,this.id=n,this.returnValue=r}var i=e(31),s=e(25),a=e(76),c=a.collate;o.prototype.writeCheckpoint=function(e){var t=this;return this.updateTarget(e).then(function(){return t.updateSource(e)})},o.prototype.updateTarget=function(e){return r(this.target,this.id,e,this.returnValue)},o.prototype.updateSource=function(e){var t=this;return this.readOnlySource?i.resolve(!0):r(this.src,this.id,e,this.returnValue)[\"catch\"](function(e){var n=\"number\"==typeof e.status&&4===Math.floor(e.status/100);if(n)return t.readOnlySource=!0,!0;throw e})},o.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.src.get(e.id).then(function(e){return 0===c(t.last_seq,e.last_seq)?e.last_seq:0},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(n){return 401===n.status?(e.readOnlySource=!0,t.last_seq):0});throw n})})[\"catch\"](function(e){if(404!==e.status)throw e;return 0})},t.exports=o},{25:25,31:31,76:76}],40:[function(e,t,n){\"use strict\";function r(e,t,n){var r=n.filter?n.filter.toString():\"\";return e.id().then(function(e){return t.id().then(function(t){var i=e+t+r+JSON.stringify(n.query_params)+n.doc_ids;return o.MD5(i).then(function(e){return e=e.replace(/\\//g,\".\").replace(/\\+/g,\"_\"),\"_local/\"+e})})})}var o=e(48);t.exports=r},{48:48}],41:[function(e,t,n){\"use strict\";function r(e){return/^1-/.test(e)}function o(e,t,n){function o(t,r){var o={revs:!0,open_revs:r,attachments:!0};return e.get(t,o).then(function(e){if(n.cancelled)throw new Error(\"cancelled\");e.forEach(function(e){e.ok&&h.push(e.ok)})})}function i(e){for(var n=t[e].missing,r=[],i=0;i<n.length;i+=c){var s=n.slice(i,Math.min(n.length,i+c));r.push(s)}return a.all(r.map(function(t){return o(e,t)}))}function u(){var e=Object.keys(t);return a.all(e.map(i))}function f(e){return e._attachments&&Object.keys(e._attachments).length>0}function l(o){return e.allDocs({keys:o,include_docs:!0}).then(function(e){if(n.cancelled)throw new Error(\"cancelled\");e.rows.forEach(function(e){!e.deleted&&e.doc&&r(e.value.rev)&&!f(e.doc)&&(h.push(e.doc),delete t[e.id])})})}function d(){var e=Object.keys(t).filter(function(e){var n=t[e].missing;return 1===n.length&&r(n[0])});return e.length>0?l(e):void 0}function p(){return h}t=s(t);var h=[];return a.resolve().then(d).then(u).then(p)}var i=e(48),s=i.clone,a=i.Promise,c=50;t.exports=o},{48:48}],42:[function(e,t,n){\"use strict\";function r(e,t){var n=t.PouchConstructor;return\"string\"==typeof e?new n(e,t):e}function o(e,t,n,o){\"function\"==typeof n&&(o=n,n={}),\"undefined\"==typeof n&&(n={}),n.complete||(n.complete=o||function(){}),n=i.clone(n),n.continuous=n.continuous||n.live,n.retry=\"retry\"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var c=new a(n),u=r(e,n),f=r(t,n);return s(u,f,n,c),c}var i=e(48),s=e(43),a=e(44);t.exports={replicate:o,toPouch:r}},{43:43,44:44,48:48}],43:[function(e,t,n){\"use strict\";function r(e,t,n,u,f){function l(){return A?o.Promise.resolve():a(e,t,n).then(function(n){O=n,A=new i(e,t,O,M)})}function d(){if(0!==x.docs.length){var e=x.docs;return t.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(M.cancelled)throw y(),new Error(\"cancelled\");var n=[],r={};t.forEach(function(e){e.error&&(f.doc_write_failures++,n.push(e),r[e.id]=e)}),P=P.concat(n),f.docs_written+=x.docs.length-n.length;var i=n.filter(function(e){return\"unauthorized\"!==e.name&&\"forbidden\"!==e.name});if(U=[],e.forEach(function(e){var t=r[e._id];t?u.emit(\"denied\",o.clone(t)):U.push(e)}),i.length>0){var s=new Error(\"bulkDocs error\");throw s.other_errors=n,g(\"target.bulkDocs failed to write docs\",s),new Error(\"bulkWrite partial failure\")}},function(t){throw f.doc_write_failures+=e.length,t})}}function p(){return R=!0,A.writeCheckpoint(x.seq).then(function(){if(R=!1,M.cancelled)throw y(),new Error(\"cancelled\");f.last_seq=I=x.seq;var e=o.clone(f);e.docs=U,u.emit(\"change\",e),x=void 0,S()})[\"catch\"](function(e){throw R=!1,g(\"writeCheckpoint completed with error\",e),e})}function h(){var e={};return x.changes.forEach(function(t){\"_user/\"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(M.cancelled)throw y(),new Error(\"cancelled\");x.diffs=e})}function v(){return c(e,x.diffs,M).then(function(e){e.forEach(function(e){delete x.diffs[e._id],f.docs_read++,x.docs.push(e)})})}function m(){if(!M.cancelled&&!x){if(0===k.length)return void _(!0);x=k.shift(),h().then(v).then(d).then(p).then(m)[\"catch\"](function(e){g(\"batch processing terminated with error\",e)})}}function _(e){return 0===q.changes.length?void(0!==k.length||x||((L&&J.live||C)&&(u.state=\"pending\",u.emit(\"paused\"),u.emit(\"uptodate\",f)),C&&y())):void((e||C||q.changes.length>=N)&&(k.push(q),q={seq:0,changes:[],docs:[]},(\"pending\"===u.state||\"stopped\"===u.state)&&(u.state=\"active\",u.emit(\"active\")),m()))}function g(e,t){D||(t.message||(t.message=e),f.ok=!1,f.status=\"aborting\",f.errors.push(t),P=P.concat(t),k=[],q={seq:0,changes:[],docs:[]},y())}function y(){if(!(D||M.cancelled&&(f.status=\"cancelled\",R))){f.status=f.status||\"complete\",f.end_time=new Date,f.last_seq=I,D=M.cancelled=!0;var o=P.filter(function(e){return\"unauthorized\"!==e.name&&\"forbidden\"!==e.name});if(o.length>0){var i=P.pop();P.length>0&&(i.other_errors=P),i.result=f,s(n,u,i,function(){r(e,t,n,u)})}else f.errors=P,u.emit(\"complete\",f),u.removeAllListeners()}}function b(e){if(M.cancelled)return y();var t=o.filterChange(n)(e);t&&(q.seq=e.seq,q.changes.push(e),_(0===k.length))}function E(e){return B=!1,M.cancelled?y():(e.results.length>0?(J.since=e.last_seq,S()):L?(J.live=!0,S()):C=!0,void _(!0))}function w(e){return B=!1,M.cancelled?y():void g(\"changes rejected\",e)}function S(){function t(){o.cancel()}function r(){u.removeListener(\"cancel\",t)}if(!B&&!C&&k.length<j){B=!0,u._changes&&(u.removeListener(\"cancel\",u._abortChanges),u._changes.cancel()),u.once(\"cancel\",t);var o=e.changes(J).on(\"change\",b);o.then(r,r),o.then(E)[\"catch\"](w),n.retry&&(u._changes=o,u._abortChanges=t)}}function T(){l().then(function(){return M.cancelled?void y():A.getCheckpoint().then(function(e){I=e,J={since:I,limit:N,batch_size:N,style:\"all_docs\",doc_ids:F,returnDocs:!0},n.filter&&(\"string\"!=typeof n.filter?J.include_docs=!0:J.filter=n.filter),n.query_params&&(J.query_params=n.query_params),n.view&&(J.view=n.view),S()})})[\"catch\"](function(e){g(\"getCheckpoint rejected with \",e)})}var x,O,A,k=[],q={seq:0,changes:[],docs:[]},R=!1,C=!1,D=!1,I=0,L=n.continuous||n.live||!1,N=n.batch_size||100,j=n.batches_limit||10,B=!1,F=n.doc_ids,M={cancelled:!1},P=[],U=[];f=f||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var J={};return u.ready(e,t),u.cancelled?void y():(u._addedListeners||(u.once(\"cancel\",y),\"function\"==typeof n.onChange&&u.on(\"change\",n.onChange),\"function\"==typeof n.complete&&(u.once(\"error\",n.complete),u.once(\"complete\",function(e){n.complete(null,e)})),u._addedListeners=!0),void(\"undefined\"==typeof n.since?T():l().then(function(){return R=!0,A.writeCheckpoint(n.since)}).then(function(){return R=!1,M.cancelled?void y():(I=n.since,void T())})[\"catch\"](function(e){throw R=!1,g(\"writeCheckpoint completed with error\",e),e})))}var o=e(48),i=e(39),s=e(38),a=e(40),c=e(41);t.exports=r},{38:38,39:39,40:40,41:41,48:48}],44:[function(e,t,n){\"use strict\";function r(){i.call(this),this.cancelled=!1,this.state=\"pending\";var e=this,t=new s(function(t,n){e.once(\"complete\",t),e.once(\"error\",n)});e.then=function(e,n){return t.then(e,n)},e[\"catch\"]=function(e){return t[\"catch\"](e)},e[\"catch\"](function(){})}var o=e(48),i=e(52).EventEmitter,s=o.Promise;o.inherits(r,i),r.prototype.cancel=function(){this.cancelled=!0,this.state=\"cancelled\",this.emit(\"cancel\")},r.prototype.ready=function(e,t){function n(){o.cancel()}function r(){e.removeListener(\"destroyed\",n),t.removeListener(\"destroyed\",n)}var o=this;o._readyCalled||(o._readyCalled=!0,e.once(\"destroyed\",n),t.once(\"destroyed\",n),o.once(\"complete\",r))},t.exports=r},{48:48,52:52}],45:[function(e,t,n){\"use strict\";var r=e(14),o=e(48),i=e(52).EventEmitter;r.adapters={},r.preferredAdapters=[],r.prefix=\"_pouch_\";var s=new i,a=[\"on\",\"addListener\",\"emit\",\"listeners\",\"once\",\"removeAllListeners\",\"removeListener\",\"setMaxListeners\"];a.forEach(function(e){r[e]=s[e].bind(s)}),r.setMaxListeners(0),r.parseAdapter=function(e,t){var n,i,s=e.match(/([a-z\\-]*):\\/\\/(.*)/);if(s){if(e=/http(s?)/.test(s[1])?s[1]+\"://\"+s[2]:s[2],n=s[1],!r.adapters[n].valid())throw\"Invalid adapter\";return{name:e,adapter:s[1]}}var a=\"idb\"in r.adapters&&\"websql\"in r.adapters&&o.hasLocalStorage()&&localStorage[\"_pouch__websqldb_\"+r.prefix+e];if(t.adapter)i=t.adapter;else if(\"undefined\"!=typeof t&&t.db)i=\"leveldb\";else for(var c=0;c<r.preferredAdapters.length;++c)if(i=r.preferredAdapters[c],i in r.adapters){if(a&&\"idb\"===i){console.log('PouchDB is downgrading \"'+e+'\" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}n=r.adapters[i];var u=n&&\"use_prefix\"in n?n.use_prefix:!0;return{name:u?r.prefix+e:e,adapter:i}},r.destroy=o.toPromise(function(e,t,n){console.log(\"PouchDB.destroy() is deprecated and will be removed. Please use db.destroy() instead.\"),(\"function\"==typeof t||\"undefined\"==typeof t)&&(n=t,t={}),e&&\"object\"==typeof e&&(t=e,e=void 0),new r(e,t,function(e,t){return e?n(e):void t.destroy(n)})}),r.adapter=function(e,t,n){t.valid()&&(r.adapters[e]=t,n&&r.preferredAdapters.push(e))},r.plugin=function(e){Object.keys(e).forEach(function(t){r.prototype[t]=e[t]})},r.defaults=function(e){function t(t,n,i){(\"function\"==typeof n||\"undefined\"==typeof n)&&(i=n,n={}),t&&\"object\"==typeof t&&(n=t,t=void 0),n=o.extend(!0,{},e,n),r.call(this,t,n,i)}return o.inherits(t,r),t.destroy=o.toPromise(function(t,n,i){return(\"function\"==typeof n||\"undefined\"==typeof n)&&(i=n,n={}),t&&\"object\"==typeof t&&(n=t,t=void 0),n=o.extend(!0,{},e,n),r.destroy(t,n,i)}),a.forEach(function(e){t[e]=s[e].bind(s)}),t.setMaxListeners(10),t.preferredAdapters=r.preferredAdapters.slice(),Object.keys(r).forEach(function(e){e in t||(t[e]=r[e])}),t},t.exports=r},{14:14,48:48,52:52}],46:[function(e,t,n){\"use strict\";function r(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),\"undefined\"==typeof n&&(n={}),n=i.clone(n),n.PouchConstructor=n.PouchConstructor||this,e=s.toPouch(e,n),t=s.toPouch(t,n),new o(e,t,n,r);\n}function o(e,t,n,r){function o(e){v||(v=!0,d.emit(\"cancel\",e))}function s(e){d.emit(\"change\",{direction:\"pull\",change:e})}function c(e){d.emit(\"change\",{direction:\"push\",change:e})}function u(e){d.emit(\"denied\",{direction:\"push\",doc:e})}function f(e){d.emit(\"denied\",{direction:\"pull\",doc:e})}function l(e){return function(t,n){var r=\"change\"===t&&(n===s||n===c),i=\"cancel\"===t&&n===o,a=t in m&&n===m[t];(r||i||a)&&(t in _||(_[t]={}),_[t][e]=!0,2===Object.keys(_[t]).length&&d.removeAllListeners(t))}}var d=this;this.canceled=!1;var p,h;\"onChange\"in n&&(p=n.onChange,delete n.onChange),\"function\"!=typeof r||n.complete?\"complete\"in n&&(h=n.complete,delete n.complete):h=r,this.push=a(e,t,n),this.pull=a(t,e,n);var v=!1,m={},_={};n.live&&(this.push.on(\"complete\",d.pull.cancel.bind(d.pull)),this.pull.on(\"complete\",d.push.cancel.bind(d.push))),this.on(\"newListener\",function(e){\"change\"===e?(d.pull.on(\"change\",s),d.push.on(\"change\",c)):\"denied\"===e?(d.pull.on(\"denied\",f),d.push.on(\"denied\",u)):\"cancel\"===e?(d.pull.on(\"cancel\",o),d.push.on(\"cancel\",o)):\"error\"===e||\"removeListener\"===e||\"complete\"===e||e in m||(m[e]=function(t){d.emit(e,t)},d.pull.on(e,m[e]),d.push.on(e,m[e]))}),this.on(\"removeListener\",function(e){\"change\"===e?(d.pull.removeListener(\"change\",s),d.push.removeListener(\"change\",c)):\"cancel\"===e?(d.pull.removeListener(\"cancel\",o),d.push.removeListener(\"cancel\",o)):e in m&&\"function\"==typeof m[e]&&(d.pull.removeListener(e,m[e]),d.push.removeListener(e,m[e]),delete m[e])}),this.pull.on(\"removeListener\",l(\"pull\")),this.push.on(\"removeListener\",l(\"push\"));var g=i.Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return d.emit(\"complete\",t),h&&h(null,t),d.removeAllListeners(),t},function(e){throw d.cancel(),d.emit(\"error\",e),h&&h(e),d.removeAllListeners(),e});this.then=function(e,t){return g.then(e,t)},this[\"catch\"]=function(e){return g[\"catch\"](e)}}var i=e(48),s=e(42),a=s.replicate,c=e(52).EventEmitter;i.inherits(o,c),t.exports=r,o.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}},{42:42,48:48,52:52}],47:[function(e,t,n){\"use strict\";function r(){this.isReady=!1,this.failed=!1,this.queue=[]}t.exports=r,r.prototype.execute=function(){var e,t;if(this.failed)for(;e=this.queue.shift();)\"function\"!=typeof e?(t=e.parameters[e.parameters.length-1],\"function\"==typeof t?t(this.failed):\"changes\"===e.name&&\"function\"==typeof t.complete&&t.complete(this.failed)):e(this.failed);else if(this.isReady)for(;e=this.queue.shift();)\"function\"==typeof e?e():e.task=this.db[e.name].apply(this.db,e.parameters)},r.prototype.fail=function(e){this.failed=e,this.execute()},r.prototype.ready=function(e){return this.failed?!1:0===arguments.length?this.isReady:(this.isReady=e?!0:!1,this.db=e,void this.execute())},r.prototype.addTask=function(e,t){if(\"function\"!=typeof e){var n={name:e,parameters:t};return this.queue.push(n),this.failed&&this.execute(),n}this.queue.push(e),this.failed&&this.execute()}},{}],48:[function(e,t,n){(function(t){function r(){return\"undefined\"!=typeof chrome&&\"undefined\"!=typeof chrome.storage&&\"undefined\"!=typeof chrome.storage.local}function o(){if(!(this instanceof o))return new o;var e=this;a.call(this),this.isChrome=r(),this._listeners={},this.hasLocal=!1,this.isChrome||(this.hasLocal=n.hasLocalStorage()),this.isChrome?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):this.hasLocal&&(\"undefined\"!=typeof addEventListener?addEventListener(\"storage\",function(t){e.emit(t.key)}):window.attachEvent(\"storage\",function(t){e.emit(t.key)}))}var i=e(37);n.extend=e(79),n.ajax=e(15),n.createBlob=e(20),n.uuid=e(34),n.getArguments=e(50);var s=e(24),a=e(52).EventEmitter,c=e(78);n.Map=c.Map,n.Set=c.Set;var u=e(28),f=e(31);n.Promise=f;var l=e(17);n.atob=l.atob,n.btoa=l.btoa;var d=e(19),p=e(16),h=e(21);n.binaryStringToBlob=d,n.lastIndexOf=function(e,t){for(var n=e.length-1;n>=0;n--)if(e.charAt(n)===t)return n;return-1},n.clone=function(e){return n.extend(!0,{},e)},n.pick=function(e,t){for(var n={},r=0,o=t.length;o>r;r++){var i=t[r];n[i]=e[i]}return n},n.inherits=e(57),n.call=n.getArguments(function(e){if(e.length){var t=e.shift();\"function\"==typeof t&&t.apply(this,e)}}),n.isLocalId=function(e){return/^_local/.test(e)},n.isDeleted=function(e,t){t||(t=i.winningRev(e));var n=t.indexOf(\"-\");-1!==n&&(t=t.substring(n+1));var r=!1;return i.traverseRevTree(e.rev_tree,function(e,n,o,i,s){o===t&&(r=!!s.deleted)}),r},n.revExists=function(e,t){var n=!1;return i.traverseRevTree(e.rev_tree,function(e,r,o){r+\"-\"+o===t&&(n=!0)}),n},n.filterChange=function(e){var t={},n=e.filter&&\"function\"==typeof e.filter;return t.query=e.query_params,function(r){if(r.doc||(r.doc={}),e.filter&&n&&!e.filter.call(this,r.doc,t))return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}},n.parseDoc=u.parseDoc,n.invalidIdError=u.invalidIdError,n.isCordova=function(){return\"undefined\"!=typeof cordova||\"undefined\"!=typeof PhoneGap||\"undefined\"!=typeof phonegap},n.hasLocalStorage=function(){if(r())return!1;try{return localStorage}catch(e){return!1}},n.Changes=o,n.inherits(o,a),o.prototype.addListener=function(e,r,o,i){function s(){if(a._listeners[r]){if(c)return void(c=\"waiting\");c=!0,o.changes({style:i.style,include_docs:i.include_docs,attachments:i.attachments,conflicts:i.conflicts,continuous:!1,descending:!1,filter:i.filter,doc_ids:i.doc_ids,view:i.view,since:i.since,query_params:i.query_params}).on(\"change\",function(e){e.seq>i.since&&!i.cancelled&&(i.since=e.seq,n.call(i.onChange,e))}).on(\"complete\",function(){\"waiting\"===c&&t.nextTick(function(){a.notify(e)}),c=!1}).on(\"error\",function(){c=!1})}}if(!this._listeners[r]){var a=this,c=!1;this._listeners[r]=s,this.on(e,s)}},o.prototype.removeListener=function(e,t){t in this._listeners&&a.prototype.removeListener.call(this,e,this._listeners[t])},o.prototype.notifyLocalWindows=function(e){this.isChrome?chrome.storage.local.set({dbName:e}):this.hasLocal&&(localStorage[e]=\"a\"===localStorage[e]?\"b\":\"a\")},o.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw new Error(\"once called  more than once\");t=!0,e.apply(this,n)})},n.toPromise=function(e){return n.getArguments(function(r){var o,i=this,s=\"function\"==typeof r[r.length-1]?r.pop():!1;s&&(o=function(e,n){t.nextTick(function(){s(e,n)})});var a=new f(function(t,o){var s;try{var a=n.once(function(e,n){e?o(e):t(n)});r.push(a),s=e.apply(i,r),s&&\"function\"==typeof s.then&&t(s)}catch(c){o(c)}});return o&&a.then(function(e){o(null,e)},o),a.cancel=function(){return this},a})},n.adapterFun=function(t,r){function o(e,t,n){if(i.enabled){for(var r=[e._db_name,t],o=0;o<n.length-1;o++)r.push(n[o]);i.apply(null,r);var s=n[n.length-1];n[n.length-1]=function(n,r){var o=[e._db_name,t];o=o.concat(n?[\"error\",n]:[\"success\",r]),i.apply(null,o),s(n,r)}}}var i=e(54)(\"pouchdb:api\");return n.toPromise(n.getArguments(function(e){if(this._closed)return f.reject(new Error(\"database is closed\"));var n=this;return o(n,t,e),this.taskqueue.isReady?r.apply(this,e):new f(function(r,o){n.taskqueue.addTask(function(i){i?o(i):r(n[t].apply(n,e))})})}))},n.cancellableFun=function(e,t,r){r=r?n.clone(!0,{},r):{};var o=new a,i=r.complete||function(){},s=r.complete=n.once(function(e,t){e?i(e):(o.emit(\"end\",t),i(null,t)),o.removeAllListeners()}),c=r.onChange||function(){},u=0;t.on(\"destroyed\",function(){o.removeAllListeners()}),r.onChange=function(e){c(e),e.seq<=u||(u=e.seq,o.emit(\"change\",e),e.deleted?o.emit(\"delete\",e):1===e.changes.length&&\"1-\"===e.changes[0].rev.slice(0,1)?o.emit(\"create\",e):o.emit(\"update\",e))};var l=new f(function(e,t){r.complete=function(n,r){n?t(n):e(r)}});return l.then(function(e){s(null,e)},s),l.cancel=function(){l.isCancelled=!0,t.taskqueue.isReady&&r.complete(null,{status:\"cancelled\"})},t.taskqueue.isReady?e(t,r,l):t.taskqueue.addTask(function(){l.isCancelled?r.complete(null,{status:\"cancelled\"}):e(t,r,l)}),l.on=o.on.bind(o),l.once=o.once.bind(o),l.addListener=o.addListener.bind(o),l.removeListener=o.removeListener.bind(o),l.removeAllListeners=o.removeAllListeners.bind(o),l.setMaxListeners=o.setMaxListeners.bind(o),l.listeners=o.listeners.bind(o),l.emit=o.emit.bind(o),l},n.MD5=n.toPromise(e(26)),n.explain404=e(25),n.info=function(e){\"undefined\"!=typeof console&&\"info\"in console&&console.info(e)},n.parseUri=e(30),n.compare=function(e,t){return t>e?-1:e>t?1:0},n.updateDoc=function(e,t,r,o,a,c,u){if(n.revExists(e,t.metadata.rev))return r[o]=t,a();var f=i.winningRev(e),l=n.isDeleted(e,f),d=n.isDeleted(t.metadata),p=/^1-/.test(t.metadata.rev);if(l&&!d&&u&&p){var h=t.data;h._rev=f,h._id=t.metadata.id,t=n.parseDoc(h,u)}var v=i.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),m=u&&(l&&d||!l&&\"new_leaf\"!==v.conflicts||l&&!d&&\"new_branch\"===v.conflicts);if(m){var _=s.error(s.REV_CONFLICT);return r[o]=_,a()}var g=t.metadata.rev;t.metadata.rev_tree=v.tree,e.rev_map&&(t.metadata.rev_map=e.rev_map);var y=i.winningRev(t.metadata),b=n.isDeleted(t.metadata,y),E=l===b?0:b>l?-1:1,w=n.isDeleted(t.metadata,g);c(t,y,b,w,!0,E,o,a)},n.processDocs=function(e,t,r,o,a,c,u,f){function l(e,t,r){var o=i.winningRev(e.metadata),f=n.isDeleted(e.metadata,o);if(\"was_delete\"in u&&f)return a[t]=s.error(s.MISSING_DOC,\"deleted\"),r();var l=f?0:1;c(e,o,f,f,!1,l,t,r)}function d(){++v===m&&f&&f()}if(e.length){var p=u.new_edits,h=new n.Map,v=0,m=e.length;e.forEach(function(e,r){if(e._id&&n.isLocalId(e._id))return void t[e._deleted?\"_removeLocal\":\"_putLocal\"](e,{ctx:o},function(e){e?a[r]=e:a[r]={ok:!0},d()});var i=e.metadata.id;h.has(i)?(m--,h.get(i).push([e,r])):h.set(i,[[e,r]])}),h.forEach(function(e,t){function o(){++s<e.length?i():d()}function i(){var i=e[s],u=i[0],f=i[1];r.has(t)?n.updateDoc(r.get(t),u,a,f,o,c,p):l(u,f,o)}var s=0;i()})}},n.preprocessAttachments=function(e,t,r){function o(e){try{return l.atob(e)}catch(t){var n=s.error(s.BAD_ARG,\"Attachments need to be base64 encoded\");return{error:n}}}function i(e,r){if(e.stub)return r();if(\"string\"==typeof e.data){var i=o(e.data);if(i.error)return r(i.error);e.length=i.length,\"blob\"===t?e.data=d(i,e.content_type):\"base64\"===t?e.data=l.btoa(i):e.data=i,n.MD5(i).then(function(t){e.digest=\"md5-\"+t,r()})}else h(e.data,function(o){\"binary\"===t?e.data=p(o):\"base64\"===t&&(e.data=l.btoa(p(o))),n.MD5(o).then(function(t){e.digest=\"md5-\"+t,e.length=o.byteLength,r()})})}function a(){u++,e.length===u&&(c?r(c):r())}if(!e.length)return r();var c,u=0;e.forEach(function(e){function t(e){c=e,r++,r===n.length&&a()}var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],r=0;if(!n.length)return a();for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&i(e.data._attachments[o],t)})},n.compactTree=function(e){var t=[];return i.traverseRevTree(e.rev_tree,function(e,n,r,o,i){\"available\"!==i.status||e||(t.push(n+\"-\"+r),i.status=\"missing\")}),t};var v=e(88);n.safeJsonParse=function(e){try{return JSON.parse(e)}catch(t){return v.parse(e)}},n.safeJsonStringify=function(e){try{return JSON.stringify(e)}catch(t){return v.stringify(e)}}}).call(this,e(53))},{15:15,16:16,17:17,19:19,20:20,21:21,24:24,25:25,26:26,28:28,30:30,31:31,34:34,37:37,50:50,52:52,53:53,54:54,57:57,78:78,79:79,88:88}],49:[function(e,t,n){t.exports=\"3.6.0\"},{}],50:[function(e,t,n){\"use strict\";function r(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}t.exports=r},{}],51:[function(e,t,n){},{}],52:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return\"function\"==typeof e}function i(e){return\"number\"==typeof e}function s(e){return\"object\"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError(\"n must be a positive number\");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,c,u;if(this._events||(this._events={}),\"error\"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified \"error\" event.')}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),c=1;r>c;c++)i[c-1]=arguments[c];n.apply(this,i)}else if(s(n)){for(r=arguments.length,i=new Array(r-1),c=1;r>c;c++)i[c-1]=arguments[c];for(u=n.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError(\"listener must be a function\");if(this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[e].length),\"function\"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError(\"listener must be a function\");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit(\"removeListener\",e,t);else if(s(n)){for(a=i;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit(\"removeListener\",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)\"removeListener\"!==t&&this.removeAllListeners(t);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],53:[function(e,t,n){function r(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}a=!1}}function o(){}var i=t.exports={},s=[],a=!1;i.nextTick=function(e){s.push(e),a||setTimeout(r,0)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(e){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(e){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},{}],54:[function(e,t,n){function r(){return\"WebkitAppearance\"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?\"%c\":\"\")+this.namespace+(t?\" %c\":\" \")+e[0]+(t?\"%c \":\" \")+\"+\"+n.humanize(this.diff),!t)return e;var r=\"color: \"+this.color;e=[e[0],r,\"color: inherit\"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){\"%\"!==e&&(o++,\"%c\"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem(\"debug\"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}n=t.exports=e(55),n.log=i,n.formatArgs=o,n.save=s,n.load=a,n.useColors=r,n.storage=\"undefined\"!=typeof chrome&&\"undefined\"!=typeof chrome.storage?chrome.storage.local:c(),n.colors=[\"lightseagreen\",\"forestgreen\",\"goldenrod\",\"dodgerblue\",\"darkorchid\",\"crimson\"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{55:55}],55:[function(e,t,n){function r(){return n.colors[f++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(u||t);e.diff=i,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),\"string\"!=typeof s[0]&&(s=[\"%o\"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if(\"%\"===t)return t;a++;var o=n.formatters[r];if(\"function\"==typeof o){var i=s[a];t=o.call(e,i),s.splice(a,1),a--}return t}),\"function\"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var c=o.log||n.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,o.enabled=!0;var i=n.enabled(e)?o:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||\"\").split(/[\\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\\*/g,\".*?\"),\"-\"===e[0]?n.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):n.names.push(new RegExp(\"^\"+e+\"$\")))}function s(){n.enable(\"\")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=c,n.disable=s,n.enable=i,n.enabled=a,n.humanize=e(56),n.names=[],n.skips=[],n.formatters={};var u,f=0},{56:56}],56:[function(e,t,n){function r(e){if(e=\"\"+e,!(e.length>1e4)){var t=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||\"ms\").toLowerCase();switch(r){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return n*l;case\"days\":case\"day\":case\"d\":return n*f;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return n*u;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return n*c;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return n*a;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return n}}}}function o(e){return e>=f?Math.round(e/f)+\"d\":e>=u?Math.round(e/u)+\"h\":e>=c?Math.round(e/c)+\"m\":e>=a?Math.round(e/a)+\"s\":e+\"ms\"}function i(e){return s(e,f,\"day\")||s(e,u,\"hour\")||s(e,c,\"minute\")||s(e,a,\"second\")||e+\" ms\"}function s(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+\" \"+n:Math.ceil(e/t)+\" \"+n+\"s\"}var a=1e3,c=60*a,u=60*c,f=24*u,l=365.25*f;t.exports=function(e,t){return t=t||{},\"string\"==typeof e?r(e):t[\"long\"]?i(e):o(e)}},{}],57:[function(e,t,n){\"function\"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],58:[function(e,t,n){\"use strict\";function r(){}t.exports=r},{}],59:[function(e,t,n){\"use strict\";function r(e){function t(e,t){function o(e){u[t]=e,++f===n&!r&&(r=!0,c.resolve(d,u))}s(e).then(o,function(e){r||(r=!0,c.reject(d,e))})}if(\"[object Array]\"!==Object.prototype.toString.call(e))return i(new TypeError(\"must be an array\"));var n=e.length,r=!1;if(!n)return s([]);for(var u=new Array(n),f=0,l=-1,d=new o(a);++l<n;)t(e[l],l);return d}var o=e(62),i=e(65),s=e(66),a=e(58),c=e(60);t.exports=r},{58:58,60:60,62:62,65:65,66:66}],60:[function(e,t,n){\"use strict\";function r(e){var t=e&&e.then;return e&&\"object\"==typeof e&&\"function\"==typeof t?function(){t.apply(e,arguments)}:void 0}var o=e(69),i=e(67),s=e(68);n.resolve=function(e,t){var a=o(r,t);if(\"error\"===a.status)return n.reject(e,a.value);var c=a.value;if(c)i.safely(e,c);else{e.state=s.FULFILLED,e.outcome=t;for(var u=-1,f=e.queue.length;++u<f;)e.queue[u].callFulfilled(t)}return e},n.reject=function(e,t){e.state=s.REJECTED,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e}},{67:67,68:68,69:69}],61:[function(e,t,n){t.exports=n=e(62),n.resolve=e(66),n.reject=e(65),n.all=e(59),n.race=e(64)},{59:59,62:62,64:64,65:65,66:66}],62:[function(e,t,n){\"use strict\";function r(e){if(!(this instanceof r))return new r(e);if(\"function\"!=typeof e)throw new TypeError(\"resolver must be a function\");this.state=a.PENDING,this.queue=[],this.outcome=void 0,e!==i&&s.safely(this,e)}var o=e(70),i=e(58),s=e(67),a=e(68),c=e(63);t.exports=r,r.prototype[\"catch\"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){if(\"function\"!=typeof e&&this.state===a.FULFILLED||\"function\"!=typeof t&&this.state===a.REJECTED)return this;var n=new r(i);if(this.state!==a.PENDING){var s=this.state===a.FULFILLED?e:t;o(n,s,this.outcome)}else this.queue.push(new c(n,e,t));return n}},{58:58,63:63,67:67,68:68,70:70}],63:[function(e,t,n){\"use strict\";function r(e,t,n){this.promise=e,\"function\"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var o=e(60),i=e(70);t.exports=r,r.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){o.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)}},{60:60,70:70}],64:[function(e,t,n){\"use strict\";function r(e){function t(e){s(e).then(function(e){r||(r=!0,c.resolve(f,e))},function(e){r||(r=!0,c.reject(f,e))})}if(\"[object Array]\"!==Object.prototype.toString.call(e))return i(new TypeError(\"must be an array\"));var n=e.length,r=!1;if(!n)return s([]);for(var u=-1,f=new o(a);++u<n;)t(e[u]);return f}var o=e(62),i=e(65),s=e(66),a=e(58),c=e(60);t.exports=r},{58:58,60:60,62:62,65:65,66:66}],65:[function(e,t,n){\"use strict\";function r(e){var t=new o(i);return s.reject(t,e)}var o=e(62),i=e(58),s=e(60);t.exports=r},{58:58,60:60,62:62}],66:[function(e,t,n){\"use strict\";function r(e){if(e)return e instanceof o?e:s.resolve(new o(i),e);var t=typeof e;switch(t){case\"boolean\":return a;case\"undefined\":return u;case\"object\":return c;case\"number\":return f;case\"string\":return l}}var o=e(62),i=e(58),s=e(60);t.exports=r;var a=s.resolve(new o(i),!1),c=s.resolve(new o(i),null),u=s.resolve(new o(i),void 0),f=s.resolve(new o(i),0),l=s.resolve(new o(i),\"\")},{58:58,60:60,62:62}],67:[function(e,t,n){\"use strict\";function r(e,t){function n(t){a||(a=!0,o.reject(e,t))}function r(t){a||(a=!0,o.resolve(e,t))}function s(){t(r,n)}var a=!1,c=i(s);\"error\"===c.status&&n(c.value)}var o=e(60),i=e(69);n.safely=r},{60:60,69:69}],68:[function(e,t,n){n.REJECTED=[\"REJECTED\"],n.FULFILLED=[\"FULFILLED\"],n.PENDING=[\"PENDING\"]},{}],69:[function(e,t,n){\"use strict\";function r(e,t){var n={};try{n.value=e(t),n.status=\"success\"}catch(r){n.status=\"error\",n.value=r}return n}t.exports=r},{}],70:[function(e,t,n){\"use strict\";function r(e,t,n){o(function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError(\"Cannot resolve promise with itself\")):i.resolve(e,r)})}var o=e(71),i=e(60);t.exports=r},{60:60,71:71}],71:[function(e,t,n){\"use strict\";function r(){i=!0;for(var e,t,n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}function o(e){1!==c.push(e)||i||s()}for(var i,s,a=[e(51),e(73),e(72),e(74),e(75)],c=[],u=-1,f=a.length;++u<f;)if(a[u]&&a[u].test&&a[u].test()){s=a[u].install(r);break}t.exports=o},{51:51,72:72,73:73,74:74,75:75}],72:[function(e,t,n){(function(e){\"use strict\";n.test=function(){return e.setImmediate?!1:\"undefined\"!=typeof e.MessageChannel},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],73:[function(e,t,n){(function(e){\"use strict\";var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,o=new t(n),i=e.document.createTextNode(\"\");return o.observe(i,{characterData:!0}),function(){i.data=r=++r%2}}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],74:[function(e,t,n){(function(e){\"use strict\";n.test=function(){return\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")},n.install=function(t){return function(){var n=e.document.createElement(\"script\");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],75:[function(e,t,n){\"use strict\";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],76:[function(e,t,n){\"use strict\";function r(e){if(null!==e)switch(typeof e){case\"boolean\":return e?1:0;case\"number\":return f(e);case\"string\":return e.replace(/\\u0002/g,\"\u0002\u0002\").replace(/\\u0001/g,\"\u0001\u0002\").replace(/\\u0000/g,\"\u0001\u0001\");case\"object\":var t=Array.isArray(e),r=t?e:Object.keys(e),o=-1,i=r.length,s=\"\";if(t)for(;++o<i;)s+=n.toIndexableString(r[o]);else for(;++o<i;){var a=r[o];s+=n.toIndexableString(a)+n.toIndexableString(e[a])}return s}return\"\"}function o(e,t){var n,r=t,o=\"1\"===e[t];if(o)n=0,t++;else{var i=\"0\"===e[t];t++;var s=\"\",a=e.substring(t,t+d),c=parseInt(a,10)+l;for(i&&(c=-c),t+=d;;){var u=e[t];if(\"\\x00\"===u)break;s+=u,t++}s=s.split(\".\"),n=1===s.length?parseInt(s,10):parseFloat(s[0]+\".\"+s[1]),i&&(n-=10),0!==c&&(n=parseFloat(n+\"e\"+c))}return{num:n,length:t-r}}function i(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===e.length-2){var s=e.pop();o[s]=n}else e.push(n)}}function s(e,t){for(var r=Math.min(e.length,t.length),o=0;r>o;o++){var i=n.collate(e[o],t[o]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}function a(e,t){return e===t?0:e>t?1:-1}function c(e,t){for(var r=Object.keys(e),o=Object.keys(t),i=Math.min(r.length,o.length),s=0;i>s;s++){var a=n.collate(r[s],o[s]);if(0!==a)return a;if(a=n.collate(e[r[s]],t[o[s]]),0!==a)return a}return r.length===o.length?0:r.length>o.length?1:-1}function u(e){var t=[\"boolean\",\"number\",\"string\",\"object\"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:3>n?n+2:n+3:Array.isArray(e)?5:void 0}function f(e){if(0===e)return\"1\";var t=e.toExponential().split(/e\\+?/),n=parseInt(t[1],10),r=0>e,o=r?\"0\":\"2\",i=(r?-n:n)-l,s=h.padLeft(i.toString(),\"0\",d);o+=p+s;var a=Math.abs(parseFloat(t[0]));r&&(a=10-a);var c=a.toFixed(20);return c=c.replace(/\\.?0+$/,\"\"),o+=p+c}var l=-324,d=3,p=\"\",h=e(77);n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=u(e),o=u(t);if(r-o!==0)return r-o;if(null===e)return 0;switch(typeof e){case\"number\":return e-t;case\"boolean\":return e===t?0:t>e?-1:1;case\"string\":return a(e,t)}return Array.isArray(e)?s(e,t):c(e,t)},n.normalizeKey=function(e){switch(typeof e){case\"undefined\":return null;case\"number\":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case\"object\":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var o=0;r>o;o++)e[o]=n.normalizeKey(t[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];\"undefined\"!=typeof s&&(e[i]=n.normalizeKey(s))}}}}return e},n.toIndexableString=function(e){var t=\"\\x00\";return e=n.normalizeKey(e),u(e)+p+r(e)+t},n.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var s=e[r++];if(\"\\x00\"!==s)switch(s){case\"1\":t.push(null);break;case\"2\":t.push(\"1\"===e[r]),r++;break;case\"3\":var a=o(e,r);t.push(a.num),r+=a.length;break;case\"4\":for(var c=\"\";;){var u=e[r];if(\"\\x00\"===u)break;c+=u,r++}c=c.replace(/\\u0001\\u0001/g,\"\\x00\").replace(/\\u0001\\u0002/g,\"\u0001\").replace(/\\u0002\\u0002/g,\"\u0002\"),t.push(c);break;case\"5\":var f={element:[],index:t.length};t.push(f.element),n.push(f);break;case\"6\":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error(\"bad collationIndex or unexpectedly reached end of input: \"+s)}else{if(1===t.length)return t.pop();i(t,n)}}}},{77:77}],77:[function(e,t,n){\"use strict\";function r(e,t,n){for(var r=\"\",o=n-e.length;r.length<o;)r+=t;return r}n.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},n.padRight=function(e,t,n){var o=r(e,t,n);return e+o},n.stringLexCompare=function(e,t){var n,r=e.length,o=t.length;for(n=0;r>n;n++){if(n===o)return 1;var i=e.charAt(n),s=t.charAt(n);if(i!==s)return s>i?-1:1}return o>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n=\"\";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&\"0\"!==n&&(n=\"-\"+n),n}},{}],78:[function(e,t,n){\"use strict\";function r(){this.store={}}function o(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.add(e[t])}n.Map=r,n.Set=o,r.prototype.mangle=function(e){if(\"string\"!=typeof e)throw new TypeError(\"key must be a string but Got \"+e);return\"$\"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var n=this.mangle(e);return this.store[n]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype[\"delete\"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){var t=this,n=Object.keys(t.store);n.forEach(function(n){var r=t.store[n];n=t.unmangle(n),e(r,n)})},o.prototype.add=function(e){return this.store.set(e,!0)},o.prototype.has=function(e){return this.store.has(e)},o.prototype[\"delete\"]=function(e){return this.store[\"delete\"](e)}},{}],79:[function(e,t,n){\"use strict\";function r(e){return null===e?String(e):\"object\"==typeof e||\"function\"==typeof e?u[p.call(e)]||\"object\":typeof e}function o(e){return null!==e&&e===e.window}function i(e){if(!e||\"object\"!==r(e)||e.nodeType||o(e))return!1;try{if(e.constructor&&!h.call(e,\"constructor\")&&!h.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(t){return!1}var n;for(n in e);return void 0===n||h.call(e,n)}function s(e){return\"function\"===r(e)}function a(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var o={};e.push({args:r,result:{container:o,key:\"key\"}});for(var i;i=e.pop();)c(e,i.args,i.result);return o.key}function c(e,t,n){var r,o,a,c,u,f,l,d=t[0]||{},p=1,h=t.length,m=!1,_=/\\d+/;for(\"boolean\"==typeof d&&(m=d,d=t[1]||{},p=2),\"object\"==typeof d||s(d)||(d={}),h===p&&(d=this,--p);h>p;p++)if(null!=(r=t[p])){l=v(r);for(o in r)if(!(o in Object.prototype)){if(l&&!_.test(o))continue;if(a=d[o],c=r[o],d===c)continue;m&&c&&(i(c)||(u=v(c)))?(u?(u=!1,f=a&&v(a)?a:[]):f=a&&i(a)?a:{},e.push({args:[m,f,c],result:{container:d,key:o}})):void 0!==c&&(v(r)&&s(c)||(d[o]=c))}}n.container[n.key]=d}for(var u={},f=[\"Boolean\",\"Number\",\"String\",\"Function\",\"Array\",\"Date\",\"RegExp\",\"Object\",\"Error\"],l=0;l<f.length;l++){var d=f[l];u[\"[object \"+d+\"]\"]=d.toLowerCase()}var p=u.toString,h=u.hasOwnProperty,v=Array.isArray||function(e){return\"array\"===r(e)};t.exports=a;\n},{}],80:[function(e,t,n){\"use strict\";var r=e(84),o=e(85),i=o.Promise;t.exports=function(e){var t=e.db,n=e.viewName,s=e.map,a=e.reduce,c=e.temporary,u=s.toString()+(a&&a.toString())+\"undefined\";if(!c&&t._cachedViews){var f=t._cachedViews[u];if(f)return i.resolve(f)}return t.info().then(function(e){function i(e){e.views=e.views||{};var t=n;-1===t.indexOf(\"/\")&&(t=n+\"/\"+n);var r=e.views[t]=e.views[t]||{};if(!r[f])return r[f]=!0,e}var f=e.db_name+\"-mrview-\"+(c?\"temp\":o.MD5(u));return r(t,\"_local/mrviews\",i).then(function(){return t.registerDependentDatabase(f).then(function(e){var n=e.db;n.auto_compaction=!0;var r={name:f,db:n,sourceDB:t,adapter:t.adapter,mapFun:s,reduceFun:a};return r.db.get(\"_local/lastSeq\")[\"catch\"](function(e){if(404!==e.status)throw e}).then(function(e){return r.seq=e?e.seq:0,c||(t._cachedViews=t._cachedViews||{},t._cachedViews[u]=r,r.db.on(\"destroyed\",function(){delete t._cachedViews[u]})),r})})})})}},{84:84,85:85}],81:[function(_dereq_,module,exports){\"use strict\";module.exports=function(func,emit,sum,log,isArray,toJSON){return eval(\"'use strict'; (\"+func.replace(/;\\s*$/,\"\")+\");\")}},{}],82:[function(e,t,n){(function(t){\"use strict\";function r(e){return-1===e.indexOf(\"/\")?[e,e]:e.split(\"/\")}function o(e){return 1===e.length&&/^1-/.test(e[0].rev)}function i(e,t){try{e.emit(\"error\",t)}catch(n){console.error(\"The user's map/reduce function threw an uncaught error.\\nYou can debug this error by doing:\\nmyDatabase.on('error', function (err) { debugger; });\\nPlease double-check your map/reduce function.\"),console.error(t)}}function s(e,t,n){try{return{output:t.apply(null,n)}}catch(r){return i(e,r),{error:r}}}function a(e,t){var n=I(e.key,t.key);return 0!==n?n:I(e.value,t.value)}function c(e,t,n){return n=n||0,\"number\"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function u(e){var t=e.value,n=t&&\"object\"==typeof t&&t._id||e.id;return n}function f(e){var t=\"builtin \"+e+\" function requires map values to be numbers or number arrays\";return new q(t)}function l(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];if(\"number\"!=typeof o){if(!Array.isArray(o))throw f(\"_sum\");t=\"number\"==typeof t?[t]:t;for(var i=0,s=o.length;s>i;i++){var a=o[i];if(\"number\"!=typeof a)throw f(\"_sum\");\"undefined\"==typeof t[i]?t.push(a):t[i]+=a}}else\"number\"==typeof t?t+=o:t[0]+=o}return t}function d(e,t,n,r){var o=t[e];\"undefined\"!=typeof o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),n.push(e+\"=\"+o))}function p(e,t){var n=e.descending?\"endkey\":\"startkey\",r=e.descending?\"startkey\":\"endkey\";if(\"undefined\"!=typeof e[n]&&\"undefined\"!=typeof e[r]&&I(e[n],e[r])>0)throw new A(\"No rows can match your key range, reverse your start_key and end_key or set {descending : true}\");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new A(\"{include_docs:true} is invalid for reduce\");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new A(\"Multi-key fetches for reduce views must use {group: true}\")}if(e.group_level){if(\"number\"!=typeof e.group_level)throw new A('Invalid value for integer: \"'+e.group_level+'\"');if(e.group_level<0)throw new A('Invalid value for positive integer: \"'+e.group_level+'\"')}}function h(e,t,n){var o,i=[],s=\"GET\";if(d(\"reduce\",n,i),d(\"include_docs\",n,i),d(\"attachments\",n,i),d(\"limit\",n,i),d(\"descending\",n,i),d(\"group\",n,i),d(\"group_level\",n,i),d(\"skip\",n,i),d(\"stale\",n,i),d(\"conflicts\",n,i),d(\"startkey\",n,i,!0),d(\"endkey\",n,i,!0),d(\"inclusive_end\",n,i),d(\"key\",n,i,!0),i=i.join(\"&\"),i=\"\"===i?\"\":\"?\"+i,\"undefined\"!=typeof n.keys){var a=2e3,c=\"keys=\"+encodeURIComponent(JSON.stringify(n.keys));c.length+i.length+1<=a?i+=(\"?\"===i[0]?\"&\":\"?\")+c:(s=\"POST\",\"string\"==typeof t?o=JSON.stringify({keys:n.keys}):t.keys=n.keys)}if(\"string\"==typeof t){var u=r(t);return e.request({method:s,url:\"_design/\"+u[0]+\"/_view/\"+u[1]+i,body:o})}return o=o||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?o[e]=t[e]:o[e]=t[e].toString()}),e.request({method:\"POST\",url:\"_temp_view\"+i,body:o})}function v(e){return function(t){if(404===t.status)return e;throw t}}function m(e,t,n){function r(){return o(l)?M.resolve(c):t.db.get(a)[\"catch\"](v(c))}function i(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):M.resolve({rows:[]})}function s(e,t){for(var n=[],r={},o=0,i=t.rows.length;i>o;o++){var s=t.rows[o],a=s.doc;if(a&&(n.push(a),r[a._id]=!0,a._deleted=!f[a._id],!a._deleted)){var c=f[a._id];\"value\"in c&&(a.value=c.value)}}var u=Object.keys(f);return u.forEach(function(e){if(!r[e]){var t={_id:e},o=f[e];\"value\"in o&&(t.value=o.value),n.push(t)}}),e.keys=F.uniq(u.concat(e.keys)),n.push(e),n}var a=\"_local/doc_\"+e,c={_id:a,keys:[]},u=n[e],f=u.indexableKeysToKeyValues,l=u.changes;return r().then(function(e){return i(e).then(function(t){return s(e,t)})})}function _(e,t,n){var r=\"_local/lastSeq\";return e.db.get(r)[\"catch\"](v({_id:r,seq:0})).then(function(r){var o=Object.keys(t);return M.all(o.map(function(n){return m(n,e,t)})).then(function(t){var o=F.flatten(t);return r.seq=n,o.push(r),e.db.bulkDocs({docs:o})})})}function g(e){var t=\"string\"==typeof e?e:e.name,n=P[t];return n||(n=P[t]=new D),n}function y(e){return F.sequentialize(g(e),function(){return b(e)})()}function b(e){function t(e,t){var n={id:o._id,key:N(e)};\"undefined\"!=typeof t&&null!==t&&(n.value=N(t)),r.push(n)}function n(t,n){return function(){return _(e,t,n)}}var r,o,i;if(\"function\"==typeof e.mapFun&&2===e.mapFun.length){var c=e.mapFun;i=function(e){return c(e,t)}}else i=B(e.mapFun.toString(),t,l,R,Array.isArray,JSON.parse);var u=e.seq||0,f=new D;return new M(function(t,c){function l(){f.finish().then(function(){e.seq=u,t()})}function d(){function t(e){c(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:\"all_docs\",since:u,limit:J}).on(\"complete\",function(t){var c=t.results;if(!c.length)return l();for(var p={},h=0,v=c.length;v>h;h++){var m=c[h];if(\"_\"!==m.doc._id[0]){r=[],o=m.doc,o._deleted||s(e.sourceDB,i,[o]),r.sort(a);for(var _,g={},y=0,b=r.length;b>y;y++){var E=r[y],w=[E.key,E.id];0===I(E.key,_)&&w.push(y);var S=L(w);g[S]=E,_=E.key}p[m.doc._id]={indexableKeysToKeyValues:g,changes:m.changes}}u=m.seq}return f.add(n(p,u)),c.length<J?l():d()}).on(\"error\",t)}d()})}function E(e,t,n){0===n.group_level&&delete n.group_level;var r,o=n.group||n.group_level;r=H[e.reduceFun]?H[e.reduceFun]:B(e.reduceFun.toString(),null,l,R,Array.isArray,JSON.parse);var i=[],a=n.group_level;t.forEach(function(e){var t=i[i.length-1],n=o?e.key:null;return o&&Array.isArray(n)&&\"number\"==typeof a&&(n=n.length>a?n.slice(0,a):n),t&&0===I(t.key[0][0],n)?(t.key.push([n,e.id]),void t.value.push(e.value)):void i.push({key:[[n,e.id]],value:[e.value]})});for(var u=0,f=i.length;f>u;u++){var d=i[u],p=s(e.sourceDB,r,[d.key,d.value,!1]);if(p.error&&p.error instanceof q)throw p.error;d.value=p.error?null:p.output,d.key=d.key[0][0]}return{rows:c(i,n.limit,n.skip)}}function w(e,t){return F.sequentialize(g(e),function(){return S(e,t)})()}function S(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if(\"value\"in e.doc&&\"object\"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=[\"id\",\"key\",\"value\"];if(!(n>t||t>n))return e.doc.value}var r=C.parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:\"value\"in e.doc?e.doc.value:null}})})}function r(n){var r;if(r=i?E(e,n,t):{total_rows:o,offset:s,rows:n},t.include_docs){var a=F.uniq(n.map(u));return e.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t[\"$\"+e.id]=e.doc)}),n.forEach(function(e){var n=u(e),r=t[\"$\"+n];r&&(e.doc=r)}),r})}return r}var o,i=e.reduceFun&&t.reduce!==!1,s=t.skip||0;\"undefined\"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys);var a=function(e){return e.reduce(function(e,t){return e.concat(t)})};if(\"undefined\"!=typeof t.keys){var c=t.keys,f=c.map(function(e){var t={startkey:L([e]),endkey:L([e,{}])};return n(t)});return M.all(f).then(a).then(r)}var l={descending:t.descending};if(\"undefined\"!=typeof t.startkey&&(l.startkey=L(t.descending?[t.startkey,{}]:[t.startkey])),\"undefined\"!=typeof t.endkey){var d=t.inclusive_end!==!1;t.descending&&(d=!d),l.endkey=L(d?[t.endkey,{}]:[t.endkey])}if(\"undefined\"!=typeof t.key){var p=L([t.key]),h=L([t.key,{}]);l.descending?(l.endkey=p,l.startkey=h):(l.startkey=p,l.endkey=h)}return i||(\"number\"==typeof t.limit&&(l.limit=t.limit),l.skip=s),n(l).then(r)}function T(e){return e.request({method:\"POST\",url:\"_view_cleanup\"})}function x(e){return e.get(\"_local/mrviews\").then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=r(e),o=\"_design/\"+t[0],i=t[1];n[o]=n[o]||{},n[o][i]=!0});var o={keys:Object.keys(n),include_docs:!0};return e.allDocs(o).then(function(r){var o={};r.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var i=r+\"/\"+n;t.views[i]||(i=n);var s=Object.keys(t.views[i]),a=e.doc&&e.doc.views&&e.doc.views[n];s.forEach(function(e){o[e]=o[e]||a})})});var i=Object.keys(o).filter(function(e){return!o[e]}),s=i.map(function(t){return F.sequentialize(g(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return M.all(s).then(function(){return{ok:!0}})})},v({ok:!0}))}function O(e,n,o){if(\"http\"===e.type())return h(e,n,o);if(\"string\"!=typeof n){p(o,n);var i={db:e,viewName:\"temp_view/temp_view\",map:n.map,reduce:n.reduce,temporary:!0};return U.add(function(){return j(i).then(function(e){function t(){return e.db.destroy()}return F.fin(y(e).then(function(){return w(e,o)}),t)})}),U.finish()}var s=n,a=r(s),c=a[0],u=a[1];return e.get(\"_design/\"+c).then(function(n){var r=n.views&&n.views[u];if(!r||\"string\"!=typeof r.map)throw new k(\"ddoc \"+c+\" has no view named \"+u);p(o,r);var i={db:e,viewName:s,map:r.map,reduce:r.reduce};return j(i).then(function(e){return\"ok\"===o.stale||\"update_after\"===o.stale?(\"update_after\"===o.stale&&t.nextTick(function(){y(e)}),w(e,o)):y(e).then(function(){return w(e,o)})})})}function A(e){this.status=400,this.name=\"query_parse_error\",this.message=e,this.error=!0;try{Error.captureStackTrace(this,A)}catch(t){}}function k(e){this.status=404,this.name=\"not_found\",this.message=e,this.error=!0;try{Error.captureStackTrace(this,k)}catch(t){}}function q(e){this.status=500,this.name=\"invalid_value\",this.message=e,this.error=!0;try{Error.captureStackTrace(this,q)}catch(t){}}var R,C=e(76),D=e(83),I=C.collate,L=C.toIndexableString,N=C.normalizeKey,j=e(80),B=e(81);R=\"undefined\"!=typeof console&&\"function\"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var F=e(85),M=F.Promise,P={},U=new D,J=50,H={_sum:function(e,t){return l(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];t+=o*o}return t}return{sum:l(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};n.viewCleanup=F.callbackify(function(){var e=this;return\"http\"===e.type()?T(e):x(e)}),n.query=function(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=F.extend(!0,{},t),\"function\"==typeof e&&(e={map:e});var r=this,o=M.resolve().then(function(){return O(r,e,t)});return F.promisedCallback(o,n),o},F.inherits(A,Error),F.inherits(k,Error),F.inherits(q,Error)}).call(this,e(53))},{53:53,76:76,80:80,81:81,83:83,85:85}],83:[function(e,t,n){\"use strict\";function r(){this.promise=new o(function(e){e()})}var o=e(85).Promise;r.prototype.add=function(e){return this.promise=this.promise[\"catch\"](function(){}).then(function(){return e()}),this.promise},r.prototype.finish=function(){return this.promise},t.exports=r},{85:85}],84:[function(e,t,n){\"use strict\";var r=e(86).upsert;t.exports=function(e,t,n){return r.apply(e,[t,n])}},{86:86}],85:[function(e,t,n){(function(t,r){\"use strict\";\"function\"==typeof r.Promise?n.Promise=r.Promise:n.Promise=e(61),n.inherits=e(57),n.extend=e(79);var o=e(50);n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return o(function(t){var r=t.pop(),o=e.apply(this,t);return\"function\"==typeof r&&n.promisedCallback(o,r),o})},n.fin=function(e,t){return e.then(function(e){var n=t();return\"function\"==typeof n.then?n.then(function(){return e}):e},function(e){var n=t();if(\"function\"==typeof n.then)return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}},n.flatten=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t},n.uniq=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[\"$\"+e[n]]=!0;var o=Object.keys(t),i=new Array(o.length);for(n=0,r=o.length;r>n;n++)i[n]=o[n].substring(1);return i};var i=e(51),s=e(87);n.MD5=function(e){return t.browser?s.hash(e):i.createHash(\"md5\").update(e).digest(\"hex\")}}).call(this,e(53),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{50:50,51:51,53:53,57:57,61:61,79:79,87:87}],86:[function(e,t,n){(function(t){\"use strict\";function r(e,t,n){return new i(function(r,i){return\"string\"!=typeof t?i(new Error(\"doc id is required\")):void e.get(t,function(s,a){if(s){if(404!==s.status)return i(s);a={}}var c=a._rev,u=n(a);return u?(u._id=t,u._rev=c,void r(o(e,u,n))):r({updated:!1,rev:c})})})}function o(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(o){if(409!==o.status)throw o;return r(e,t._id,n)})}var i;i=\"undefined\"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:\"function\"==typeof t.Promise?t.Promise:e(61),n.upsert=function(e,t,n){var o=this,i=r(o,e,t);return\"function\"!=typeof n?i:void i.then(function(e){n(null,e)},n)},n.putIfNotExists=function(e,t,n){var o=this;\"string\"!=typeof e&&(n=t,t=e,e=t._id);var i=function(e){return e._rev?!1:t},s=r(o,e,i);return\"function\"!=typeof n?s:void s.then(function(e){n(null,e)},n)},\"undefined\"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{61:61}],87:[function(e,t,n){!function(e){if(\"object\"==typeof n)t.exports=e();else if(\"function\"==typeof define&&define.amd)define(e);else{var r;try{r=window}catch(o){r=self}r.SparkMD5=e()}}(function(e){\"use strict\";var t=function(e,t){return e+t&4294967295},n=function(e,n,r,o,i,s){return n=t(t(n,e),t(o,s)),t(n<<i|n>>>32-i,r)},r=function(e,t,r,o,i,s,a){return n(t&r|~t&o,e,t,i,s,a)},o=function(e,t,r,o,i,s,a){return n(t&o|r&~o,e,t,i,s,a)},i=function(e,t,r,o,i,s,a){return n(t^r^o,e,t,i,s,a)},s=function(e,t,r,o,i,s,a){return n(r^(t|~o),e,t,i,s,a)},a=function(e,n){var a=e[0],c=e[1],u=e[2],f=e[3];a=r(a,c,u,f,n[0],7,-680876936),f=r(f,a,c,u,n[1],12,-389564586),u=r(u,f,a,c,n[2],17,606105819),c=r(c,u,f,a,n[3],22,-1044525330),a=r(a,c,u,f,n[4],7,-176418897),f=r(f,a,c,u,n[5],12,1200080426),u=r(u,f,a,c,n[6],17,-1473231341),c=r(c,u,f,a,n[7],22,-45705983),a=r(a,c,u,f,n[8],7,1770035416),f=r(f,a,c,u,n[9],12,-1958414417),u=r(u,f,a,c,n[10],17,-42063),c=r(c,u,f,a,n[11],22,-1990404162),a=r(a,c,u,f,n[12],7,1804603682),f=r(f,a,c,u,n[13],12,-40341101),u=r(u,f,a,c,n[14],17,-1502002290),c=r(c,u,f,a,n[15],22,1236535329),a=o(a,c,u,f,n[1],5,-165796510),f=o(f,a,c,u,n[6],9,-1069501632),u=o(u,f,a,c,n[11],14,643717713),c=o(c,u,f,a,n[0],20,-373897302),a=o(a,c,u,f,n[5],5,-701558691),f=o(f,a,c,u,n[10],9,38016083),u=o(u,f,a,c,n[15],14,-660478335),c=o(c,u,f,a,n[4],20,-405537848),a=o(a,c,u,f,n[9],5,568446438),f=o(f,a,c,u,n[14],9,-1019803690),u=o(u,f,a,c,n[3],14,-187363961),c=o(c,u,f,a,n[8],20,1163531501),a=o(a,c,u,f,n[13],5,-1444681467),f=o(f,a,c,u,n[2],9,-51403784),u=o(u,f,a,c,n[7],14,1735328473),c=o(c,u,f,a,n[12],20,-1926607734),a=i(a,c,u,f,n[5],4,-378558),f=i(f,a,c,u,n[8],11,-2022574463),u=i(u,f,a,c,n[11],16,1839030562),c=i(c,u,f,a,n[14],23,-35309556),a=i(a,c,u,f,n[1],4,-1530992060),f=i(f,a,c,u,n[4],11,1272893353),u=i(u,f,a,c,n[7],16,-155497632),c=i(c,u,f,a,n[10],23,-1094730640),a=i(a,c,u,f,n[13],4,681279174),f=i(f,a,c,u,n[0],11,-358537222),u=i(u,f,a,c,n[3],16,-722521979),c=i(c,u,f,a,n[6],23,76029189),a=i(a,c,u,f,n[9],4,-640364487),f=i(f,a,c,u,n[12],11,-421815835),u=i(u,f,a,c,n[15],16,530742520),c=i(c,u,f,a,n[2],23,-995338651),a=s(a,c,u,f,n[0],6,-198630844),f=s(f,a,c,u,n[7],10,1126891415),u=s(u,f,a,c,n[14],15,-1416354905),c=s(c,u,f,a,n[5],21,-57434055),a=s(a,c,u,f,n[12],6,1700485571),f=s(f,a,c,u,n[3],10,-1894986606),u=s(u,f,a,c,n[10],15,-1051523),c=s(c,u,f,a,n[1],21,-2054922799),a=s(a,c,u,f,n[8],6,1873313359),f=s(f,a,c,u,n[15],10,-30611744),u=s(u,f,a,c,n[6],15,-1560198380),c=s(c,u,f,a,n[13],21,1309151649),a=s(a,c,u,f,n[4],6,-145523070),f=s(f,a,c,u,n[11],10,-1120210379),u=s(u,f,a,c,n[2],15,718787259),c=s(c,u,f,a,n[9],21,-343485551),e[0]=t(a,e[0]),e[1]=t(c,e[1]),e[2]=t(u,e[2]),e[3]=t(f,e[3])},c=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},u=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},f=function(e){var t,n,r,o,i,s,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;u>=t;t+=64)a(f,c(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(f,r),t=0;16>t;t+=1)r[t]=0;return o=8*u,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),s=parseInt(o[1],16)||0,r[14]=i,r[15]=s,a(f,r),f},l=function(e){var t,n,r,o,i,s,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)a(f,u(e.subarray(t-64,t)));for(e=c>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(f,r),t=0;16>t;t+=1)r[t]=0;return o=8*c,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),s=parseInt(o[1],16)||0,r[14]=i,r[15]=s,a(f,r),f},d=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\"],p=function(e){var t,n=\"\";for(t=0;4>t;t+=1)n+=d[e>>8*t+4&15]+d[e>>8*t&15];return n},h=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join(\"\")},v=function(e){return h(f(e))},m=function(){this.reset()};return\"5d41402abc4b2a76b9719d911017c592\"!==v(\"hello\")&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),m.prototype.append=function(e){return/[\\u0080-\\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)a(this._state,c(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=e?this._state:h(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(a(this._state,e),i=0;16>i;i+=1)e[i]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,a(this._state,e)},m.prototype.reset=function(){return this._buff=\"\",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\\u0080-\\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=f(e);return t?n:h(n)},m.hashBinary=function(e,t){var n=f(e);return t?n:h(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)a(this._state,u(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=e?this._state:h(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=l(new Uint8Array(e));return t?n:h(n)},m})},{}],88:[function(e,t,n){\"use strict\";function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){var s=t.pop();o[s]=e}else t.push(e)}n.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,o,i,s,a,c,u,f,l,d,p=\"\";n=t.pop();)if(r=n.obj,o=n.prefix||\"\",i=n.val||\"\",p+=o,i)p+=i;else if(\"object\"!=typeof r)p+=\"undefined\"==typeof r?null:JSON.stringify(r);else if(null===r)p+=\"null\";else if(Array.isArray(r)){for(t.push({val:\"]\"}),s=r.length-1;s>=0;s--)a=0===s?\"\":\",\",t.push({obj:r[s],prefix:a});t.push({val:\"[\"})}else{c=[];for(u in r)r.hasOwnProperty(u)&&c.push(u);for(t.push({val:\"}\"}),s=c.length-1;s>=0;s--)f=c[s],l=r[f],d=s>0?\",\":\"\",d+=JSON.stringify(f)+\":\",t.push({obj:l,prefix:d});t.push({val:\"{\"})}return p},n.parse=function(e){for(var t,n,o,i,s,a,c,u,f,l=[],d=[],p=0;;)if(t=e[p++],\"}\"!==t&&\"]\"!==t&&\"undefined\"!=typeof t)switch(t){case\" \":case\"\t\":case\"\\n\":case\":\":case\",\":break;case\"n\":p+=3,r(null,l,d);break;case\"t\":p+=3,r(!0,l,d);break;case\"f\":p+=4,r(!1,l,d);break;case\"0\":case\"1\":case\"2\":case\"3\":case\"4\":case\"5\":case\"6\":case\"7\":case\"8\":case\"9\":case\"-\":for(n=\"\",p--;;){if(o=e[p++],!/[\\d\\.\\-e\\+]/.test(o)){p--;break}n+=o}r(parseFloat(n),l,d);break;case'\"':for(i=\"\",s=void 0,a=0;;){if(c=e[p++],'\"'===c&&(\"\\\\\"!==s||a%2!==1))break;i+=c,s=c,\"\\\\\"===s?a++:a=0}r(JSON.parse('\"'+i+'\"'),l,d);break;case\"[\":u={element:[],index:l.length},l.push(u.element),d.push(u);break;case\"{\":f={element:{},index:l.length},l.push(f.element),d.push(f);break;default:throw new Error(\"unexpectedly reached end of input: \"+t)}else{if(1===l.length)return l.pop();r(l.pop(),l,d)}}},{}],89:[function(e,t,n){(function(n){\"use strict\";var r=e(45);t.exports=r,r.ajax=e(15),r.utils=e(48),r.Errors=e(24),r.replicate=e(42).replicate,r.sync=e(46),r.version=e(49);var o=e(2);if(r.adapter(\"http\",o),r.adapter(\"https\",o),r.adapter(\"idb\",e(8),!0),r.adapter(\"websql\",e(12),!0),r.plugin(e(82)),!n.browser){var i=e(51);r.adapter(\"leveldb\",i,!0)}}).call(this,e(53))},{12:12,15:15,2:2,24:24,42:42,45:45,46:46,48:48,49:49,51:51,53:53,8:8,82:82}]},{},[89])(89)});\n"]}